@namespace url("http://www.w3.org/1999/xhtml");
@namespace xul url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");

html xul|scrollbar {
  display: none;
}

:root {
  --moz-highlight-color: rgba(171, 171, 171, 0.5);

  --moz-form-border: #bfbfbf;
  --moz-form-border-focused: #ff9400;
  --moz-form-border-invalid: #d83812;
  --moz-form-border-radius: 2px;

  --moz-form-textcolor: #363b40;
  --moz-form-textcolor-disabled: #bebebe;
  --moz-form-textcolor-placeholder: #777;

  --moz-form-background-disabled: #f5f5f5;
  --moz-range-progress-disabled: #ffd498;

  --moz-form-button-background: white;
}

select,
button,
xul|button,
textarea,
meter,
progress,
input:not([type="image"]):not([type="range"]) {
  -moz-appearance: none;
  border-radius: var(--moz-form-border-radius);
  border: 1px solid var(--moz-form-border);
  background-color: var(--moz-form-button-background);
  color: var(--moz-form-textcolor);
  padding: 1px;
}

/* A few elements really like their borders */
input[type="radio"],
input[type="checkbox"] {
  border: 1px solid var(--moz-form-border) !important;
  border-style: solid !important;
}

/* Hide inner focus rings */
button::-moz-focus-inner,
input[type="color"]:-moz-system-metric(color-picker-available)::-moz-focus-inner,
input[type="reset"]::-moz-focus-inner,
input[type="button"]::-moz-focus-inner,
input[type="submit"]::-moz-focus-inner,
input[type="file"] > button[type="button"]::-moz-focus-inner {
  border: none;
}

/* These rule are overspecified in forms.css. We have to work hard to override them */
input[type="radio"]:disabled,
input[type="radio"]:disabled:active,
input[type="radio"]:disabled:hover,
input[type="radio"]:disabled:hover:active,
input[type="checkbox"]:disabled,
input[type="checkbox"]:disabled:active,
input[type="checkbox"]:disabled:hover,
input[type="checkbox"]:disabled:hover:active,
input[type="color"]:disabled {
  border: 1px solid var(--moz-form-border) !important;
  background-color: var(--moz-form-background-disabled) !important;
  color: var(--moz-form-textcolor-disabled);
}

/* forms.css forces styles on these in all sorts of disabled states. Make sure we override ALL of them. */
input[type="submit"]:disabled,
input[type="submit"]:disabled:active,
input[type="submit"]:disabled:hover,
input[type="submit"]:disabled:active:hover,
input[type="reset"]:disabled,
input[type="reset"]:disabled:active,
input[type="reset"]:disabled:hover,
input[type="reset"]:disabled:active:hover,
input[type="button"]:disabled,
input[type="button"]:disabled:active,
input[type="button"]:disabled:hover,
input[type="button"]:disabled:active:hover,
button:disabled,
button:disabled:active,
button:disabled:hover,
button:disabled:active:hover {
  border: 1px solid var(--moz-form-border) !important;
  padding: 0 7px 0 7px;
  color: var(--moz-form-textcolor-disabled);
}

input::-moz-placeholder {
  color: var(--moz-form-textcolor-placeholder);
}

input:not([type="image"]):focus,
button:focus,
textarea:focus,
select:focus {
  border-color: var(--moz-form-border-focused);
}

input:not([type="image"]):invalid {
  border-color: var(--moz-form-border-invalid);
  box-shadow: none; /* Override Gecko's default behavior */
}

*:-moz-any-link:active,
*[role=button]:active,
button:not(:disabled):active,
button:not(:disabled):active:hover,
input:not(:focus):not(:disabled):not([type="range"]):active,
select:not(:disabled):active,
textarea:not(:focus):not(:disabled):active,
option:active,
label:active,
xul|menulist:active {
  background-color: var(--moz-highlight-color);
}

/* forms.css tries to alter the padding on these views when they're hovered AND tapped. Don't let it */
input[type="button"],
input[type="button"]:active:hover,
input[type="submit"],
input[type="submit"]:active:hover,
input[type="reset"],
input[type="reset"]:active:hover,
button,
button:active:hover {
  padding: 0 7px 0 7px !important;
  border-style: solid;
}

/* Radios and checkboxes */
input[type="radio"],
input[type="checkbox"] {
  max-width: 14px;
  max-height: 14px;
  padding: 2px 1px 2px 1px;
}

input[type="checkbox"] {
  /* forms.css uses !important on this. Override it */
  border-radius: var(--moz-form-border-radius) !important;
}

/* Disabled styling */
select:disabled:disabled,
textarea:disabled,
button:disabled,
input[type="file"]:disabled > xul|label,
input:disabled:not([type="file"]):not([type="range"]) {
  background-color: var(--moz-form-background-disabled);
  color: var(--moz-form-textcolor-disabled);
}

/* Color inputs */
input[type="color"] {
  padding: 0 !important;
}
 
input[type="color"]:-moz-system-metric(color-picker-available)::-moz-color-swatch {
  border: none;
  border-radius: var(--moz-form-border-radius);
}

/* File inputs */
input[type="file"] {
  padding: 0 !important;
}

input[type="file"] > button[type="button"] {
  -moz-appearance: none !important;
  border: none;
  border-right: 1px solid var(--moz-form-border);
  border-radius: 0;
  background-color: var(--moz-form-button-background);
  /* We had to remove the padding on the file input to make this stretch correctly.
     Add it back here */
  padding-top: 1px;
  padding-bottom: 1px;
}

input[type="file"]:disabled > button[type="button"] {
  background-color: var(--moz-form-button-background);
  border: none !important;
  border-right: 1px solid var(--moz-form-border) !important;
}

/* Number inputs */
input[type="number"] {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

input[type=number]::-moz-number-wrapper {
  padding: 0;
  height: 100%;
  align-items: stretch;
}

input[type=number]::-moz-number-text {
  padding: 0;
}

input[type=number]::-moz-number-spin-box {
  flex-direction: row;
  background-color: var(--moz-form-button-background);
  padding: 0 !important;
  /* These numbers were chosen semi-randomly to make these buttons big enough to click */
  width: 64px;
  height: auto;
  align-self: stretch;
}

input[type="number"]::-moz-number-spin-up,
input[type="number"]::-moz-number-spin-down {
  /* We had to remove the padding on the file input to make this stretch correctly.
     Add it back here */
  padding-top: 1px;
  padding-bottom: 1px;

  border: none;
  border-left: 1px solid var(--moz-form-border);
  border-radius: 0;

  background-position: center center;
  background-size: auto 75%;
  flex: 1;
}

input[type="number"]:disabled::-moz-number-spin-up,
input[type="number"]:disabled::-moz-number-spin-down {
  background-color: var(--moz-form-button-background);
}

input[type="number"]::-moz-number-spin-up { background-image: url("chrome://browser/skin/images/arrows.svg#single-up"); }
input[type="number"]:disabled::-moz-number-spin-up { background-image: url("chrome://browser/skin/images/arrows.svg#single-up-disabled"); }
input[type="number"]::-moz-number-spin-down { background-image: url("chrome://browser/skin/images/arrows.svg#single-down"); }
input[type="number"]:disabled::-moz-number-spin-down { background-image: url("chrome://browser/skin/images/arrows.svg#single-down-disabled"); }

/* Select elements */
select {
  -moz-appearance: none !important;
}

select:not([size]):not([multiple]) > xul|scrollbar {
  display: block;
}

select > button {
  -moz-appearance: none;
  border-radius: 0;
  border: none;

  background-size: auto 50%;
  /* The backgound image is marked !important in layout/style/forms.css, so we have to use important here */
  background-image: url("chrome://browser/skin/images/arrows.svg#double") !important;
  font-size: inherit;
}

select:disabled > button {
  /* The buttons on selects don't look like "buttons", so their background should match the textbox */
  background-color: var(--moz-form-background-disabled);
  border: none;
  background-image: url("chrome://browser/skin/images/arrows.svg#double-disabled") !important;
}

/* Prevent events from firing on the option elements themselves. We'll handle them in SelectHelper.js */
select option, select optgroup {
  pointer-events: none;
}

select:not([size]):not([multiple]),
select[size="0"],
select[size="1"] {
  padding: 0 1px 0 1px;
}

option:disabled {
  color: var(--moz-form-textcolor-disabled);
}

/* Range inputs */
input[type=range]:active {
  background-color: transparent;
}

input[type=range]::-moz-range-track {
  border: none;
  background-color: var(--moz-form-border);
}

input[type=range]:disabled::-moz-range-track {
  border: none;
  background-color: var(--moz-form-background-disabled);
}

input[type=range]::-moz-range-progress {
  background-color: var(--moz-form-border-focused);
}

input[type=range]:disabled::-moz-range-progress {
  background-color: var(--moz-range-progress-disabled);
}

input[type=range]::-moz-range-thumb {
  background-image: none;
  background-color: var(--moz-form-button-background);
  border: 1px solid var(--moz-form-border);
}

input[type=range]:disabled::-moz-range-thumb {
  background-color: var(--moz-form-background-disabled);
}

input[type=range]:active::-moz-range-thumb {
  border: 1px solid var(--moz-form-border-focused);
}

/* Progress elements */
progress {
  padding: 0;
}

progress::-moz-progress-bar {
  background-color: var(--moz-form-border-focused);
}

progress:indeterminate::-moz-progress-bar {
  background-color: transparent;
  background: repeating-linear-gradient(-55deg,
        var(--moz-form-border-focused),
        var(--moz-form-border-focused) 10px,
        var(--moz-range-progress-disabled) 10px,
        var(--moz-range-progress-disabled) 20px);
}

progress:disabled::-moz-progress-bar {
  background-color: var(--moz-range-progress-disabled);
}

/* Meter elements */
meter {
  padding: 0;
  background-image: none;
}

meter:-moz-meter-optimum::-moz-meter-bar {
  background-image: none;
  background-color: #5fad47; /* green */
}

meter:-moz-meter-sub-optimum::-moz-meter-bar {
  background-image: none;
  background-color: var(--moz-form-border-focused);
}

meter:-moz-meter-sub-sub-optimum::-moz-meter-bar {
  background-image: none;
  background-color: #d73920; /* red */
}

/* -moz-touch-enabled? media elements */
:-moz-any(video, audio) > xul|videocontrols {
  -moz-binding: url("chrome://global/content/bindings/videocontrols.xml#touchControls");
}
