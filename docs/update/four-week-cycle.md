# 4 週間サイクル（週次フロー）

このドキュメントは、Floorp の「1 サイクル＝4 週間」でチームがやるべき作業を週次の流れで整理したものです。
目的は、サイクル中の期待されるゴール、チェックポイント、担当責任、リリースとの連携（Daylight 自動リリース）を明確にすることです。

---

## 全体概観（1 サイクル = 4 週間）

- Week 1: 計画と新機能開始（実装キックオフ）
- Week 2: 実装継続と統合（主要機能の完了を目指す）
- Week 3: 安定化とバグ修正（回帰・統合テスト強化）
- Week 4: リリース準備とマージ（最終チェック、`beta`→`main` の取り込み）

各週に記載しているチェックリストは最低限のものです。プロジェクト状況に応じて追加してください。

---

## Week 1 — 計画と開始

目的: サイクルの目標を定め、優先度の高い機能を `beta` にマージする準備を開始する。

やること（チェックリスト）:

- サイクルゴールをドキュメント化（短い箇条書きで OK）
- 優先度の高い PR/issue をピックアップ
- 各機能の担当者アサイン
- 必要な設計/仕様メモを作成（`docs/` または issue にリンク）
- 開発用の feature branch を作成（`feature/<short-desc>`）

CI/運用連携:

- PR を作る際に PR テンプレート（目的/変更点/注意点）を必須化
- PR が作成されたら `ci/pr-check` を動かして早期フィードバックを得る

成功条件:

- 主要な機能 PR が作成され、担当者とレビュワーが決まっている

---

## Week 2 — 実装と統合

目的: 主要機能を完成、`beta` にマージできる状態にする。

やること（チェックリスト）:

- 実装完了を目指してコードを書く
- 単体テストと簡易統合テストを追加
- 依存関係やビルドフローで問題がないか確認
- レビュー指摘に対応し、PR をマージして `beta` に反映

CI/運用連携:

- `beta` にマージされたコミットはフルビルド（Nightly/Integration）を起動
- 自動生成される成果物（デバッグビルド）をアーティファクトとして保管

成功条件:

- 主要な PR がレビューされマージ済みで、`beta` に反映されている

---

## Week 3 — 安定化（テスト強化）

目的: 回帰や重大バグを取り除き、リリース候補を安定させる。

やること（チェックリスト）:

- 回帰テスト、E2E テスト、パフォーマンスの簡易チェックを実行
- クリティカルなバグを優先修正
- ドキュメント、ローカライズ、インストーラの更新（必要な場合）
- リリースノートの下書きを開始（merged PR の要約）

CI/運用連携:

- サニティスイートが失敗した場合は `beta` の自動リリースを一時停止（`BETA_FREEZE` フラグ）
- 重要な問題が発見されたら hotfix 手順を検討

成功条件:

- 重大な欠陥が解消され、リリース候補として承認される（リリース責任者の承認）

---

## Week 4 — リリース準備と取り込み

目的: 最終チェックを行い、`beta` の安定版を `main` に取り込む。Daylight リリースの運用は継続されるが、サイクル終盤は自動リリースの抑止を検討する（任意）。

やること（チェックリスト）:

- リリースチェックリストの最終確認:
  - 全必須 CI が成功している
  - 既知の blocker がない
  - リリースノート案が完成
  - 署名キー/配布チャネルが準備できている
- `beta` → `main` のマージ（リリース責任者による実行）
- main にマージしたらタグ付けと最終リリース（Stable）処理
- ロールアウト計画（必要ならカナリア配布）

CI/運用連携:

- `main` へのマージで Stable 用のビルド + 署名ワークフローが実行される
- Daylight（`beta`） の自動リリースは、サイクル末期においては `release:hold` を検討（重大修正の余地を残すため）

成功条件:

- `main` に取り込み完了、Stable リリースが開始可能な状態

---

## 付録: 例 — 4 週間のカレンダー（テンプレート）

- Week 1 (月〜日): プランニング, feature ブランチ作成、PR 作成
- Week 2 (月〜日): 実装完了、レビュー、`beta` 反映
- Week 3 (月〜日): テスト強化、バグ修正、リリースノート作成
- Week 4 (月〜日): 最終チェック、`beta`→`main` マージ、Stable リリース準備

---

作成日: 2025-10-29
