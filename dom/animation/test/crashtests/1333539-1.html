<!DOCTYPE html>
<html class="reftest-wait">
<head>
<meta charset="UTF-8">
<script>
window.onload = function(){
  if (typeof Object.getOwnPropertyDescriptor(window.Animation.prototype,
      'timeline').set == 'undefined') {
    document.documentElement.classList.remove("reftest-wait");
    return;
  }

  let body = document.getElementsByTagName("body")[0];
  let target = document.createElement("div");
  let anim1 = new Animation();
  let anim2 = new Animation();
  let effect = new KeyframeEffect(target, { opacity: [ 0, 1 ] }, 1000);
  body.appendChild(target);
  target.appendChild(document.createElement("meter"));
  anim1.startTime = 88;
  anim1.timeline = null;
  anim1.pause();
  anim1.effect = effect;
  anim2.effect = effect;
  anim1.effect = effect;

  // anim1, since it doesn't have a timeline, will remain pause-pending,
  // so just wait on anim2.
  anim2.ready.then(() => {
    document.documentElement.classList.remove("reftest-wait");
  });
};
</script>
</head>
<body></body>
</html>
