<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>storage event propagation test</title>

<script src="/tests/SimpleTest/SimpleTest.js"></script>
<script type="text/javascript" src="interOriginTest2.js"></script>
<link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css" />

<!--
  This test loads two frames from different
  origins and checks that entries of localStorage
  objects don't leak each between other.

  The subsystem is based on postMessage and addEventListener
  to send messages among different origins. The subsystem waits
  for both frames be loaded and then alternately calls each frames'
  doStep() function that on each call proceeds with a single step
  of the test on its side. This way the subsystem alternate between
  both frames until both sequences completely finish.
-->

<script type="text/javascript">

function startTest()
{
  masterFrameOrigin = "http://example.com:80";
  slaveFrameOrigin = "http://example.org:80";

  masterFrame.location = masterFrameOrigin + framePath + "frameLocalStorageMaster.html";
  slaveFrame.location = slaveFrameOrigin + framePath + "frameLocalStorageSlaveNotEqual.html";
}

SimpleTest.waitForExplicitFinish();

</script>

</head>

<body onload="startTest();">
  <iframe src="" name="masterFrame"></iframe>
  <iframe src="" name="slaveFrame"></iframe>
</body>
</html>
