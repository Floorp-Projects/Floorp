<html>
<body>
<a id='link' target='_blank' href="http://example.com">Click me</a>

<script>
function clickLink() {
  // See testcase in bug 666604.
  var e = document.createEvent("MouseEvent");
  e.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0,
                   false, false, false, false, 0, null);
  document.getElementById('link').dispatchEvent(e);
}

addEventListener('load', function() { setTimeout(clickLink, 0) });
</script>

</body>
</html>
