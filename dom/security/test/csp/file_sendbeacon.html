<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Security-Policy" content= "connect-src 'none'">
  <title>Bug 1234813 - sendBeacon should not throw if blocked by Content Policy</title>
</head>
<body>

<script type="application/javascript">
try {
  navigator.sendBeacon("http://example.com/sendbeaconintonirvana");
  window.parent.postMessage({result: "blocked-beacon-does-not-throw"}, "*");
  }
  catch (e) {
    window.parent.postMessage({result: "blocked-beacon-throws"}, "*");
  }
</script>

</body>
</html>
