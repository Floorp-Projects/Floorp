<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <script src="/tests/SimpleTest/SimpleTest.js"></script>
</head>
<body>
  <script class="testbody" type="text/javascript">

    Promise.all([
      tryFetch("http://example.com/"),
      tryFetch("http://example.org/")
    ]).then(result => {
      const [sameOrigin, crossOrigin] = result;
      window.parent.postMessage({ sameOrigin, crossOrigin });
    });

    async function tryFetch(url) {
      let failed
      try {
        const response = await fetch(url);
        failed = !response.ok
      } catch(e) {
        failed = true
      }
      return failed;
    }
  </script>
</body>
</html>
