<!DOCTYPE html>
<html class="reftest-wait">
<head> 
<script>
var ITERATIONS = 200;

function stoptest (evt)
{
   if (evt) {
     // Note we reset 'src' to release decoder resources and cubeb streams to
     // prevent OOM or OpenCubeb() failures.
     evt.target.src = "";
   }
   document.documentElement.removeAttribute("class");
}

function boom()
{
    for (var i = 0; i < ITERATIONS; ++i) {
        a = document.createElementNS("http://www.w3.org/1999/xhtml", "audio");
        a.addEventListener("loadedmetadata", stoptest);
        a.setAttributeNS(null, "autoplay", "");
        a.setAttributeNS(null, "src", "sound.ogg");
    }
    setTimeout(stoptest, 250);
}

</script>
</head>
<body onload="boom();"></body>
</html>
