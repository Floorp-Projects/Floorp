[DEFAULT]
tags = "mtg webrtc"
subsuite = "media"
scheme = "https"
support-files = [
  "head.js",
  "dataChannel.js",
  "mediaStreamPlayback.js",
  "network.js",
  "nonTrickleIce.js",
  "pc.js",
  "stats.js",
  "templates.js",
  "test_enumerateDevices_iframe.html",
  "test_getUserMedia_permission_iframe.html",
  "NetworkPreparationChromeScript.js",
  "blacksilence.js",
  "turnConfig.js",
  "sdpUtils.js",
  "addTurnsSelfsignedCert.js",
  "parser_rtp.js",
  "peerconnection_audio_forced_sample_rate.js",
  "iceTestUtils.js",
  "simulcast.js",
  "helpers_from_wpt/sdp.js",
  "!/dom/canvas/test/captureStream_common.js",
  "!/dom/canvas/test/webgl-mochitest/webgl-util.js",
  "!/dom/media/test/manifest.js",
  "!/dom/media/test/seek.webm",
  "!/dom/media/test/sin-441-1s-44100.flac",
  "!/dom/media/test/gizmo.mp4",
  "!/docshell/test/navigation/blank.html",
]
prefs = [
  "focusmanager.testmode=true", # emulate focus
  "privacy.partition.network_state=false",
  "network.proxy.allow_hijacking_localhost=true",
  "media.devices.enumerate.legacy.enabled=false",
]

["test_defaultAudioConstraints.html"]
skip-if = [
  "os == 'mac'",
  "os == 'win'",
  "os == 'android'", # Bug 1404995, no loopback devices on some platforms
]

["test_getUserMedia_GC_MediaStream.html"]

["test_getUserMedia_active_autoplay.html"]

["test_getUserMedia_addTrackRemoveTrack.html"]

["test_getUserMedia_addtrack_removetrack_events.html"]

["test_getUserMedia_audioCapture.html"]
skip-if = ["os == 'android'"] # android(Bug 1189784, timeouts on 4.3 emulator), android(Bug 1264333), aarch64 due to 1538359

["test_getUserMedia_audioConstraints.html"]
skip-if = [
  "os == 'mac'",
  "os == 'win'",
  "os == 'android'", # Bug 1404995, no loopback devices on some platforms
]

["test_getUserMedia_audioConstraints_concurrentIframes.html"]
skip-if = [
  "os == 'mac'",
  "os == 'win'",
  "os == 'android'",
  "(os == 'linux' && debug)",  # Bug 1404995, no loopback devices on some platforms # Bug 1481101
  "os == 'linux' && !debug && !fission", # bug 1645930, lower frequency intermittent
]

["test_getUserMedia_audioConstraints_concurrentStreams.html"]
skip-if = [
  "os == 'mac'",
  "os == 'win'",
  "os == 'android'", # Bug 1404995, no loopback devices on some platforms
]

["test_getUserMedia_basicAudio.html"]

["test_getUserMedia_basicAudio_loopback.html"]
skip-if = [
  "os == 'mac'",
  "os == 'win'",
  "os == 'android'", # Bug 1404995, no loopback devices on some platforms
]

["test_getUserMedia_basicScreenshare.html"]
skip-if = [
  "os == 'android'",     # no screenshare on android
  "apple_silicon",            # bug 1707742
]

["test_getUserMedia_basicTabshare.html"]
skip-if = ["os == 'android'"] # no windowshare on android

["test_getUserMedia_basicVideo.html"]

["test_getUserMedia_basicVideoAudio.html"]

["test_getUserMedia_basicVideo_playAfterLoadedmetadata.html"]

["test_getUserMedia_basicWindowshare.html"]
skip-if = ["os == 'android'"] # no windowshare on android

["test_getUserMedia_bug1223696.html"]

["test_getUserMedia_callbacks.html"]

["test_getUserMedia_constraints.html"]

["test_getUserMedia_cubebDisabled.html"]

["test_getUserMedia_cubebDisabledFakeStreams.html"]

["test_getUserMedia_getTrackById.html"]

["test_getUserMedia_gumWithinGum.html"]

["test_getUserMedia_loadedmetadata.html"]

["test_getUserMedia_mediaElementCapture_audio.html"]

["test_getUserMedia_mediaElementCapture_tracks.html"]

["test_getUserMedia_mediaElementCapture_video.html"]

["test_getUserMedia_mediaStreamClone.html"]

["test_getUserMedia_mediaStreamConstructors.html"]

["test_getUserMedia_mediaStreamTrackClone.html"]

["test_getUserMedia_nonDefaultRate.html"]

["test_getUserMedia_peerIdentity.html"]

["test_getUserMedia_permission.html"]

["test_getUserMedia_playAudioTwice.html"]

["test_getUserMedia_playVideoAudioTwice.html"]

["test_getUserMedia_playVideoTwice.html"]

["test_getUserMedia_scarySources.html"]
skip-if = ["os == 'android'"] # no screenshare or windowshare on android

["test_getUserMedia_spinEventLoop.html"]

["test_getUserMedia_trackCloneCleanup.html"]

["test_getUserMedia_trackEnded.html"]
