/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */

#include "nsISupports.idl"

%{C++
#define NS_REMOTE_AGENT_CONTRACTID "@mozilla.org/remote/agent"
%}

/**
 * Remote agent is a low-level debugging interface
 * based on the CDP protocol.
 */
[scriptable, uuid(ccbd36a6-a8fc-4930-b747-8be79c7a04b2)]
interface nsIRemoteAgent : nsISupports
{
  /**
   * Determine whether the remote agent is currently listening,
   * i.e. accepting new connections.
   */
  readonly attribute boolean listening;

  /**
   * Start the listener.
   *
   * Takes a network address string of the form [<host>][:<port>].
   * :0 will have the system atomically select a free port.
   */
  void listen(in AUTF8String address);

  /** Close the listener. */
  void close();

  /** The network scheme, i.e. "http", the listener is currently bound to. */
  readonly attribute AUTF8String scheme;

  /** The host name the listener is currently bound to. */
  readonly attribute AUTF8String host;

  /** The port the listener socket is currently bound to. */
  readonly attribute long port;
};
