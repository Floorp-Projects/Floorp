// GENERATED CODE
// Generated by the Java program at /build/annotationProcessors at compile time from
// annotations on Java methods. To update, change the annotations on the corresponding Java
// methods and rerun the build. Manually updating this file will cause your build to fail.

#include "GeneratedJNIWrappers.h"
#include "AndroidBridgeUtilities.h"
#include "nsXPCOMStrings.h"
#include "AndroidBridge.h"

namespace mozilla {
namespace widget {
namespace android {
jclass GeckoAppShell::mGeckoAppShellClass = 0;
jmethodID GeckoAppShell::jAcknowledgeEvent = 0;
jmethodID GeckoAppShell::jAddPluginViewWrapper = 0;
jmethodID GeckoAppShell::jAlertsProgressListener_OnProgress = 0;
jmethodID GeckoAppShell::jCancelVibrate = 0;
jmethodID GeckoAppShell::jCheckURIVisited = 0;
jmethodID GeckoAppShell::jClearMessageList = 0;
jmethodID GeckoAppShell::jCloseCamera = 0;
jmethodID GeckoAppShell::jCloseNotification = 0;
jmethodID GeckoAppShell::jCreateMessageListWrapper = 0;
jmethodID GeckoAppShell::jCreateShortcut = 0;
jmethodID GeckoAppShell::jDeleteMessageWrapper = 0;
jmethodID GeckoAppShell::jDisableBatteryNotifications = 0;
jmethodID GeckoAppShell::jDisableNetworkNotifications = 0;
jmethodID GeckoAppShell::jDisableScreenOrientationNotifications = 0;
jmethodID GeckoAppShell::jDisableSensor = 0;
jmethodID GeckoAppShell::jEnableBatteryNotifications = 0;
jmethodID GeckoAppShell::jEnableLocation = 0;
jmethodID GeckoAppShell::jEnableLocationHighAccuracy = 0;
jmethodID GeckoAppShell::jEnableNetworkNotifications = 0;
jmethodID GeckoAppShell::jEnableScreenOrientationNotifications = 0;
jmethodID GeckoAppShell::jEnableSensor = 0;
jmethodID GeckoAppShell::jGetContext = 0;
jmethodID GeckoAppShell::jGetCurrentBatteryInformationWrapper = 0;
jmethodID GeckoAppShell::jGetCurrentNetworkInformationWrapper = 0;
jmethodID GeckoAppShell::jGetDensity = 0;
jmethodID GeckoAppShell::jGetDpiWrapper = 0;
jmethodID GeckoAppShell::jGetExtensionFromMimeTypeWrapper = 0;
jmethodID GeckoAppShell::jGetHandlersForMimeTypeWrapper = 0;
jmethodID GeckoAppShell::jGetHandlersForURLWrapper = 0;
jmethodID GeckoAppShell::jGetIconForExtensionWrapper = 0;
jmethodID GeckoAppShell::jGetMessageWrapper = 0;
jmethodID GeckoAppShell::jGetMimeTypeFromExtensionsWrapper = 0;
jmethodID GeckoAppShell::jGetNextMessageInListWrapper = 0;
jmethodID GeckoAppShell::jGetProxyForURIWrapper = 0;
jmethodID GeckoAppShell::jGetScreenDepthWrapper = 0;
jmethodID GeckoAppShell::jGetScreenOrientationWrapper = 0;
jmethodID GeckoAppShell::jGetShowPasswordSetting = 0;
jmethodID GeckoAppShell::jGetSystemColoursWrapper = 0;
jmethodID GeckoAppShell::jHandleGeckoMessageWrapper = 0;
jmethodID GeckoAppShell::jHideProgressDialog = 0;
jmethodID GeckoAppShell::jInitCameraWrapper = 0;
jmethodID GeckoAppShell::jIsNetworkLinkKnown = 0;
jmethodID GeckoAppShell::jIsNetworkLinkUp = 0;
jmethodID GeckoAppShell::jIsTablet = 0;
jmethodID GeckoAppShell::jKillAnyZombies = 0;
jmethodID GeckoAppShell::jLockScreenOrientation = 0;
jmethodID GeckoAppShell::jMarkURIVisited = 0;
jmethodID GeckoAppShell::jMoveTaskToBack = 0;
jmethodID GeckoAppShell::jNetworkLinkType = 0;
jmethodID GeckoAppShell::jNotifyDefaultPrevented = 0;
jmethodID GeckoAppShell::jNotifyIME = 0;
jmethodID GeckoAppShell::jNotifyIMEChange = 0;
jmethodID GeckoAppShell::jNotifyIMEContext = 0;
jmethodID GeckoAppShell::jNotifyWakeLockChanged = 0;
jmethodID GeckoAppShell::jNotifyXreExit = 0;
jmethodID GeckoAppShell::jOpenUriExternal = 0;
jmethodID GeckoAppShell::jPerformHapticFeedback = 0;
jmethodID GeckoAppShell::jPumpMessageLoop = 0;
jmethodID GeckoAppShell::jRegisterSurfaceTextureFrameListener = 0;
jmethodID GeckoAppShell::jRemovePluginView = 0;
jmethodID GeckoAppShell::jScanMedia = 0;
jmethodID GeckoAppShell::jScheduleRestart = 0;
jmethodID GeckoAppShell::jSendMessageWrapper = 0;
jmethodID GeckoAppShell::jSetFullScreen = 0;
jmethodID GeckoAppShell::jSetKeepScreenOn = 0;
jmethodID GeckoAppShell::jSetSelectedLocale = 0;
jmethodID GeckoAppShell::jSetURITitle = 0;
jmethodID GeckoAppShell::jShowAlertNotificationWrapper = 0;
jmethodID GeckoAppShell::jShowFilePickerAsyncWrapper = 0;
jmethodID GeckoAppShell::jShowFilePickerForExtensionsWrapper = 0;
jmethodID GeckoAppShell::jShowFilePickerForMimeTypeWrapper = 0;
jmethodID GeckoAppShell::jShowInputMethodPicker = 0;
jmethodID GeckoAppShell::jUnlockProfile = 0;
jmethodID GeckoAppShell::jUnlockScreenOrientation = 0;
jmethodID GeckoAppShell::jUnregisterSurfaceTextureFrameListener = 0;
jmethodID GeckoAppShell::jVibrate1 = 0;
jmethodID GeckoAppShell::jVibrateA = 0;
void GeckoAppShell::InitStubs(JNIEnv *jEnv) {
    initInit();

    mGeckoAppShellClass = getClassGlobalRef("org/mozilla/gecko/GeckoAppShell");
    jAcknowledgeEvent = getStaticMethod("acknowledgeEvent", "()V");
    jAddPluginViewWrapper = getStaticMethod("addPluginView", "(Landroid/view/View;FFFFZ)V");
    jAlertsProgressListener_OnProgress = getStaticMethod("alertsProgressListener_OnProgress", "(Ljava/lang/String;JJLjava/lang/String;)V");
    jCancelVibrate = getStaticMethod("cancelVibrate", "()V");
    jCheckURIVisited = getStaticMethod("checkUriVisited", "(Ljava/lang/String;)V");
    jClearMessageList = getStaticMethod("clearMessageList", "(I)V");
    jCloseCamera = getStaticMethod("closeCamera", "()V");
    jCloseNotification = getStaticMethod("closeNotification", "(Ljava/lang/String;)V");
    jCreateMessageListWrapper = getStaticMethod("createMessageList", "(JJ[Ljava/lang/String;IIZI)V");
    jCreateShortcut = getStaticMethod("createShortcut", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V");
    jDeleteMessageWrapper = getStaticMethod("deleteMessage", "(II)V");
    jDisableBatteryNotifications = getStaticMethod("disableBatteryNotifications", "()V");
    jDisableNetworkNotifications = getStaticMethod("disableNetworkNotifications", "()V");
    jDisableScreenOrientationNotifications = getStaticMethod("disableScreenOrientationNotifications", "()V");
    jDisableSensor = getStaticMethod("disableSensor", "(I)V");
    jEnableBatteryNotifications = getStaticMethod("enableBatteryNotifications", "()V");
    jEnableLocation = getStaticMethod("enableLocation", "(Z)V");
    jEnableLocationHighAccuracy = getStaticMethod("enableLocationHighAccuracy", "(Z)V");
    jEnableNetworkNotifications = getStaticMethod("enableNetworkNotifications", "()V");
    jEnableScreenOrientationNotifications = getStaticMethod("enableScreenOrientationNotifications", "()V");
    jEnableSensor = getStaticMethod("enableSensor", "(I)V");
    jGetContext = getStaticMethod("getContext", "()Landroid/content/Context;");
    jGetCurrentBatteryInformationWrapper = getStaticMethod("getCurrentBatteryInformation", "()[D");
    jGetCurrentNetworkInformationWrapper = getStaticMethod("getCurrentNetworkInformation", "()[D");
    jGetDensity = getStaticMethod("getDensity", "()F");
    jGetDpiWrapper = getStaticMethod("getDpi", "()I");
    jGetExtensionFromMimeTypeWrapper = getStaticMethod("getExtensionFromMimeType", "(Ljava/lang/String;)Ljava/lang/String;");
    jGetHandlersForMimeTypeWrapper = getStaticMethod("getHandlersForMimeType", "(Ljava/lang/String;Ljava/lang/String;)[Ljava/lang/String;");
    jGetHandlersForURLWrapper = getStaticMethod("getHandlersForURL", "(Ljava/lang/String;Ljava/lang/String;)[Ljava/lang/String;");
    jGetIconForExtensionWrapper = getStaticMethod("getIconForExtension", "(Ljava/lang/String;I)[B");
    jGetMessageWrapper = getStaticMethod("getMessage", "(II)V");
    jGetMimeTypeFromExtensionsWrapper = getStaticMethod("getMimeTypeFromExtensions", "(Ljava/lang/String;)Ljava/lang/String;");
    jGetNextMessageInListWrapper = getStaticMethod("getNextMessageInList", "(II)V");
    jGetProxyForURIWrapper = getStaticMethod("getProxyForURI", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)Ljava/lang/String;");
    jGetScreenDepthWrapper = getStaticMethod("getScreenDepth", "()I");
    jGetScreenOrientationWrapper = getStaticMethod("getScreenOrientation", "()S");
    jGetShowPasswordSetting = getStaticMethod("getShowPasswordSetting", "()Z");
    jGetSystemColoursWrapper = getStaticMethod("getSystemColors", "()[I");
    jHandleGeckoMessageWrapper = getStaticMethod("handleGeckoMessage", "(Ljava/lang/String;)Ljava/lang/String;");
    jHideProgressDialog = getStaticMethod("hideProgressDialog", "()V");
    jInitCameraWrapper = getStaticMethod("initCamera", "(Ljava/lang/String;III)[I");
    jIsNetworkLinkKnown = getStaticMethod("isNetworkLinkKnown", "()Z");
    jIsNetworkLinkUp = getStaticMethod("isNetworkLinkUp", "()Z");
    jIsTablet = getStaticMethod("isTablet", "()Z");
    jKillAnyZombies = getStaticMethod("killAnyZombies", "()V");
    jLockScreenOrientation = getStaticMethod("lockScreenOrientation", "(I)V");
    jMarkURIVisited = getStaticMethod("markUriVisited", "(Ljava/lang/String;)V");
    jMoveTaskToBack = getStaticMethod("moveTaskToBack", "()V");
    jNetworkLinkType = getStaticMethod("networkLinkType", "()I");
    jNotifyDefaultPrevented = getStaticMethod("notifyDefaultPrevented", "(Z)V");
    jNotifyIME = getStaticMethod("notifyIME", "(I)V");
    jNotifyIMEChange = getStaticMethod("notifyIMEChange", "(Ljava/lang/String;III)V");
    jNotifyIMEContext = getStaticMethod("notifyIMEContext", "(ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;)V");
    jNotifyWakeLockChanged = getStaticMethod("notifyWakeLockChanged", "(Ljava/lang/String;Ljava/lang/String;)V");
    jNotifyXreExit = getStaticMethod("onXreExit", "()V");
    jOpenUriExternal = getStaticMethod("openUriExternal", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Z");
    jPerformHapticFeedback = getStaticMethod("performHapticFeedback", "(Z)V");
    jPumpMessageLoop = getStaticMethod("pumpMessageLoop", "()Z");
    jRegisterSurfaceTextureFrameListener = getStaticMethod("registerSurfaceTextureFrameListener", "(Ljava/lang/Object;I)V");
    jRemovePluginView = getStaticMethod("removePluginView", "(Landroid/view/View;Z)V");
    jScanMedia = getStaticMethod("scanMedia", "(Ljava/lang/String;Ljava/lang/String;)V");
    jScheduleRestart = getStaticMethod("scheduleRestart", "()V");
    jSendMessageWrapper = getStaticMethod("sendMessage", "(Ljava/lang/String;Ljava/lang/String;I)V");
    jSetFullScreen = getStaticMethod("setFullScreen", "(Z)V");
    jSetKeepScreenOn = getStaticMethod("setKeepScreenOn", "(Z)V");
    jSetSelectedLocale = getStaticMethod("setSelectedLocale", "(Ljava/lang/String;)V");
    jSetURITitle = getStaticMethod("setUriTitle", "(Ljava/lang/String;Ljava/lang/String;)V");
    jShowAlertNotificationWrapper = getStaticMethod("showAlertNotification", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V");
    jShowFilePickerAsyncWrapper = getStaticMethod("showFilePickerAsync", "(Ljava/lang/String;J)V");
    jShowFilePickerForExtensionsWrapper = getStaticMethod("showFilePickerForExtensions", "(Ljava/lang/String;)Ljava/lang/String;");
    jShowFilePickerForMimeTypeWrapper = getStaticMethod("showFilePickerForMimeType", "(Ljava/lang/String;)Ljava/lang/String;");
    jShowInputMethodPicker = getStaticMethod("showInputMethodPicker", "()V");
    jUnlockProfile = getStaticMethod("unlockProfile", "()Z");
    jUnlockScreenOrientation = getStaticMethod("unlockScreenOrientation", "()V");
    jUnregisterSurfaceTextureFrameListener = getStaticMethod("unregisterSurfaceTextureFrameListener", "(Ljava/lang/Object;)V");
    jVibrate1 = getStaticMethod("vibrate", "(J)V");
    jVibrateA = getStaticMethod("vibrate", "([JI)V");
}

GeckoAppShell* GeckoAppShell::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    GeckoAppShell* ret = new GeckoAppShell(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

void GeckoAppShell::AcknowledgeEvent() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jAcknowledgeEvent);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::AddPluginViewWrapper(jobject a0, jfloat a1, jfloat a2, jfloat a3, jfloat a4, bool a5) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[6];
    args[0].l = a0;
    args[1].f = a1;
    args[2].f = a2;
    args[3].f = a3;
    args[4].f = a4;
    args[5].z = a5;

    env->CallStaticVoidMethodA(mGeckoAppShellClass, jAddPluginViewWrapper, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::AlertsProgressListener_OnProgress(const nsAString& a0, int64_t a1, int64_t a2, const nsAString& a3) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[4];
    args[0].l = AndroidBridge::NewJavaString(env, a0);
    args[1].j = a1;
    args[2].j = a2;
    args[3].l = AndroidBridge::NewJavaString(env, a3);

    env->CallStaticVoidMethodA(mGeckoAppShellClass, jAlertsProgressListener_OnProgress, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::CancelVibrate() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jCancelVibrate);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::CheckURIVisited(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    env->CallStaticVoidMethod(mGeckoAppShellClass, jCheckURIVisited, j0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::ClearMessageList(int32_t a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jClearMessageList, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::CloseCamera() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jCloseCamera);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::CloseNotification(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    env->CallStaticVoidMethod(mGeckoAppShellClass, jCloseNotification, j0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::CreateMessageListWrapper(int64_t a0, int64_t a1, jobjectArray a2, int32_t a3, int32_t a4, bool a5, int32_t a6) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[7];
    args[0].j = a0;
    args[1].j = a1;
    args[2].l = a2;
    args[3].i = a3;
    args[4].i = a4;
    args[5].z = a5;
    args[6].i = a6;

    env->CallStaticVoidMethodA(mGeckoAppShellClass, jCreateMessageListWrapper, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::CreateShortcut(const nsAString& a0, const nsAString& a1, const nsAString& a2, const nsAString& a3) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(4) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[4];
    args[0].l = AndroidBridge::NewJavaString(env, a0);
    args[1].l = AndroidBridge::NewJavaString(env, a1);
    args[2].l = AndroidBridge::NewJavaString(env, a2);
    args[3].l = AndroidBridge::NewJavaString(env, a3);

    env->CallStaticVoidMethodA(mGeckoAppShellClass, jCreateShortcut, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::DeleteMessageWrapper(int32_t a0, int32_t a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jDeleteMessageWrapper, a0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::DisableBatteryNotifications() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jDisableBatteryNotifications);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::DisableNetworkNotifications() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jDisableNetworkNotifications);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::DisableScreenOrientationNotifications() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jDisableScreenOrientationNotifications);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::DisableSensor(int32_t a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jDisableSensor, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::EnableBatteryNotifications() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jEnableBatteryNotifications);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::EnableLocation(bool a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jEnableLocation, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::EnableLocationHighAccuracy(bool a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jEnableLocationHighAccuracy, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::EnableNetworkNotifications() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jEnableNetworkNotifications);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::EnableScreenOrientationNotifications() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jEnableScreenOrientationNotifications);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::EnableSensor(int32_t a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jEnableSensor, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

jobject GeckoAppShell::GetContext() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jGetContext);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobject ret = static_cast<jobject>(env->PopLocalFrame(temp));
    return ret;
}

jdoubleArray GeckoAppShell::GetCurrentBatteryInformationWrapper() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jGetCurrentBatteryInformationWrapper);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jdoubleArray ret = static_cast<jdoubleArray>(env->PopLocalFrame(temp));
    return ret;
}

jdoubleArray GeckoAppShell::GetCurrentNetworkInformationWrapper() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jGetCurrentNetworkInformationWrapper);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jdoubleArray ret = static_cast<jdoubleArray>(env->PopLocalFrame(temp));
    return ret;
}

jfloat GeckoAppShell::GetDensity() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return 0.0;
    }

    jfloat temp = env->CallStaticFloatMethod(mGeckoAppShellClass, jGetDensity);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return 0.0;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

int32_t GeckoAppShell::GetDpiWrapper() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return 0;
    }

    int32_t temp = env->CallStaticIntMethod(mGeckoAppShellClass, jGetDpiWrapper);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return 0;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

jstring GeckoAppShell::GetExtensionFromMimeTypeWrapper(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jGetExtensionFromMimeTypeWrapper, j0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jstring ret = static_cast<jstring>(env->PopLocalFrame(temp));
    return ret;
}

jobjectArray GeckoAppShell::GetHandlersForMimeTypeWrapper(const nsAString& a0, const nsAString& a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(3) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);
    jstring j1 = AndroidBridge::NewJavaString(env, a1);

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jGetHandlersForMimeTypeWrapper, j0, j1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobjectArray ret = static_cast<jobjectArray>(env->PopLocalFrame(temp));
    return ret;
}

jobjectArray GeckoAppShell::GetHandlersForURLWrapper(const nsAString& a0, const nsAString& a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(3) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);
    jstring j1 = AndroidBridge::NewJavaString(env, a1);

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jGetHandlersForURLWrapper, j0, j1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobjectArray ret = static_cast<jobjectArray>(env->PopLocalFrame(temp));
    return ret;
}

jbyteArray GeckoAppShell::GetIconForExtensionWrapper(const nsAString& a0, int32_t a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jGetIconForExtensionWrapper, j0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jbyteArray ret = static_cast<jbyteArray>(env->PopLocalFrame(temp));
    return ret;
}

void GeckoAppShell::GetMessageWrapper(int32_t a0, int32_t a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jGetMessageWrapper, a0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

jstring GeckoAppShell::GetMimeTypeFromExtensionsWrapper(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jGetMimeTypeFromExtensionsWrapper, j0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jstring ret = static_cast<jstring>(env->PopLocalFrame(temp));
    return ret;
}

void GeckoAppShell::GetNextMessageInListWrapper(int32_t a0, int32_t a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jGetNextMessageInListWrapper, a0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

jstring GeckoAppShell::GetProxyForURIWrapper(const nsAString& a0, const nsAString& a1, const nsAString& a2, int32_t a3) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(4) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jvalue args[4];
    args[0].l = AndroidBridge::NewJavaString(env, a0);
    args[1].l = AndroidBridge::NewJavaString(env, a1);
    args[2].l = AndroidBridge::NewJavaString(env, a2);
    args[3].i = a3;

    jobject temp = env->CallStaticObjectMethodA(mGeckoAppShellClass, jGetProxyForURIWrapper, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jstring ret = static_cast<jstring>(env->PopLocalFrame(temp));
    return ret;
}

int32_t GeckoAppShell::GetScreenDepthWrapper() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return 0;
    }

    int32_t temp = env->CallStaticIntMethod(mGeckoAppShellClass, jGetScreenDepthWrapper);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return 0;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

int16_t GeckoAppShell::GetScreenOrientationWrapper() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return 0;
    }

    int16_t temp = env->CallStaticShortMethod(mGeckoAppShellClass, jGetScreenOrientationWrapper);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return 0;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

bool GeckoAppShell::GetShowPasswordSetting() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return false;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return false;
    }

    bool temp = env->CallStaticBooleanMethod(mGeckoAppShellClass, jGetShowPasswordSetting);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return false;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

jintArray GeckoAppShell::GetSystemColoursWrapper() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jGetSystemColoursWrapper);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jintArray ret = static_cast<jintArray>(env->PopLocalFrame(temp));
    return ret;
}

jstring GeckoAppShell::HandleGeckoMessageWrapper(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jHandleGeckoMessageWrapper, j0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jstring ret = static_cast<jstring>(env->PopLocalFrame(temp));
    return ret;
}

void GeckoAppShell::HideProgressDialog() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jHideProgressDialog);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

jintArray GeckoAppShell::InitCameraWrapper(const nsAString& a0, int32_t a1, int32_t a2, int32_t a3) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jvalue args[4];
    args[0].l = AndroidBridge::NewJavaString(env, a0);
    args[1].i = a1;
    args[2].i = a2;
    args[3].i = a3;

    jobject temp = env->CallStaticObjectMethodA(mGeckoAppShellClass, jInitCameraWrapper, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jintArray ret = static_cast<jintArray>(env->PopLocalFrame(temp));
    return ret;
}

bool GeckoAppShell::IsNetworkLinkKnown() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return false;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return false;
    }

    bool temp = env->CallStaticBooleanMethod(mGeckoAppShellClass, jIsNetworkLinkKnown);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return false;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

bool GeckoAppShell::IsNetworkLinkUp() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return false;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return false;
    }

    bool temp = env->CallStaticBooleanMethod(mGeckoAppShellClass, jIsNetworkLinkUp);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return false;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

bool GeckoAppShell::IsTablet() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return false;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return false;
    }

    bool temp = env->CallStaticBooleanMethod(mGeckoAppShellClass, jIsTablet);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return false;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

void GeckoAppShell::KillAnyZombies() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jKillAnyZombies);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::LockScreenOrientation(int32_t a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jLockScreenOrientation, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::MarkURIVisited(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    env->CallStaticVoidMethod(mGeckoAppShellClass, jMarkURIVisited, j0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::MoveTaskToBack() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jMoveTaskToBack);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

int32_t GeckoAppShell::NetworkLinkType() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return 0;
    }

    int32_t temp = env->CallStaticIntMethod(mGeckoAppShellClass, jNetworkLinkType);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return 0;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

void GeckoAppShell::NotifyDefaultPrevented(bool a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jNotifyDefaultPrevented, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::NotifyIME(int32_t a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jNotifyIME, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::NotifyIMEChange(const nsAString& a0, int32_t a1, int32_t a2, int32_t a3) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[4];
    args[0].l = AndroidBridge::NewJavaString(env, a0);
    args[1].i = a1;
    args[2].i = a2;
    args[3].i = a3;

    env->CallStaticVoidMethodA(mGeckoAppShellClass, jNotifyIMEChange, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::NotifyIMEContext(int32_t a0, const nsAString& a1, const nsAString& a2, const nsAString& a3) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(3) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[4];
    args[0].i = a0;
    args[1].l = AndroidBridge::NewJavaString(env, a1);
    args[2].l = AndroidBridge::NewJavaString(env, a2);
    args[3].l = AndroidBridge::NewJavaString(env, a3);

    env->CallStaticVoidMethodA(mGeckoAppShellClass, jNotifyIMEContext, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::NotifyWakeLockChanged(const nsAString& a0, const nsAString& a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);
    jstring j1 = AndroidBridge::NewJavaString(env, a1);

    env->CallStaticVoidMethod(mGeckoAppShellClass, jNotifyWakeLockChanged, j0, j1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::NotifyXreExit() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jNotifyXreExit);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

bool GeckoAppShell::OpenUriExternal(const nsAString& a0, const nsAString& a1, const nsAString& a2, const nsAString& a3, const nsAString& a4, const nsAString& a5) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return false;
    }

    if (env->PushLocalFrame(6) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return false;
    }

    jvalue args[6];
    args[0].l = AndroidBridge::NewJavaString(env, a0);
    args[1].l = AndroidBridge::NewJavaString(env, a1);
    args[2].l = AndroidBridge::NewJavaString(env, a2);
    args[3].l = AndroidBridge::NewJavaString(env, a3);
    args[4].l = AndroidBridge::NewJavaString(env, a4);
    args[5].l = AndroidBridge::NewJavaString(env, a5);

    bool temp = env->CallStaticBooleanMethodA(mGeckoAppShellClass, jOpenUriExternal, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return false;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

void GeckoAppShell::PerformHapticFeedback(bool a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jPerformHapticFeedback, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

bool GeckoAppShell::PumpMessageLoop() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return false;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return false;
    }

    bool temp = env->CallStaticBooleanMethod(mGeckoAppShellClass, jPumpMessageLoop);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return false;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

void GeckoAppShell::RegisterSurfaceTextureFrameListener(jobject a0, int32_t a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jRegisterSurfaceTextureFrameListener, a0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::RemovePluginView(jobject a0, bool a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jRemovePluginView, a0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::ScanMedia(const nsAString& a0, const nsAString& a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);
    jstring j1 = AndroidBridge::NewJavaString(env, a1);

    env->CallStaticVoidMethod(mGeckoAppShellClass, jScanMedia, j0, j1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::ScheduleRestart() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jScheduleRestart);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::SendMessageWrapper(const nsAString& a0, const nsAString& a1, int32_t a2) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[3];
    args[0].l = AndroidBridge::NewJavaString(env, a0);
    args[1].l = AndroidBridge::NewJavaString(env, a1);
    args[2].i = a2;

    env->CallStaticVoidMethodA(mGeckoAppShellClass, jSendMessageWrapper, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::SetFullScreen(bool a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jSetFullScreen, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::SetKeepScreenOn(bool a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jSetKeepScreenOn, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::SetSelectedLocale(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    env->CallStaticVoidMethod(mGeckoAppShellClass, jSetSelectedLocale, j0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::SetURITitle(const nsAString& a0, const nsAString& a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);
    jstring j1 = AndroidBridge::NewJavaString(env, a1);

    env->CallStaticVoidMethod(mGeckoAppShellClass, jSetURITitle, j0, j1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::ShowAlertNotificationWrapper(const nsAString& a0, const nsAString& a1, const nsAString& a2, const nsAString& a3, const nsAString& a4) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(5) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[5];
    args[0].l = AndroidBridge::NewJavaString(env, a0);
    args[1].l = AndroidBridge::NewJavaString(env, a1);
    args[2].l = AndroidBridge::NewJavaString(env, a2);
    args[3].l = AndroidBridge::NewJavaString(env, a3);
    args[4].l = AndroidBridge::NewJavaString(env, a4);

    env->CallStaticVoidMethodA(mGeckoAppShellClass, jShowAlertNotificationWrapper, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::ShowFilePickerAsyncWrapper(const nsAString& a0, int64_t a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    env->CallStaticVoidMethod(mGeckoAppShellClass, jShowFilePickerAsyncWrapper, j0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

jstring GeckoAppShell::ShowFilePickerForExtensionsWrapper(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jShowFilePickerForExtensionsWrapper, j0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jstring ret = static_cast<jstring>(env->PopLocalFrame(temp));
    return ret;
}

jstring GeckoAppShell::ShowFilePickerForMimeTypeWrapper(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    jobject temp = env->CallStaticObjectMethod(mGeckoAppShellClass, jShowFilePickerForMimeTypeWrapper, j0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jstring ret = static_cast<jstring>(env->PopLocalFrame(temp));
    return ret;
}

void GeckoAppShell::ShowInputMethodPicker() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jShowInputMethodPicker);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

bool GeckoAppShell::UnlockProfile() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return false;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return false;
    }

    bool temp = env->CallStaticBooleanMethod(mGeckoAppShellClass, jUnlockProfile);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return false;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

void GeckoAppShell::UnlockScreenOrientation() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jUnlockScreenOrientation);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::UnregisterSurfaceTextureFrameListener(jobject a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jUnregisterSurfaceTextureFrameListener, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::Vibrate1(int64_t a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jVibrate1, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoAppShell::VibrateA(jlongArray a0, int32_t a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoAppShellClass, jVibrateA, a0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}
jclass JavaDomKeyLocation::mDomKeyLocationClass = 0;
jmethodID JavaDomKeyLocation::jvalueOf = 0;
jmethodID JavaDomKeyLocation::jvalues = 0;
jfieldID JavaDomKeyLocation::jDOM_KEY_LOCATION_JOYSTICK = 0;
jfieldID JavaDomKeyLocation::jDOM_KEY_LOCATION_LEFT = 0;
jfieldID JavaDomKeyLocation::jDOM_KEY_LOCATION_MOBILE = 0;
jfieldID JavaDomKeyLocation::jDOM_KEY_LOCATION_NUMPAD = 0;
jfieldID JavaDomKeyLocation::jDOM_KEY_LOCATION_RIGHT = 0;
jfieldID JavaDomKeyLocation::jDOM_KEY_LOCATION_STANDARD = 0;
jfieldID JavaDomKeyLocation::jvalue = 0;
void JavaDomKeyLocation::InitStubs(JNIEnv *jEnv) {
    initInit();

    mDomKeyLocationClass = getClassGlobalRef("org/mozilla/gecko/GeckoEvent$DomKeyLocation");
    jvalueOf = getStaticMethod("valueOf", "(Ljava/lang/String;)Lorg/mozilla/gecko/GeckoEvent$DomKeyLocation;");
    jvalues = getStaticMethod("values", "()[Lorg/mozilla/gecko/GeckoEvent$DomKeyLocation;");
    jDOM_KEY_LOCATION_JOYSTICK = getStaticField("DOM_KEY_LOCATION_JOYSTICK", "Lorg/mozilla/gecko/GeckoEvent$DomKeyLocation;");
    jDOM_KEY_LOCATION_LEFT = getStaticField("DOM_KEY_LOCATION_LEFT", "Lorg/mozilla/gecko/GeckoEvent$DomKeyLocation;");
    jDOM_KEY_LOCATION_MOBILE = getStaticField("DOM_KEY_LOCATION_MOBILE", "Lorg/mozilla/gecko/GeckoEvent$DomKeyLocation;");
    jDOM_KEY_LOCATION_NUMPAD = getStaticField("DOM_KEY_LOCATION_NUMPAD", "Lorg/mozilla/gecko/GeckoEvent$DomKeyLocation;");
    jDOM_KEY_LOCATION_RIGHT = getStaticField("DOM_KEY_LOCATION_RIGHT", "Lorg/mozilla/gecko/GeckoEvent$DomKeyLocation;");
    jDOM_KEY_LOCATION_STANDARD = getStaticField("DOM_KEY_LOCATION_STANDARD", "Lorg/mozilla/gecko/GeckoEvent$DomKeyLocation;");
    jvalue = getField("value", "I");
}

JavaDomKeyLocation* JavaDomKeyLocation::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    JavaDomKeyLocation* ret = new JavaDomKeyLocation(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

jobject JavaDomKeyLocation::valueOf(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    jobject temp = env->CallStaticObjectMethod(mDomKeyLocationClass, jvalueOf, j0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobject ret = static_cast<jobject>(env->PopLocalFrame(temp));
    return ret;
}

jobjectArray JavaDomKeyLocation::values() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jobject temp = env->CallStaticObjectMethod(mDomKeyLocationClass, jvalues);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobjectArray ret = static_cast<jobjectArray>(env->PopLocalFrame(temp));
    return ret;
}

jobject JavaDomKeyLocation::getDOM_KEY_LOCATION_JOYSTICK() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    return static_cast<jobject>(env->GetStaticObjectField(mDomKeyLocationClass, jDOM_KEY_LOCATION_JOYSTICK));
}

jobject JavaDomKeyLocation::getDOM_KEY_LOCATION_LEFT() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    return static_cast<jobject>(env->GetStaticObjectField(mDomKeyLocationClass, jDOM_KEY_LOCATION_LEFT));
}

jobject JavaDomKeyLocation::getDOM_KEY_LOCATION_MOBILE() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    return static_cast<jobject>(env->GetStaticObjectField(mDomKeyLocationClass, jDOM_KEY_LOCATION_MOBILE));
}

jobject JavaDomKeyLocation::getDOM_KEY_LOCATION_NUMPAD() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    return static_cast<jobject>(env->GetStaticObjectField(mDomKeyLocationClass, jDOM_KEY_LOCATION_NUMPAD));
}

jobject JavaDomKeyLocation::getDOM_KEY_LOCATION_RIGHT() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    return static_cast<jobject>(env->GetStaticObjectField(mDomKeyLocationClass, jDOM_KEY_LOCATION_RIGHT));
}

jobject JavaDomKeyLocation::getDOM_KEY_LOCATION_STANDARD() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    return static_cast<jobject>(env->GetStaticObjectField(mDomKeyLocationClass, jDOM_KEY_LOCATION_STANDARD));
}

int32_t JavaDomKeyLocation::getvalue() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0;
    }

    return env->GetIntField(wrapped_obj, jvalue);
}
jclass GeckoJavaSampler::mGeckoJavaSamplerClass = 0;
jmethodID GeckoJavaSampler::jGetFrameNameJavaProfilingWrapper = 0;
jmethodID GeckoJavaSampler::jGetSampleTimeJavaProfiling = 0;
jmethodID GeckoJavaSampler::jGetThreadNameJavaProfilingWrapper = 0;
jmethodID GeckoJavaSampler::jPauseJavaProfiling = 0;
jmethodID GeckoJavaSampler::jStartJavaProfiling = 0;
jmethodID GeckoJavaSampler::jStopJavaProfiling = 0;
jmethodID GeckoJavaSampler::jUnpauseJavaProfiling = 0;
void GeckoJavaSampler::InitStubs(JNIEnv *jEnv) {
    initInit();

    mGeckoJavaSamplerClass = getClassGlobalRef("org/mozilla/gecko/GeckoJavaSampler");
    jGetFrameNameJavaProfilingWrapper = getStaticMethod("getFrameName", "(III)Ljava/lang/String;");
    jGetSampleTimeJavaProfiling = getStaticMethod("getSampleTime", "(II)D");
    jGetThreadNameJavaProfilingWrapper = getStaticMethod("getThreadName", "(I)Ljava/lang/String;");
    jPauseJavaProfiling = getStaticMethod("pause", "()V");
    jStartJavaProfiling = getStaticMethod("start", "(II)V");
    jStopJavaProfiling = getStaticMethod("stop", "()V");
    jUnpauseJavaProfiling = getStaticMethod("unpause", "()V");
}

GeckoJavaSampler* GeckoJavaSampler::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    GeckoJavaSampler* ret = new GeckoJavaSampler(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

jstring GeckoJavaSampler::GetFrameNameJavaProfilingWrapper(int32_t a0, int32_t a1, int32_t a2) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jvalue args[3];
    args[0].i = a0;
    args[1].i = a1;
    args[2].i = a2;

    jobject temp = env->CallStaticObjectMethodA(mGeckoJavaSamplerClass, jGetFrameNameJavaProfilingWrapper, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jstring ret = static_cast<jstring>(env->PopLocalFrame(temp));
    return ret;
}

jdouble GeckoJavaSampler::GetSampleTimeJavaProfiling(int32_t a0, int32_t a1) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return 0.0;
    }

    jdouble temp = env->CallStaticDoubleMethod(mGeckoJavaSamplerClass, jGetSampleTimeJavaProfiling, a0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return 0.0;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

jstring GeckoJavaSampler::GetThreadNameJavaProfilingWrapper(int32_t a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jobject temp = env->CallStaticObjectMethod(mGeckoJavaSamplerClass, jGetThreadNameJavaProfilingWrapper, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jstring ret = static_cast<jstring>(env->PopLocalFrame(temp));
    return ret;
}

void GeckoJavaSampler::PauseJavaProfiling() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoJavaSamplerClass, jPauseJavaProfiling);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoJavaSampler::StartJavaProfiling(int32_t a0, int32_t a1) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoJavaSamplerClass, jStartJavaProfiling, a0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoJavaSampler::StopJavaProfiling() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoJavaSamplerClass, jStopJavaProfiling);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoJavaSampler::UnpauseJavaProfiling() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mGeckoJavaSamplerClass, jUnpauseJavaProfiling);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}
jclass SurfaceBits::mSurfaceBitsClass = 0;
jmethodID SurfaceBits::jSurfaceBits = 0;
jfieldID SurfaceBits::jbuffer = 0;
jfieldID SurfaceBits::jformat = 0;
jfieldID SurfaceBits::jheight = 0;
jfieldID SurfaceBits::jwidth = 0;
void SurfaceBits::InitStubs(JNIEnv *jEnv) {
    initInit();

    mSurfaceBitsClass = getClassGlobalRef("org/mozilla/gecko/SurfaceBits");
    jSurfaceBits = getMethod("<init>", "()V");
    jbuffer = getField("buffer", "Ljava/nio/ByteBuffer;");
    jformat = getField("format", "I");
    jheight = getField("height", "I");
    jwidth = getField("width", "I");
}

SurfaceBits* SurfaceBits::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    SurfaceBits* ret = new SurfaceBits(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

SurfaceBits::SurfaceBits() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    Init(env->NewObject(mSurfaceBitsClass, jSurfaceBits), env);
    env->PopLocalFrame(NULL);
}

jobject SurfaceBits::getbuffer() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    return static_cast<jobject>(env->GetObjectField(wrapped_obj, jbuffer));
}

void SurfaceBits::setbuffer(jobject a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetObjectField(wrapped_obj, jbuffer, a0);
}

int32_t SurfaceBits::getformat() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0;
    }

    return env->GetIntField(wrapped_obj, jformat);
}

void SurfaceBits::setformat(int32_t a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetIntField(wrapped_obj, jformat, a0);
}

int32_t SurfaceBits::getheight() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0;
    }

    return env->GetIntField(wrapped_obj, jheight);
}

void SurfaceBits::setheight(int32_t a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetIntField(wrapped_obj, jheight, a0);
}

int32_t SurfaceBits::getwidth() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0;
    }

    return env->GetIntField(wrapped_obj, jwidth);
}

void SurfaceBits::setwidth(int32_t a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetIntField(wrapped_obj, jwidth, a0);
}
jclass ThumbnailHelper::mThumbnailHelperClass = 0;
jmethodID ThumbnailHelper::jSendThumbnail = 0;
void ThumbnailHelper::InitStubs(JNIEnv *jEnv) {
    initInit();

    mThumbnailHelperClass = getClassGlobalRef("org/mozilla/gecko/ThumbnailHelper");
    jSendThumbnail = getStaticMethod("notifyThumbnail", "(Ljava/nio/ByteBuffer;IZ)V");
}

ThumbnailHelper* ThumbnailHelper::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    ThumbnailHelper* ret = new ThumbnailHelper(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

void ThumbnailHelper::SendThumbnail(jobject a0, int32_t a1, bool a2) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[3];
    args[0].l = a0;
    args[1].i = a1;
    args[2].z = a2;

    env->CallStaticVoidMethodA(mThumbnailHelperClass, jSendThumbnail, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}
jclass DisplayPortMetrics::mDisplayPortMetricsClass = 0;
jmethodID DisplayPortMetrics::jDisplayPortMetrics = 0;
jfieldID DisplayPortMetrics::jMPosition = 0;
jfieldID DisplayPortMetrics::jResolution = 0;
void DisplayPortMetrics::InitStubs(JNIEnv *jEnv) {
    initInit();

    mDisplayPortMetricsClass = getClassGlobalRef("org/mozilla/gecko/gfx/DisplayPortMetrics");
    jDisplayPortMetrics = getMethod("<init>", "(FFFFF)V");
    jMPosition = getField("mPosition", "Landroid/graphics/RectF;");
    jResolution = getField("resolution", "F");
}

DisplayPortMetrics* DisplayPortMetrics::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    DisplayPortMetrics* ret = new DisplayPortMetrics(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

DisplayPortMetrics::DisplayPortMetrics(jfloat a0, jfloat a1, jfloat a2, jfloat a3, jfloat a4) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[5];
    args[0].f = a0;
    args[1].f = a1;
    args[2].f = a2;
    args[3].f = a3;
    args[4].f = a4;

    Init(env->NewObjectA(mDisplayPortMetricsClass, jDisplayPortMetrics, args), env);
    env->PopLocalFrame(NULL);
}

jobject DisplayPortMetrics::getMPosition() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    return static_cast<jobject>(env->GetObjectField(wrapped_obj, jMPosition));
}

jfloat DisplayPortMetrics::getResolution() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jResolution);
}
jclass GLController::mGLControllerClass = 0;
jmethodID GLController::jCreateEGLSurfaceForCompositorWrapper = 0;
void GLController::InitStubs(JNIEnv *jEnv) {
    initInit();

    mGLControllerClass = getClassGlobalRef("org/mozilla/gecko/gfx/GLController");
    jCreateEGLSurfaceForCompositorWrapper = getMethod("createEGLSurfaceForCompositor", "()Ljavax/microedition/khronos/egl/EGLSurface;");
}

GLController* GLController::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    GLController* ret = new GLController(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

jobject GLController::CreateEGLSurfaceForCompositorWrapper() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jobject temp = env->CallObjectMethod(wrapped_obj, jCreateEGLSurfaceForCompositorWrapper);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobject ret = static_cast<jobject>(env->PopLocalFrame(temp));
    return ret;
}
jclass GeckoLayerClient::mGeckoLayerClientClass = 0;
jmethodID GeckoLayerClient::jActivateProgram = 0;
jmethodID GeckoLayerClient::jContentDocumentChanged = 0;
jmethodID GeckoLayerClient::jCreateFrame = 0;
jmethodID GeckoLayerClient::jDeactivateProgram = 0;
jmethodID GeckoLayerClient::jGetDisplayPort = 0;
jmethodID GeckoLayerClient::jIsContentDocumentDisplayed = 0;
jmethodID GeckoLayerClient::jProgressiveUpdateCallback = 0;
jmethodID GeckoLayerClient::jSetFirstPaintViewport = 0;
jmethodID GeckoLayerClient::jSetPageRect = 0;
jmethodID GeckoLayerClient::jSyncFrameMetrics = 0;
jmethodID GeckoLayerClient::jSyncViewportInfo = 0;
void GeckoLayerClient::InitStubs(JNIEnv *jEnv) {
    initInit();

    mGeckoLayerClientClass = getClassGlobalRef("org/mozilla/gecko/gfx/GeckoLayerClient");
    jActivateProgram = getMethod("activateProgram", "()V");
    jContentDocumentChanged = getMethod("contentDocumentChanged", "()V");
    jCreateFrame = getMethod("createFrame", "()Lorg/mozilla/gecko/gfx/LayerRenderer$Frame;");
    jDeactivateProgram = getMethod("deactivateProgram", "()V");
    jGetDisplayPort = getMethod("getDisplayPort", "(ZZILorg/mozilla/gecko/gfx/ImmutableViewportMetrics;)Lorg/mozilla/gecko/gfx/DisplayPortMetrics;");
    jIsContentDocumentDisplayed = getMethod("isContentDocumentDisplayed", "()Z");
    jProgressiveUpdateCallback = getMethod("progressiveUpdateCallback", "(ZFFFFFZ)Lorg/mozilla/gecko/gfx/ProgressiveUpdateData;");
    jSetFirstPaintViewport = getMethod("setFirstPaintViewport", "(FFFFFFF)V");
    jSetPageRect = getMethod("setPageRect", "(FFFF)V");
    jSyncFrameMetrics = getMethod("syncFrameMetrics", "(FFFFFFFZIIIIFZ)Lorg/mozilla/gecko/gfx/ViewTransform;");
    jSyncViewportInfo = getMethod("syncViewportInfo", "(IIIIFZ)Lorg/mozilla/gecko/gfx/ViewTransform;");
}

GeckoLayerClient* GeckoLayerClient::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    GeckoLayerClient* ret = new GeckoLayerClient(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

void GeckoLayerClient::ActivateProgram() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallVoidMethod(wrapped_obj, jActivateProgram);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoLayerClient::ContentDocumentChanged() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallVoidMethod(wrapped_obj, jContentDocumentChanged);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

jobject GeckoLayerClient::CreateFrame() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jobject temp = env->CallObjectMethod(wrapped_obj, jCreateFrame);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobject ret = static_cast<jobject>(env->PopLocalFrame(temp));
    return ret;
}

void GeckoLayerClient::DeactivateProgram() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallVoidMethod(wrapped_obj, jDeactivateProgram);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

jobject GeckoLayerClient::GetDisplayPort(bool a0, bool a1, int32_t a2, jobject a3) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jvalue args[4];
    args[0].z = a0;
    args[1].z = a1;
    args[2].i = a2;
    args[3].l = a3;

    jobject temp = env->CallObjectMethodA(wrapped_obj, jGetDisplayPort, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobject ret = static_cast<jobject>(env->PopLocalFrame(temp));
    return ret;
}

bool GeckoLayerClient::IsContentDocumentDisplayed() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return false;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return false;
    }

    bool temp = env->CallBooleanMethod(wrapped_obj, jIsContentDocumentDisplayed);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return false;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

jobject GeckoLayerClient::ProgressiveUpdateCallback(bool a0, jfloat a1, jfloat a2, jfloat a3, jfloat a4, jfloat a5, bool a6) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jvalue args[7];
    args[0].z = a0;
    args[1].f = a1;
    args[2].f = a2;
    args[3].f = a3;
    args[4].f = a4;
    args[5].f = a5;
    args[6].z = a6;

    jobject temp = env->CallObjectMethodA(wrapped_obj, jProgressiveUpdateCallback, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobject ret = static_cast<jobject>(env->PopLocalFrame(temp));
    return ret;
}

void GeckoLayerClient::SetFirstPaintViewport(jfloat a0, jfloat a1, jfloat a2, jfloat a3, jfloat a4, jfloat a5, jfloat a6) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[7];
    args[0].f = a0;
    args[1].f = a1;
    args[2].f = a2;
    args[3].f = a3;
    args[4].f = a4;
    args[5].f = a5;
    args[6].f = a6;

    env->CallVoidMethodA(wrapped_obj, jSetFirstPaintViewport, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void GeckoLayerClient::SetPageRect(jfloat a0, jfloat a1, jfloat a2, jfloat a3) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[4];
    args[0].f = a0;
    args[1].f = a1;
    args[2].f = a2;
    args[3].f = a3;

    env->CallVoidMethodA(wrapped_obj, jSetPageRect, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

jobject GeckoLayerClient::SyncFrameMetrics(jfloat a0, jfloat a1, jfloat a2, jfloat a3, jfloat a4, jfloat a5, jfloat a6, bool a7, int32_t a8, int32_t a9, int32_t a10, int32_t a11, jfloat a12, bool a13) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jvalue args[14];
    args[0].f = a0;
    args[1].f = a1;
    args[2].f = a2;
    args[3].f = a3;
    args[4].f = a4;
    args[5].f = a5;
    args[6].f = a6;
    args[7].z = a7;
    args[8].i = a8;
    args[9].i = a9;
    args[10].i = a10;
    args[11].i = a11;
    args[12].f = a12;
    args[13].z = a13;

    jobject temp = env->CallObjectMethodA(wrapped_obj, jSyncFrameMetrics, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobject ret = static_cast<jobject>(env->PopLocalFrame(temp));
    return ret;
}

jobject GeckoLayerClient::SyncViewportInfo(int32_t a0, int32_t a1, int32_t a2, int32_t a3, jfloat a4, bool a5) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jvalue args[6];
    args[0].i = a0;
    args[1].i = a1;
    args[2].i = a2;
    args[3].i = a3;
    args[4].f = a4;
    args[5].z = a5;

    jobject temp = env->CallObjectMethodA(wrapped_obj, jSyncViewportInfo, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobject ret = static_cast<jobject>(env->PopLocalFrame(temp));
    return ret;
}
jclass ImmutableViewportMetrics::mImmutableViewportMetricsClass = 0;
jmethodID ImmutableViewportMetrics::jImmutableViewportMetrics = 0;
void ImmutableViewportMetrics::InitStubs(JNIEnv *jEnv) {
    initInit();

    mImmutableViewportMetricsClass = getClassGlobalRef("org/mozilla/gecko/gfx/ImmutableViewportMetrics");
    jImmutableViewportMetrics = getMethod("<init>", "(FFFFFFFFFFFFF)V");
}

ImmutableViewportMetrics* ImmutableViewportMetrics::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    ImmutableViewportMetrics* ret = new ImmutableViewportMetrics(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

ImmutableViewportMetrics::ImmutableViewportMetrics(jfloat a0, jfloat a1, jfloat a2, jfloat a3, jfloat a4, jfloat a5, jfloat a6, jfloat a7, jfloat a8, jfloat a9, jfloat a10, jfloat a11, jfloat a12) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[13];
    args[0].f = a0;
    args[1].f = a1;
    args[2].f = a2;
    args[3].f = a3;
    args[4].f = a4;
    args[5].f = a5;
    args[6].f = a6;
    args[7].f = a7;
    args[8].f = a8;
    args[9].f = a9;
    args[10].f = a10;
    args[11].f = a11;
    args[12].f = a12;

    Init(env->NewObjectA(mImmutableViewportMetricsClass, jImmutableViewportMetrics, args), env);
    env->PopLocalFrame(NULL);
}
jclass LayerView::mLayerViewClass = 0;
jmethodID LayerView::jRegisterCompositorWrapper = 0;
void LayerView::InitStubs(JNIEnv *jEnv) {
    initInit();

    mLayerViewClass = getClassGlobalRef("org/mozilla/gecko/gfx/LayerView");
    jRegisterCompositorWrapper = getStaticMethod("registerCxxCompositor", "()Lorg/mozilla/gecko/gfx/GLController;");
}

LayerView* LayerView::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    LayerView* ret = new LayerView(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

jobject LayerView::RegisterCompositorWrapper() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jobject temp = env->CallStaticObjectMethod(mLayerViewClass, jRegisterCompositorWrapper);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobject ret = static_cast<jobject>(env->PopLocalFrame(temp));
    return ret;
}
jclass NativePanZoomController::mNativePanZoomControllerClass = 0;
jmethodID NativePanZoomController::jPostDelayedCallbackWrapper = 0;
jmethodID NativePanZoomController::jRequestContentRepaintWrapper = 0;
void NativePanZoomController::InitStubs(JNIEnv *jEnv) {
    initInit();

    mNativePanZoomControllerClass = getClassGlobalRef("org/mozilla/gecko/gfx/NativePanZoomController");
    jPostDelayedCallbackWrapper = getMethod("postDelayedCallback", "(J)V");
    jRequestContentRepaintWrapper = getMethod("requestContentRepaint", "(FFFFF)V");
}

NativePanZoomController* NativePanZoomController::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    NativePanZoomController* ret = new NativePanZoomController(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

void NativePanZoomController::PostDelayedCallbackWrapper(int64_t a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallVoidMethod(wrapped_obj, jPostDelayedCallbackWrapper, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void NativePanZoomController::RequestContentRepaintWrapper(jfloat a0, jfloat a1, jfloat a2, jfloat a3, jfloat a4) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[5];
    args[0].f = a0;
    args[1].f = a1;
    args[2].f = a2;
    args[3].f = a3;
    args[4].f = a4;

    env->CallVoidMethodA(wrapped_obj, jRequestContentRepaintWrapper, args);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}
jclass ProgressiveUpdateData::mProgressiveUpdateDataClass = 0;
jmethodID ProgressiveUpdateData::jProgressiveUpdateData = 0;
jmethodID ProgressiveUpdateData::jsetViewport = 0;
jfieldID ProgressiveUpdateData::jabort = 0;
jfieldID ProgressiveUpdateData::jheight = 0;
jfieldID ProgressiveUpdateData::jscale = 0;
jfieldID ProgressiveUpdateData::jwidth = 0;
jfieldID ProgressiveUpdateData::jx = 0;
jfieldID ProgressiveUpdateData::jy = 0;
void ProgressiveUpdateData::InitStubs(JNIEnv *jEnv) {
    initInit();

    mProgressiveUpdateDataClass = getClassGlobalRef("org/mozilla/gecko/gfx/ProgressiveUpdateData");
    jProgressiveUpdateData = getMethod("<init>", "()V");
    jsetViewport = getMethod("setViewport", "(Lorg/mozilla/gecko/gfx/ImmutableViewportMetrics;)V");
    jabort = getField("abort", "Z");
    jheight = getField("height", "F");
    jscale = getField("scale", "F");
    jwidth = getField("width", "F");
    jx = getField("x", "F");
    jy = getField("y", "F");
}

ProgressiveUpdateData* ProgressiveUpdateData::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    ProgressiveUpdateData* ret = new ProgressiveUpdateData(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

ProgressiveUpdateData::ProgressiveUpdateData() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    Init(env->NewObject(mProgressiveUpdateDataClass, jProgressiveUpdateData), env);
    env->PopLocalFrame(NULL);
}

void ProgressiveUpdateData::setViewport(jobject a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallVoidMethod(wrapped_obj, jsetViewport, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

bool ProgressiveUpdateData::getabort() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return false;
    }

    return env->GetBooleanField(wrapped_obj, jabort);
}

void ProgressiveUpdateData::setabort(bool a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetBooleanField(wrapped_obj, jabort, a0);
}

jfloat ProgressiveUpdateData::getheight() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jheight);
}

void ProgressiveUpdateData::setheight(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jheight, a0);
}

jfloat ProgressiveUpdateData::getscale() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jscale);
}

void ProgressiveUpdateData::setscale(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jscale, a0);
}

jfloat ProgressiveUpdateData::getwidth() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jwidth);
}

void ProgressiveUpdateData::setwidth(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jwidth, a0);
}

jfloat ProgressiveUpdateData::getx() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jx);
}

void ProgressiveUpdateData::setx(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jx, a0);
}

jfloat ProgressiveUpdateData::gety() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jy);
}

void ProgressiveUpdateData::sety(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jy, a0);
}
jclass ViewTransform::mViewTransformClass = 0;
jmethodID ViewTransform::jViewTransform = 0;
jfieldID ViewTransform::jfixedLayerMarginBottom = 0;
jfieldID ViewTransform::jfixedLayerMarginLeft = 0;
jfieldID ViewTransform::jfixedLayerMarginRight = 0;
jfieldID ViewTransform::jfixedLayerMarginTop = 0;
jfieldID ViewTransform::joffsetX = 0;
jfieldID ViewTransform::joffsetY = 0;
jfieldID ViewTransform::jscale = 0;
jfieldID ViewTransform::jx = 0;
jfieldID ViewTransform::jy = 0;
void ViewTransform::InitStubs(JNIEnv *jEnv) {
    initInit();

    mViewTransformClass = getClassGlobalRef("org/mozilla/gecko/gfx/ViewTransform");
    jViewTransform = getMethod("<init>", "(FFF)V");
    jfixedLayerMarginBottom = getField("fixedLayerMarginBottom", "F");
    jfixedLayerMarginLeft = getField("fixedLayerMarginLeft", "F");
    jfixedLayerMarginRight = getField("fixedLayerMarginRight", "F");
    jfixedLayerMarginTop = getField("fixedLayerMarginTop", "F");
    joffsetX = getField("offsetX", "F");
    joffsetY = getField("offsetY", "F");
    jscale = getField("scale", "F");
    jx = getField("x", "F");
    jy = getField("y", "F");
}

ViewTransform* ViewTransform::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    ViewTransform* ret = new ViewTransform(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

ViewTransform::ViewTransform(jfloat a0, jfloat a1, jfloat a2) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jvalue args[3];
    args[0].f = a0;
    args[1].f = a1;
    args[2].f = a2;

    Init(env->NewObjectA(mViewTransformClass, jViewTransform, args), env);
    env->PopLocalFrame(NULL);
}

jfloat ViewTransform::getfixedLayerMarginBottom() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jfixedLayerMarginBottom);
}

void ViewTransform::setfixedLayerMarginBottom(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jfixedLayerMarginBottom, a0);
}

jfloat ViewTransform::getfixedLayerMarginLeft() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jfixedLayerMarginLeft);
}

void ViewTransform::setfixedLayerMarginLeft(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jfixedLayerMarginLeft, a0);
}

jfloat ViewTransform::getfixedLayerMarginRight() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jfixedLayerMarginRight);
}

void ViewTransform::setfixedLayerMarginRight(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jfixedLayerMarginRight, a0);
}

jfloat ViewTransform::getfixedLayerMarginTop() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jfixedLayerMarginTop);
}

void ViewTransform::setfixedLayerMarginTop(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jfixedLayerMarginTop, a0);
}

jfloat ViewTransform::getoffsetX() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, joffsetX);
}

void ViewTransform::setoffsetX(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, joffsetX, a0);
}

jfloat ViewTransform::getoffsetY() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, joffsetY);
}

void ViewTransform::setoffsetY(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, joffsetY, a0);
}

jfloat ViewTransform::getscale() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jscale);
}

void ViewTransform::setscale(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jscale, a0);
}

jfloat ViewTransform::getx() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jx);
}

void ViewTransform::setx(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jx, a0);
}

jfloat ViewTransform::gety() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0.0;
    }

    return env->GetFloatField(wrapped_obj, jy);
}

void ViewTransform::sety(jfloat a0) {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    env->SetFloatField(wrapped_obj, jy, a0);
}
jclass NativeZip::mNativeZipClass = 0;
jmethodID NativeZip::jCreateInputStream = 0;
void NativeZip::InitStubs(JNIEnv *jEnv) {
    initInit();

    mNativeZipClass = getClassGlobalRef("org/mozilla/gecko/mozglue/NativeZip");
    jCreateInputStream = getMethod("createInputStream", "(Ljava/nio/ByteBuffer;I)Ljava/io/InputStream;");
}

NativeZip* NativeZip::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    NativeZip* ret = new NativeZip(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

jobject NativeZip::CreateInputStream(jobject a0, int32_t a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(2) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jobject temp = env->CallObjectMethod(wrapped_obj, jCreateInputStream, a0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jobject ret = static_cast<jobject>(env->PopLocalFrame(temp));
    return ret;
}
jclass MatrixBlobCursor::mMatrixBlobCursorClass = 0;
jmethodID MatrixBlobCursor::jMatrixBlobCursor = 0;
jmethodID MatrixBlobCursor::jMatrixBlobCursor0 = 0;
jmethodID MatrixBlobCursor::jAddRow = 0;
jmethodID MatrixBlobCursor::jAddRow1 = 0;
jmethodID MatrixBlobCursor::jAddRow2 = 0;
void MatrixBlobCursor::InitStubs(JNIEnv *jEnv) {
    initInit();

    mMatrixBlobCursorClass = getClassGlobalRef("org/mozilla/gecko/sqlite/MatrixBlobCursor");
    jMatrixBlobCursor = getMethod("<init>", "([Ljava/lang/String;)V");
    jMatrixBlobCursor0 = getMethod("<init>", "([Ljava/lang/String;I)V");
    jAddRow = getMethod("addRow", "(Ljava/lang/Iterable;)V");
    jAddRow1 = getMethod("addRow", "(Ljava/util/ArrayList;I)V");
    jAddRow2 = getMethod("addRow", "([Ljava/lang/Object;)V");
}

MatrixBlobCursor* MatrixBlobCursor::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    MatrixBlobCursor* ret = new MatrixBlobCursor(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

MatrixBlobCursor::MatrixBlobCursor(jobjectArray a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    Init(env->NewObject(mMatrixBlobCursorClass, jMatrixBlobCursor, a0), env);
    env->PopLocalFrame(NULL);
}

MatrixBlobCursor::MatrixBlobCursor(jobjectArray a0, int32_t a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    Init(env->NewObject(mMatrixBlobCursorClass, jMatrixBlobCursor0, a0, a1), env);
    env->PopLocalFrame(NULL);
}

void MatrixBlobCursor::AddRow(jobject a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallVoidMethod(wrapped_obj, jAddRow, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void MatrixBlobCursor::AddRow(jobject a0, int32_t a1) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallVoidMethod(wrapped_obj, jAddRow1, a0, a1);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void MatrixBlobCursor::AddRow(jobjectArray a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallVoidMethod(wrapped_obj, jAddRow2, a0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}
jclass SQLiteBridgeException::mSQLiteBridgeExceptionClass = 0;
jmethodID SQLiteBridgeException::jSQLiteBridgeException = 0;
jmethodID SQLiteBridgeException::jSQLiteBridgeException0 = 0;
jfieldID SQLiteBridgeException::jserialVersionUID = 0;
void SQLiteBridgeException::InitStubs(JNIEnv *jEnv) {
    initInit();

    mSQLiteBridgeExceptionClass = getClassGlobalRef("org/mozilla/gecko/sqlite/SQLiteBridgeException");
    jSQLiteBridgeException = getMethod("<init>", "()V");
    jSQLiteBridgeException0 = getMethod("<init>", "(Ljava/lang/String;)V");
    jserialVersionUID = getStaticField("serialVersionUID", "J");
}

SQLiteBridgeException* SQLiteBridgeException::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    SQLiteBridgeException* ret = new SQLiteBridgeException(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

SQLiteBridgeException::SQLiteBridgeException() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    Init(env->NewObject(mSQLiteBridgeExceptionClass, jSQLiteBridgeException), env);
    env->PopLocalFrame(NULL);
}

SQLiteBridgeException::SQLiteBridgeException(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    Init(env->NewObject(mSQLiteBridgeExceptionClass, jSQLiteBridgeException0, j0), env);
    env->PopLocalFrame(NULL);
}

int64_t SQLiteBridgeException::getserialVersionUID() {
    JNIEnv *env = GetJNIForThread();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return 0;
    }

    return env->GetStaticLongField(mSQLiteBridgeExceptionClass, jserialVersionUID);
}
jclass Clipboard::mClipboardClass = 0;
jmethodID Clipboard::jClearText = 0;
jmethodID Clipboard::jGetClipboardTextWrapper = 0;
jmethodID Clipboard::jHasText = 0;
jmethodID Clipboard::jSetClipboardText = 0;
void Clipboard::InitStubs(JNIEnv *jEnv) {
    initInit();

    mClipboardClass = getClassGlobalRef("org/mozilla/gecko/util/Clipboard");
    jClearText = getStaticMethod("clearText", "()V");
    jGetClipboardTextWrapper = getStaticMethod("getText", "()Ljava/lang/String;");
    jHasText = getStaticMethod("hasText", "()Z");
    jSetClipboardText = getStaticMethod("setText", "(Ljava/lang/CharSequence;)V");
}

Clipboard* Clipboard::Wrap(jobject obj) {
    JNIEnv *env = GetJNIForThread();

    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return NULL;
    }

    Clipboard* ret = new Clipboard(obj, env);
    env->DeleteLocalRef(obj);
    return ret;
}

void Clipboard::ClearText() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    env->CallStaticVoidMethod(mClipboardClass, jClearText);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

jstring Clipboard::GetClipboardTextWrapper() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return nullptr;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return nullptr;
    }

    jobject temp = env->CallStaticObjectMethod(mClipboardClass, jGetClipboardTextWrapper);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return nullptr;
    }

    jstring ret = static_cast<jstring>(env->PopLocalFrame(temp));
    return ret;
}

bool Clipboard::HasText() {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return false;
    }

    if (env->PushLocalFrame(0) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return false;
    }

    bool temp = env->CallStaticBooleanMethod(mClipboardClass, jHasText);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return false;
    }

    env->PopLocalFrame(NULL);
    return temp;
}

void Clipboard::SetClipboardText(const nsAString& a0) {
    JNIEnv *env = AndroidBridge::GetJNIEnv();
    if (!env) {
        ALOG_BRIDGE("Aborted: No env - %s", __PRETTY_FUNCTION__);
        return;
    }

    if (env->PushLocalFrame(1) != 0) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        return;
    }

    jstring j0 = AndroidBridge::NewJavaString(env, a0);

    env->CallStaticVoidMethod(mClipboardClass, jSetClipboardText, j0);

    if (env->ExceptionCheck()) {
        ALOG_BRIDGE("Exceptional exit of: %s", __PRETTY_FUNCTION__);
        env->ExceptionDescribe();
        env->ExceptionClear();
        env->PopLocalFrame(NULL);
        return;
    }

    env->PopLocalFrame(NULL);
}

void InitStubs(JNIEnv *jEnv) {
    GeckoAppShell::InitStubs(jEnv);
    JavaDomKeyLocation::InitStubs(jEnv);
    GeckoJavaSampler::InitStubs(jEnv);
    SurfaceBits::InitStubs(jEnv);
    ThumbnailHelper::InitStubs(jEnv);
    DisplayPortMetrics::InitStubs(jEnv);
    GLController::InitStubs(jEnv);
    GeckoLayerClient::InitStubs(jEnv);
    ImmutableViewportMetrics::InitStubs(jEnv);
    LayerView::InitStubs(jEnv);
    NativePanZoomController::InitStubs(jEnv);
    ProgressiveUpdateData::InitStubs(jEnv);
    ViewTransform::InitStubs(jEnv);
    NativeZip::InitStubs(jEnv);
    MatrixBlobCursor::InitStubs(jEnv);
    SQLiteBridgeException::InitStubs(jEnv);
    Clipboard::InitStubs(jEnv);
}
} /* android */
} /* widget */
} /* mozilla */
