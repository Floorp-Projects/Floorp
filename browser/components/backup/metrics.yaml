# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# Adding a new metric? We have docs for that!
# https://firefox-source-docs.mozilla.org/toolkit/components/glean/user/new_definitions_file.html

---
$schema: moz://mozilla.org/schemas/glean/metrics/2-0-0
$tags:
  - 'Firefox :: Profiles'

browser.backup:
  prof_d_disk_space:
    type: quantity
    unit: kilobyte
    description: >
      The total disk space available on the storage device that the profile
      directory is stored on. To reduce fingerprintability, we round to the
      nearest 10 megabytes and return the result in kilobytes.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1884407
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1884407
    data_sensitivity:
      - technical
    notification_emails:
      - mconley@mozilla.com
    expires: never
    telemetry_mirror: BROWSER_BACKUP_PROF_D_DISK_SPACE

  places_size:
    type: quantity
    unit: kilobyte
    description: >
      The total file size of the places.sqlite db located in the current profile
      directory, in kilobytes.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883642
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883642
    data_sensitivity:
      - technical
    notification_emails:
      - mconley@mozilla.com
    expires: never
    telemetry_mirror: BROWSER_BACKUP_PLACES_SIZE

  favicons_size:
    type: quantity
    unit: kilobyte
    description: >
      The total file size of the favicons.sqlite db located in the current profile
      directory, in kilobytes.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883642
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883642
    notification_emails:
      - mconley@mozilla.com
    expires: never
    telemetry_mirror: BROWSER_BACKUP_FAVICONS_SIZE

  credentials_data_size:
    type: quantity
    unit: kilobyte
    description: >
      The total size of logins, payment method, and form autofill related files
      in the current profile directory, in kilobytes.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883736
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883736
    data_sensitivity:
      - technical
    notification_emails:
      - mconley@mozilla.com
    expires: never
    telemetry_mirror: BROWSER_BACKUP_CREDENTIALS_DATA_SIZE

  security_data_size:
    type: quantity
    unit: kilobyte
    description: >
      The total size of files needed for NSS initialization parameters and security
      certificate settings in the current profile directory, in kilobytes.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883736
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883736
    data_sensitivity:
      - technical
    notification_emails:
      - mconley@mozilla.com
    expires: never
    telemetry_mirror: BROWSER_BACKUP_SECURITY_DATA_SIZE

  preferences_size:
    type: quantity
    unit: kilobyte
    description: >
      The total size of files relating to user preferences and permissions in the current profile
      directory, in kilobytes.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883739
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883739
    data_sensitivity:
      - technical
    notification_emails:
      - mconley@mozilla.com
    expires: never
    telemetry_mirror: BROWSER_BACKUP_PREFERENCES_SIZE

  misc_data_size:
    type: quantity
    unit: kilobyte
    description: >
      The total size of files for telemetry, site storage, media device origin mapping
      and Mozilla Accounts in the current profile directory, rounded to the nearest tenth kilobyte.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883747
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1883747
    data_sensitivity:
      - technical
    notification_emails:
      - mconley@mozilla.com
    expires: never
    telemetry_mirror: BROWSER_BACKUP_MISC_DATA_SIZE
