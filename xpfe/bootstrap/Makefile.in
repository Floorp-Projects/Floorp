#!gmake
#
# The contents of this file are subject to the Netscape Public License
# Version 1.0 (the "NPL"); you may not use this file except in
# compliance with the NPL.  You may obtain a copy of the NPL at
# http://www.mozilla.org/NPL/
#
# Software distributed under the NPL is distributed on an "AS IS" basis,
# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the NPL
# for the specific language governing rights and limitations under the
# NPL.
#
# The Initial Developer of this code under the NPL is Netscape
# Communications Corporation.  Portions created by Netscape are
# Copyright (C) 1998 Netscape Communications Corporation.  All Rights
# Reserved.


DEPTH = ../..
topsrcdir	= @top_srcdir@
srcdir		= @srcdir@
VPATH		= @srcdir@

PROGRAM = apprunner

MODULE = apprunner

include $(DEPTH)/config/autoconf.mk


TOOLKIT_GFX_LIB     = -lgfx$(MOZ_TOOLKIT)
TOOLKIT_WIDGET_LIB  = -lwidget$(MOZ_TOOLKIT)
TOOLKIT_BASE_LIB    = -lgmbase$(MOZ_TOOLKIT)


LIBS = \
	-L$(DIST)/bin	\
	-lnsappshell	\
	-lxpcom		\
	-lraptorbase	\
	$(TOOLKIT_WIDGET_LIB)\
	-lraptorgfx	\
	$(TOOLKIT_GFX_LIB)\
	-lgfxps         \
	$(TOOLKIT_BASE_LIB)\
	-lreg		\
	-labouturl	\
	-lhttpurl	\
	-lsockstuburl 	\
	-lfileurl	\
	-lgophurl	\
	-lftpurl	\
	-lremoturl	\
	-lxp		\
	-lnetutil	\
	-lnetcache	\
	-lnetcnvts	\
	-lmimetype	\
	-lnetwork	\
	-lnetlib	\
	-lraptorwebwidget	\
	-lraptorhtml	\
	-lraptorhtmlpars	\
	-lexpat \
	-lxmltok \
	-ljsdom		\
	-ljsurl		\
	-lraptorbase	\
	-lsecfree	\
	-l$(MOZ_LIB_JS_PREFIX)js		\
	$(JSJ_LIB)	\
	-lpref		\
	-limg		\
	$(JPEG_LIBS)	\
	$(PNG_LIBS)	\
	-l$(MOZ_LIB_UTIL_PREFIX)util	\
	-lxp		\
	-lxpcom		\
	$(ZLIB_LIBS)	\
	$(NSPR_LIBS)	\
	-lpwcac		\
	$(TK_LIBS)	\
	$(NULL)


CPPSRCS = \
	nsAppRunner.cpp 	\
	nsSetupRegistry.cpp	\
	nsUnixStubs.cpp		\
	$(NULL)

include $(topsrcdir)/config/config.mk

CFLAGS += $(TOOLKIT_CFLAGS)

include $(topsrcdir)/config/rules.mk

RUN_APPRUNNER_SCRIPT= $(srcdir)/mozilla-apprunner.sh

install:: $(RUN_APPRUNNER_SCRIPT)
	$(INSTALL) $(RUN_APPRUNNER_SCRIPT) $(DIST)/bin
