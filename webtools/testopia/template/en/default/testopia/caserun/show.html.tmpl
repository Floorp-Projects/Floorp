[%# 1.0@bugzilla.org %]
[%# The contents of this file are subject to the Mozilla Public
  # License Version 1.1 (the "License"); you may not use this file
  # except in compliance with the License. You may obtain a copy of
  # the License at http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS
  # IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
  # implied. See the License for the specific language governing
  # rights and limitations under the License.
  #
  # The Original Code is the Bugzilla Test Runner System.
  #
  # The Initial Developer of the Original Code is Maciej Maczynski.
  # Portions created by Maciej Maczynski are Copyright (C) 2001
  # Maciej Maczynski. All Rights Reserved.
  #
  # Contributor(s): Ed Fuentetaja <efuentetaja@acm.org>
  #                 Greg Hendricks <ghendricks@novell.com>
  #%]

[%# INTERFACE:
  # ...
  #%]

[%############################################################################%]
[%# Template Initialization                                                  #%]
[%############################################################################%]

[% PROCESS global/variables.none.tmpl %]
[% PROCESS testopia/blocks.html.tmpl %]
[% title = "Test Case Run Log For Test Case: $caserun.case.summary" %]

[%############################################################################%]
[%# Page Header                                                              #%]
[%############################################################################%]

[% PROCESS global/header.html.tmpl %]
[% PROCESS testopia/style.none.tmpl %]
[% PROCESS testopia/messages.html.tmpl %]
[% PROCESS testopia/caserun/navigate.html.tmpl %]

<script type="text/javascript">
  djConfig = {
    parseWidgets: false,
    searchIds: ["caserun_env","assignee"]
  };
</script>
<script src="testopia/dojo/dojo.js" type="text/javascript"></script>
<script type="text/javascript">
  dojo.require("dojo.widget.Select");
</script>

[%##### Overview #####%]

<div id="run_overview">
<h3>Overview</h3>
<table border="0" cellpadding="1" width="100%">
  <tbody align="left">
    <tr class="bz_row_header">
      <th width="33%">Test Case</th>
      <th width="33%">Test Run</th>
      <th width="33%">Test Plan</th>
      </tr>
    <tr class="bz_row_data">
      <td><a href="tr_show_case.cgi?case_id=[% caserun.case.id FILTER html %]">[% caserun.case.id FILTER html %]: [% caserun.case.summary FILTER html %]</a></td>
      <td><a href="tr_show_run.cgi?run_id=[% caserun.run.id FILTER html %]">[% caserun.run.id FILTER html %]: [% caserun.run.summary FILTER html %]</a></td>
      <td><a href="tr_show_plan.cgi?plan_id=[% caserun.run.plan.id FILTER html %]">[% caserun.run.plan.id FILTER html %]: [% caserun.run.plan.name %]</a></td>
      </tr>
    <tr class="bz_row_header">
      <th>Test Case Version</th>
      <th>Product</th>
      <th>Stop Date</th>
      </tr>
    <tr class="bz_row_data">
      <td>[% caserun.case.version FILTER html %]</td>
      <td>[% caserun.run.plan.product.name FILTER html %]</td>
      <td>[% caserun.close_date FILTER html %]</td>
    </tr>
    <tr class="bz_row_header">
      <th>Assignee</th>
      <th>Status</th>
      <th>Tested By</th>
      </tr>
    <tr class="bz_row_data">
      <td><a href="mailto:[% caserun.assignee.email FILTER html %]">[% caserun.assignee.identity FILTER html %]</a></td>
      <td align="center"><img src="testopia/img/[% caserun.status FILTER html %].gif" alt="[% caserun.status FILTER html %]" title="[% caserun.status FILTER html %]"></td>
      <td><a href="mailto:[% caserun.testedby.email FILTER html %]">[% caserun.testedby.identity FILTER html %]</a></td>
    </tr>
  </tbody>
</table>
</div>
[% IF caserun.candelete %]
<p align="right">
  <a href="tr_show_caserun.cgi?action=delete&caserun_id=[% caserun.id FILTER none %]">Delete</a>
</p>
[% END %]
<br><br>
[%##### Case Action & Expected Results #####%]
<h3>Case Action & Expected Results</h3>
<div style="width:800">
<table width="100%">
  <tr class="bz_row_header">
    <th colspan="2">Setup</th>
  </tr>
  <tr>
    <td colspan="2" class="ae_s"><div style="overflow:auto" >[% caserun.case.text.setup FILTER none %]</div></td>
  </tr>
  <tr class="bz_row_header">
    <th width=50%">Action</th>
    <th width=50%">Expected Results</th>
  </tr>
  <tr>
    <td class="ae_s"><div style="overflow:auto" >[% caserun.case.text.action FILTER none %]</div></td>
    <td class="ae_s"><div style="overflow:auto" >[% caserun.case.text.effect FILTER none %]</div></td>
  </tr>
  <tr class="bz_row_header">
    <th colspan="2">Breakdown</th>
  </tr>
  <tr>
    <td colspan="2" class="ae_s"><div style="overflow:auto" >[% caserun.case.text.berakdown FILTER none %]</div></td>
  </tr>

[% IF caserun.case.script OR caserun.case.arguments %]
  <tr>
    <td><b>Script:</b>[% caserun.case.script FILTER html %]</td>
    <td><b>Arguments:</b>[% caserun.case.arguments FILTER html %]</td>
  </tr>
[% END %]
</table>
<h3>Attachments</h3>
<form action="[% action FILTER none %]" method="POST" enctype="multipart/form-data">
[% PROCESS testopia/attachment/table.html.tmpl
   item = caserun.case
%]
<br><br>
[% IF caserun.canedit %]
  <h3>Attributes</h3>
  [% PROCESS testopia/caserun/form.html.tmpl %]
[% ELSE %]
  [% IF caserun.case.bugs.size > 0 %]
  <h3>Bugs</h3>
  <div id="bugs">
  [% PROCESS testopia/case/bugs.html.tmpl
     item = caserun
  %]
  [% END %]
<h3>Attributes</h3>
  <table>
    <tr>
      <th class="bz_row_header">Notes</th>
    </tr>
    <tr>
      <td><div style="height:200px; width: 600px; border: 1px solid #000; overflow: auto; background-color: #f8f8f8"><pre>[% caserun.notes FILTER html %]</pre></div></td>
    </tr>
  </table>  
[% END %]
</form>
[% PROCESS global/footer.html.tmpl %]

