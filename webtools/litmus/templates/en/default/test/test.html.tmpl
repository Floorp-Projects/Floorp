[%# ***** BEGIN LICENSE BLOCK *****
  # Version: MPL 1.1
  #
  # The contents of this file are subject to the Mozilla Public License Version
  # 1.1 (the "License"); you may not use this file except in compliance with
  # the License. You may obtain a copy of the License at
  # http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS IS" basis,
  # WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
  # for the specific language governing rights and limitations under the
  # License.
  #
  # The Original Code is Litmus.
  #
  # The Initial Developer of the Original Code is
  # The Mozilla Corporation.
  # Portions created by the Initial Developer are Copyright (C) 2006
  # the Initial Developer. All Rights Reserved.
  #
  # Contributor(s):
  #   Chris Cooper <ccooper@deadsquid.com>
  #   Zach Lipton <zach@zachlipton.com>
  #
  # ***** END LICENSE BLOCK *****
#%]

[%# INTERFACE:
  # $testcase   - the testcase object to show
  # $show_config  - display the config options (testgroup, subgroup, etc.)
  #                 for a given testcase
  # $show_edit (optional) - display testcase for editing
#%]

[% PROCESS global/selects.none.tmpl %]

[% IF show_config %]
<table cellspacing="0" cellpadding="0" class="tcm">
  <tr>
  <td width="20%"><b>Product:</b></td>
  <td>
    <div id="product_text[% IF ! show_edit %]_[% testcase.testcase_id | html %][% END %]">[% testcase.product.name | html %]</div>
    </td>
    [% IF ! show_edit %]<td align="right" valign="top" colspan="5"><a href="manage_testcases.cgi?testcase_id=[%testcase.testcase_id | html%]&edit=1"> Edit Testcase</a></td>[% END %]
  </tr>
  <tr>
    <td><b>Test Group(s):</b></td>
    <td>
      <div id="testgroups_display[% IF ! show_edit %]_[% testcase.testcase_id | html %][% END %]">[% IF testgroups.size==0 %]<span class="errorHeading">This testcase does not belong to any testgroups that are currently enabled.</span>[% ELSE %][% FOREACH testgroup=testgroups %][% testgroup.name | html %][% UNLESS loop.last %], [% END %][% END %][% END %]</div>
    </td>
  </tr>
  <tr>
    <td><b>Subgroup(s):</b></td>
    <td>
      <div id="subgroups_display[% IF ! show_edit %]_[% testcase.testcase_id | html %][% END %]">[% IF subgroups.size==0 %]<span class="errorHeading">This testcase does not belong to any subgroups that are currently enabled.</span>[% ELSE %][% FOREACH subgroup=subgroups %][% subgroup.name | html %][% UNLESS loop.last %], [% END %][% END %][% END %]</div>
    </td>
  </tr>
  <tr>
    <td><b>Testcase ID #:</b></td>
    <td id="testcase_id_display[% IF ! show_edit %]_[% testcase.testcase_id | html %][% END %]">[% testcase.testcase_id | html %]</td>
  </tr>
  <tr>
    <td><b>Summary:</b></td>
    <td><div id="summary_text[% IF ! show_edit %]_[%testcase.testcase_id | html%][% END %]">[% testcase.summary | html %]</div></td>
  </tr>
</table>

<br clear="all" />
[% END %]

<table cellspacing="0" cellpadding="0" class="tcm">
  <tr>
   <td width="50%" class="content"><div class="dh">Steps to Perform:</div>
     <div class="dv" id="steps_text[% IF ! show_edit %]_[%testcase.testcase_id | html%][% END %]">[% testcase.steps | markdown | testdata %]</div>
    </td>
    <td width="50%" class="content"><div class="dh">Expected Results:</div>
      <div class="dv" id="results_text[% IF ! show_edit %]_[%testcase.testcase_id | html%][% END %]">[% testcase.expected_results | markdown | testdata %]</div>
    </td>
  </tr>

  [% IF defaultemail AND ! show_edit %]
  <!-- Only allow the user to submit a single result if they are already 
       logged in. -->
  <tr>
   <td class="content" colspan="2">

    <div id="admin_text_[%testcase.testcase_id | html%]">

    <table cellspacing="0" cellpadding="0" class="tcmf">
    <tr>
     <td width="210px">
      <div class="dh">Result:</div>
      [% INCLUDE form_widgets/radio_testresults.tmpl testcase_id=testcase.testcase_id %]
      <br/>
      <div><input class="button" type="submit" id="Submit[% testcase.testcase_id | html %]" name="Submit[% testcase.testcase_id | html %]" value="Submit This Result" onClick="return confirmPartialSubmission()"/>
      </div>
     </td>

     <td>
      <div class="dh">Notes/Comments (optional):</div>
      <div class="dv">
       <textarea name="comment_[% testcase.testcase_id | html %]" 
         cols="45" rows="4" id="note_[% testcase.testcase_id | html %]"></textarea></div>
      <div class="dh">Associated Bug #s:</div>
      <div class="dv"><input type="text" name="bugs_[% testcase.testcase_id | html %]" 
        class="result_bug" /> (bug #,bug #,...)</div>
     </td>
    </tr>

    </table>

    </div>

   </td>
  </tr>
[% END %]
</table>
