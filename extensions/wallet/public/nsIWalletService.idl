/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-
 *
 * The contents of this file are subject to the Netscape Public
 * License Version 1.1 (the "License"); you may not use this file
 * except in compliance with the License. You may obtain a copy of
 * the License at http://www.mozilla.org/NPL/
 *
 * Software distributed under the License is distributed on an "AS
 * IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
 * implied. See the License for the specific language governing
 * rights and limitations under the License.
 *
 * The Original Code is mozilla.org code.
 *
 * The Initial Developer of the Original Code is Netscape
 * Communications Corporation.  Portions created by Netscape are
 * Copyright (C) 1998 Netscape Communications Corporation. All
 * Rights Reserved.
 *
 * Contributor(s):
 */

#include "nsISupports.idl"
#include "nsIURL.idl"
#include "nsIPrompt.idl"

%{ C++
#include "nsString.h"
#include "nsIPresShell.h"

// {738CFD52-ABCF-11d2-AB4B-0080C787AD96}
#define NS_WALLETSERVICE_CID \
{ 0x738cfd52, 0xabcf, 0x11d2, { 0xab, 0x4b, 0x0, 0x80, 0xc7, 0x87, 0xad, 0x96 } }

#define NS_WALLETSERVICE_PROGID		"component://netscape/wallet"
#define NS_WALLETSERVICE_CLASSNAME	"Auto Form Fill and Wallet"
%}

interface nsIPresShell;
native nsAutoString(nsAutoString);
[ref] native nsAutoStringRef(nsAutoString);

/**
 * The nsIWalletService interface provides an API to the wallet service.
 * This is a preliminary interface which <B>will</B> change over time!
 *
 */
[scriptable, uuid(738CFD51-ABCF-11d2-AB4B-0080C787AD96)]
interface nsIWalletService : nsISupports {
  [noscript]void WALLET_PreEdit(in nsAutoStringRef walletList);
  [noscript]void WALLET_PostEdit(in nsAutoString walletList);
  void WALLET_ChangePassword();
  void WALLET_RequestToCapture(in nsIPresShell shell);
  void WALLET_Prefill(in nsIPresShell shell, in boolean quick);
  [noscript]void WALLET_PrefillReturn(in nsAutoString results);
  void WALLET_FetchFromNetCenter();

  boolean PromptUsernameAndPasswordURL(in wstring text, out wstring user, out wstring pwd, in string urlname, in boolean stripUrl, in nsIPrompt dialog);
  boolean PromptPasswordURL(in wstring text, out wstring pwd, in string urlname, in boolean stripUrl, in nsIPrompt dialog);
  boolean PromptURL(in wstring text, in wstring defaultText, out wstring result, in string urlname, in boolean stripUrl, in nsIPrompt dialog);
  void SI_RemoveUser(in string URLName, in boolean stripUrl, in wstring userName);
  void SI_StorePassword(in string URLName, in boolean stripUrl, in wstring userName, in wstring pwd);

  boolean haveData(in string url, in wstring userName, in boolean stripUrl);

  [noscript] void WALLET_GetNopreviewListForViewer(in nsAutoStringRef aNopreviewList);
  [noscript] void WALLET_GetNocaptureListForViewer(in nsAutoStringRef aNocaptureList);
  [noscript] void WALLET_GetPrefillListForViewer(in nsAutoStringRef aPrefillList);
  [noscript] void SI_GetSignonListForViewer(in nsAutoStringRef aSignonList);
  [noscript] void SI_GetRejectListForViewer(in nsAutoStringRef aRejectList);
  [noscript] void SI_SignonViewerReturn(in nsAutoString results);
};
