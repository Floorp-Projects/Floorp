From: Dan Minor <dminor@mozilla.com>
Date: Tue, 1 Dec 2020 09:36:00 -0500
Subject: Bug 1654112 - Disable creating av1 encoder and decoder. r=ng

Differential Revision: https://phabricator.services.mozilla.com/D130089
Mercurial Revision: https://hg.mozilla.org/mozilla-central/rev/ef548d7758c7de6e78d38af299c2296bf9d20ec9
---
 media/engine/internal_decoder_factory.cc | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/media/engine/internal_decoder_factory.cc b/media/engine/internal_decoder_factory.cc
index d79cbf2712..44f9c35bb0 100644
--- a/media/engine/internal_decoder_factory.cc
+++ b/media/engine/internal_decoder_factory.cc
@@ -50,6 +50,7 @@ std::vector<SdpVideoFormat> InternalDecoderFactory::GetSupportedFormats()
   for (const SdpVideoFormat& h264_format : SupportedH264DecoderCodecs())
     formats.push_back(h264_format);
 
+#if !defined(WEBRTC_MOZILLA_BUILD)
   if (kDav1dIsIncluded) {
     formats.push_back(SdpVideoFormat(cricket::kAv1CodecName));
     formats.push_back(
@@ -57,6 +58,7 @@ std::vector<SdpVideoFormat> InternalDecoderFactory::GetSupportedFormats()
                        {{cricket::kAv1FmtpProfile,
                          AV1ProfileToString(AV1Profile::kProfile1).data()}}));
   }
+#endif
 
   return formats;
 }
