# Copyright (c) the JPEG XL Project
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Source files definitions for GN-based build systems.

# Library version macros
libjxl_version_defines = [
    "JPEGXL_MAJOR_VERSION=0",
    "JPEGXL_MINOR_VERSION=3",
    "JPEGXL_PATCH_VERSION=7",
]

libjxl_dec_sources = [
    "jxl/ac_context.h",
    "jxl/ac_strategy.cc",
    "jxl/ac_strategy.h",
    "jxl/alpha.cc",
    "jxl/alpha.h",
    "jxl/ans_common.cc",
    "jxl/ans_common.h",
    "jxl/ans_params.h",
    "jxl/aux_out.cc",
    "jxl/aux_out.h",
    "jxl/aux_out_fwd.h",
    "jxl/base/arch_macros.h",
    "jxl/base/bits.h",
    "jxl/base/byte_order.h",
    "jxl/base/cache_aligned.cc",
    "jxl/base/cache_aligned.h",
    "jxl/base/compiler_specific.h",
    "jxl/base/data_parallel.cc",
    "jxl/base/data_parallel.h",
    "jxl/base/descriptive_statistics.cc",
    "jxl/base/descriptive_statistics.h",
    "jxl/base/file_io.h",
    "jxl/base/iaca.h",
    "jxl/base/os_macros.h",
    "jxl/base/override.h",
    "jxl/base/padded_bytes.cc",
    "jxl/base/padded_bytes.h",
    "jxl/base/profiler.h",
    "jxl/base/robust_statistics.h",
    "jxl/base/span.h",
    "jxl/base/status.cc",
    "jxl/base/status.h",
    "jxl/base/thread_pool_internal.h",
    "jxl/base/time.cc",
    "jxl/base/time.h",
    "jxl/blending.cc",
    "jxl/blending.h",
    "jxl/chroma_from_luma.cc",
    "jxl/chroma_from_luma.h",
    "jxl/codec_in_out.h",
    "jxl/coeff_order.cc",
    "jxl/coeff_order.h",
    "jxl/coeff_order_fwd.h",
    "jxl/color_encoding_internal.cc",
    "jxl/color_encoding_internal.h",
    "jxl/color_management.cc",
    "jxl/color_management.h",
    "jxl/common.h",
    "jxl/compressed_dc.cc",
    "jxl/compressed_dc.h",
    "jxl/convolve-inl.h",
    "jxl/convolve.cc",
    "jxl/convolve.h",
    "jxl/dct-inl.h",
    "jxl/dct_block-inl.h",
    "jxl/dct_scales.cc",
    "jxl/dct_scales.h",
    "jxl/dct_util.h",
    "jxl/dec_ans.cc",
    "jxl/dec_ans.h",
    "jxl/dec_bit_reader.h",
    "jxl/dec_cache.h",
    "jxl/dec_context_map.cc",
    "jxl/dec_context_map.h",
    "jxl/dec_external_image.cc",
    "jxl/dec_external_image.h",
    "jxl/dec_frame.cc",
    "jxl/dec_frame.h",
    "jxl/dec_group.cc",
    "jxl/dec_group.h",
    "jxl/dec_group_border.cc",
    "jxl/dec_group_border.h",
    "jxl/dec_huffman.cc",
    "jxl/dec_huffman.h",
    "jxl/dec_modular.cc",
    "jxl/dec_modular.h",
    "jxl/dec_noise.cc",
    "jxl/dec_noise.h",
    "jxl/dec_params.h",
    "jxl/dec_patch_dictionary.cc",
    "jxl/dec_patch_dictionary.h",
    "jxl/dec_reconstruct.cc",
    "jxl/dec_reconstruct.h",
    "jxl/dec_transforms-inl.h",
    "jxl/dec_upsample.cc",
    "jxl/dec_upsample.h",
    "jxl/dec_xyb-inl.h",
    "jxl/dec_xyb.cc",
    "jxl/dec_xyb.h",
    "jxl/decode.cc",
    "jxl/enc_bit_writer.cc",
    "jxl/enc_bit_writer.h",
    "jxl/entropy_coder.cc",
    "jxl/entropy_coder.h",
    "jxl/epf.cc",
    "jxl/epf.h",
    "jxl/fast_math-inl.h",
    "jxl/field_encodings.h",
    "jxl/fields.cc",
    "jxl/fields.h",
    "jxl/filters.cc",
    "jxl/filters.h",
    "jxl/filters_internal.h",
    "jxl/frame_header.cc",
    "jxl/frame_header.h",
    "jxl/gauss_blur.cc",
    "jxl/gauss_blur.h",
    "jxl/headers.cc",
    "jxl/headers.h",
    "jxl/huffman_table.cc",
    "jxl/huffman_table.h",
    "jxl/icc_codec.cc",
    "jxl/icc_codec.h",
    "jxl/icc_codec_common.cc",
    "jxl/icc_codec_common.h",
    "jxl/image.cc",
    "jxl/image.h",
    "jxl/image_bundle.cc",
    "jxl/image_bundle.h",
    "jxl/image_metadata.cc",
    "jxl/image_metadata.h",
    "jxl/image_ops.h",
    "jxl/jpeg/dec_jpeg_data.cc",
    "jxl/jpeg/dec_jpeg_data.h",
    "jxl/jpeg/dec_jpeg_data_writer.cc",
    "jxl/jpeg/dec_jpeg_data_writer.h",
    "jxl/jpeg/dec_jpeg_output_chunk.h",
    "jxl/jpeg/dec_jpeg_serialization_state.h",
    "jxl/jpeg/jpeg_data.cc",
    "jxl/jpeg/jpeg_data.h",
    "jxl/jxl_inspection.h",
    "jxl/lehmer_code.h",
    "jxl/linalg.h",
    "jxl/loop_filter.cc",
    "jxl/loop_filter.h",
    "jxl/luminance.cc",
    "jxl/luminance.h",
    "jxl/memory_manager_internal.cc",
    "jxl/memory_manager_internal.h",
    "jxl/modular/encoding/context_predict.h",
    "jxl/modular/encoding/dec_ma.cc",
    "jxl/modular/encoding/dec_ma.h",
    "jxl/modular/encoding/encoding.cc",
    "jxl/modular/encoding/encoding.h",
    "jxl/modular/encoding/ma_common.h",
    "jxl/modular/modular_image.cc",
    "jxl/modular/modular_image.h",
    "jxl/modular/options.h",
    "jxl/modular/transform/near-lossless.h",
    "jxl/modular/transform/palette.h",
    "jxl/modular/transform/squeeze.h",
    "jxl/modular/transform/subtractgreen.h",
    "jxl/modular/transform/transform.cc",
    "jxl/modular/transform/transform.h",
    "jxl/noise.h",
    "jxl/noise_distributions.h",
    "jxl/opsin_params.cc",
    "jxl/opsin_params.h",
    "jxl/passes_state.cc",
    "jxl/passes_state.h",
    "jxl/patch_dictionary_internal.h",
    "jxl/quant_weights.cc",
    "jxl/quant_weights.h",
    "jxl/quantizer-inl.h",
    "jxl/quantizer.cc",
    "jxl/quantizer.h",
    "jxl/rational_polynomial-inl.h",
    "jxl/splines.cc",
    "jxl/splines.h",
    "jxl/toc.cc",
    "jxl/toc.h",
    "jxl/transfer_functions-inl.h",
    "jxl/transpose-inl.h",
    "jxl/xorshift128plus-inl.h",
]

libjxl_enc_sources = [
    "jxl/butteraugli/butteraugli.cc",
    "jxl/butteraugli/butteraugli.h",
    "jxl/butteraugli_wrapper.cc",
    "jxl/dec_file.cc",
    "jxl/dec_file.h",
    "jxl/enc_ac_strategy.cc",
    "jxl/enc_ac_strategy.h",
    "jxl/enc_adaptive_quantization.cc",
    "jxl/enc_adaptive_quantization.h",
    "jxl/enc_ans.cc",
    "jxl/enc_ans.h",
    "jxl/enc_ans_params.h",
    "jxl/enc_ar_control_field.cc",
    "jxl/enc_ar_control_field.h",
    "jxl/enc_butteraugli_comparator.cc",
    "jxl/enc_butteraugli_comparator.h",
    "jxl/enc_butteraugli_pnorm.cc",
    "jxl/enc_butteraugli_pnorm.h",
    "jxl/enc_cache.cc",
    "jxl/enc_cache.h",
    "jxl/enc_chroma_from_luma.cc",
    "jxl/enc_chroma_from_luma.h",
    "jxl/enc_cluster.cc",
    "jxl/enc_cluster.h",
    "jxl/enc_coeff_order.cc",
    "jxl/enc_coeff_order.h",
    "jxl/enc_color_management.cc",
    "jxl/enc_color_management.h",
    "jxl/enc_comparator.cc",
    "jxl/enc_comparator.h",
    "jxl/enc_context_map.cc",
    "jxl/enc_context_map.h",
    "jxl/enc_detect_dots.cc",
    "jxl/enc_detect_dots.h",
    "jxl/enc_dot_dictionary.cc",
    "jxl/enc_dot_dictionary.h",
    "jxl/enc_entropy_coder.cc",
    "jxl/enc_entropy_coder.h",
    "jxl/enc_external_image.cc",
    "jxl/enc_external_image.h",
    "jxl/enc_fast_heuristics.cc",
    "jxl/enc_file.cc",
    "jxl/enc_file.h",
    "jxl/enc_frame.cc",
    "jxl/enc_frame.h",
    "jxl/enc_gamma_correct.h",
    "jxl/enc_group.cc",
    "jxl/enc_group.h",
    "jxl/enc_heuristics.cc",
    "jxl/enc_heuristics.h",
    "jxl/enc_huffman.cc",
    "jxl/enc_huffman.h",
    "jxl/enc_icc_codec.cc",
    "jxl/enc_icc_codec.h",
    "jxl/enc_image_bundle.cc",
    "jxl/enc_image_bundle.h",
    "jxl/enc_modular.cc",
    "jxl/enc_modular.h",
    "jxl/enc_noise.cc",
    "jxl/enc_noise.h",
    "jxl/enc_params.h",
    "jxl/enc_patch_dictionary.cc",
    "jxl/enc_patch_dictionary.h",
    "jxl/enc_quant_weights.cc",
    "jxl/enc_quant_weights.h",
    "jxl/enc_splines.cc",
    "jxl/enc_splines.h",
    "jxl/enc_toc.cc",
    "jxl/enc_toc.h",
    "jxl/enc_transforms-inl.h",
    "jxl/enc_transforms.cc",
    "jxl/enc_transforms.h",
    "jxl/enc_xyb.cc",
    "jxl/enc_xyb.h",
    "jxl/encode.cc",
    "jxl/encode_internal.h",
    "jxl/gaborish.cc",
    "jxl/gaborish.h",
    "jxl/huffman_tree.cc",
    "jxl/huffman_tree.h",
    "jxl/jpeg/enc_jpeg_data.cc",
    "jxl/jpeg/enc_jpeg_data.h",
    "jxl/jpeg/enc_jpeg_data_reader.cc",
    "jxl/jpeg/enc_jpeg_data_reader.h",
    "jxl/jpeg/enc_jpeg_huffman_decode.cc",
    "jxl/jpeg/enc_jpeg_huffman_decode.h",
    "jxl/linalg.cc",
    "jxl/modular/encoding/enc_encoding.cc",
    "jxl/modular/encoding/enc_encoding.h",
    "jxl/modular/encoding/enc_ma.cc",
    "jxl/modular/encoding/enc_ma.h",
    "jxl/optimize.cc",
    "jxl/optimize.h",
    "jxl/progressive_split.cc",
    "jxl/progressive_split.h",
]

libjxl_gbench_sources = [
    "extras/tone_mapping_gbench.cc",
    "jxl/dec_external_image_gbench.cc",
    "jxl/enc_external_image_gbench.cc",
    "jxl/splines_gbench.cc",
    "jxl/tf_gbench.cc",
]

libjxl_tests_sources = [
    "jxl/ac_strategy_test.cc",
    "jxl/adaptive_reconstruction_test.cc",
    "jxl/alpha_test.cc",
    "jxl/ans_common_test.cc",
    "jxl/ans_test.cc",
    "jxl/bit_reader_test.cc",
    "jxl/bits_test.cc",
    "jxl/blending_test.cc",
    "jxl/butteraugli_test.cc",
    "jxl/byte_order_test.cc",
    "jxl/coeff_order_test.cc",
    "jxl/color_encoding_internal_test.cc",
    "jxl/color_management_test.cc",
    "jxl/compressed_image_test.cc",
    "jxl/convolve_test.cc",
    "jxl/data_parallel_test.cc",
    "jxl/dct_test.cc",
    "jxl/decode_test.cc",
    "jxl/descriptive_statistics_test.cc",
    "jxl/enc_external_image_test.cc",
    "jxl/encode_test.cc",
    "jxl/entropy_coder_test.cc",
    "jxl/fast_math_test.cc",
    "jxl/fields_test.cc",
    "jxl/filters_internal_test.cc",
    "jxl/gaborish_test.cc",
    "jxl/gamma_correct_test.cc",
    "jxl/gauss_blur_test.cc",
    "jxl/gradient_test.cc",
    "jxl/iaca_test.cc",
    "jxl/icc_codec_test.cc",
    "jxl/image_bundle_test.cc",
    "jxl/image_ops_test.cc",
    "jxl/jxl_test.cc",
    "jxl/lehmer_code_test.cc",
    "jxl/linalg_test.cc",
    "jxl/modular_test.cc",
    "jxl/opsin_image_test.cc",
    "jxl/opsin_inverse_test.cc",
    "jxl/optimize_test.cc",
    "jxl/padded_bytes_test.cc",
    "jxl/passes_test.cc",
    "jxl/patch_dictionary_test.cc",
    "jxl/preview_test.cc",
    "jxl/quant_weights_test.cc",
    "jxl/quantizer_test.cc",
    "jxl/rational_polynomial_test.cc",
    "jxl/robust_statistics_test.cc",
    "jxl/roundtrip_test.cc",
    "jxl/speed_tier_test.cc",
    "jxl/splines_test.cc",
    "jxl/toc_test.cc",
    "jxl/xorshift128plus_test.cc",
]

# Test-only library code.
libjxl_testlib_sources = [
    "jxl/dct_for_test.h",
    "jxl/dec_transforms_testonly.cc",
    "jxl/dec_transforms_testonly.h",
    "jxl/image_test_utils.h",
    "jxl/test_utils.h",
    "jxl/testdata.h",
]

libjxl_threads_sources = [
    "threads/thread_parallel_runner.cc",
    "threads/thread_parallel_runner_internal.cc",
    "threads/thread_parallel_runner_internal.h",
]

libjxl_profiler_sources = [
    "profiler/profiler.cc",
    "profiler/profiler.h",
    "profiler/tsc_timer.h",
]
