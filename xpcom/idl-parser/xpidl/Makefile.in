#
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

PARSER_SRCS = \
  header.py \
  typelib.py \
  xpidl.py \
  $(NULL)

PLY_FILES = \
  $(topsrcdir)/other-licenses/ply/ply/__init__.py \
  $(topsrcdir)/other-licenses/ply/ply/lex.py \
  $(topsrcdir)/other-licenses/ply/ply/yacc.py \
  $(NULL)

include $(topsrcdir)/config/rules.mk

# Generate the PLY lexer and parser.
xpidllex.py: $(PARSER_SRCS) $(PLY_FILES)
	$(PYTHON_PATH) \
	  $(PLY_INCLUDE) \
	  $(srcdir)/header.py --cachedir=. --regen

# generating xpidllex.py generates xpidlyacc.py too
xpidlyacc.py: xpidllex.py

GARBAGE += \
  xpidllex.py \
  xpidllex.pyc \
  xpidlyacc.py \
  xpidlyacc.pyc \
  xpidl_debug \
  $(NULL)
