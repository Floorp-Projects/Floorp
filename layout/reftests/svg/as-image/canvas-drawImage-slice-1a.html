<html class="reftest-wait">
  <head>
    <script type="text/javascript">
      function go() {
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");

        // Draw some orange
        ctx.fillStyle = "orange";
        ctx.fillRect(0, 0, 100, 100);

        // Instantiate an image. Once it has loaded, draw it & take snapshot.
        var image = new Image();
        image.onload = function() {
          // This version of the test is "easier", in that the sampled region
          // is offset from the red by 1px on all sides. This lets us avoid
          // any pixel-rounding errors.
          ctx.drawImage(image, 26, 26, 48, 48, 0, 0, 100, 100);
          document.documentElement.removeAttribute("class");
        }
        image.src ="limeInRed100x100.svg";
      }
    </script>
  </head>
  <body onload="go()">
    <canvas id="canvas" width="100" height="100"></canvas>
</body>
</html>
