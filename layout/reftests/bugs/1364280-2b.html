<!DOCTYPE html>
<style>
  span { color: green; }
  div:not(:dir(rtl)) + span { color: red; }
</style>
<body dir="rtl" onload="window.oldColor = getComputedStyle(document.querySelector('span')).color; document.querySelector('[dir=auto]').setAttribute('dir', '')">
  <div dir="auto"></div>
  <span>This should be green</span>
</body>
