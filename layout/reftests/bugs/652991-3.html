<!DOCTYPE html>
<html class="reftest-wait">
  <svg width="200" height="200">
  <defs>
    <marker id="markerCircle" markerWidth="8" markerHeight="8" refX="5" refY="5">
      <circle cx="5" cy="5" r="2" style="stroke: none; fill:#000000;"/>
    </marker>
  </defs>
  <path id="drawPath" d="M10,10 L60,10 L110,10"
        style="stroke: #6666ff; stroke-width: 1px; fill: none; marker-start: url(#markerCircle); marker-mid: url(#markerCircle);; marker-end: url(#markerCircle);"/>
  </svg>
  <script>
  function doTest() {
    window.history.pushState(null, "", "new-page");

    drawPath.style.display = "none";
    window.setTimeout(() => {
      drawPath.style.display = "inline";
      document.documentElement.removeAttribute('class');
    }, 0);
  }

  drawPath = document.getElementById("drawPath");
  window.addEventListener("MozReftestInvalidate", doTest);
  </script>
</html>
