<!DOCTYPE HTML>
<html class="reftest-wait">
<head>
<style>
body {
  margin: 0;
  display: -moz-box;
  -moz-box-orient: horizontal;
  width: 400px;
}
canvas {
  -moz-box-flex: 1;
  opacity: 0.999;
  border: 1px solid black;
}
.censor {
  position: absolute;
  width: 1px;
  height: 1px;
  background: cyan;
}
</style>
</head>
<body>
<canvas id="c" width="100" height="100"></canvas>
<script>
var ctx = document.getElementById("c").getContext('2d');
ctx.fillStyle = "lime";
ctx.fillRect(0, 0, 100, 100);
function doTest() {
  document.body.style.width = "502px";
  document.documentElement.removeAttribute("class");
}
window.addEventListener("MozReftestInvalidate", doTest);
</script>
<div class="censor" style="left:0; top:0;"></div>
<div class="censor" style="left:501px; top:0;"></div>
<div class="censor" style="left:0; top:101px;"></div>
<div class="censor" style="left:501px; top:101px;"></div>
</body>
</html>
