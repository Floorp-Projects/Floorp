<!DOCTYPE html>
<html class="reftest-wait">
<meta charset="utf-8">
<title>Test for bug 1066554 - Shadow DOM loads SVG stylesheets as needed</title>
<body>
  <div id="x"></div>
  <script>
    function insertShadowSVG() {
      var x = document.getElementById("x");
      if (x.createShadowRoot) {
        x.createShadowRoot();
        x.shadowRoot.innerHTML =
          '<svg width="50px" height="10px"> \
             <switch> \
               <foreignObject width="50px" height="50px"> \
                 <div style="width: 100px; height: 10px; background: red;"></div> \
               </foreignObject> \
             </switch> \
           </svg>';
      }
      document.documentElement.removeAttribute("class");
    }
    window.addEventListener("MozReftestInvalidate", insertShadowSVG);
  </script>
</body>
</html>
