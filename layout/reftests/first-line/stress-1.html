<!DOCTYPE html>
<html class="reftest-wait">
<head>

<style>
  .fl:first-line { }
  .inh { position: inherit; }
  .abs { position: absolute; }
  body { visibility: hidden; }
</style>
 
<script>

function boom()
{
  x = document.getElementById("x");
  y = document.getElementById("y");

  x.setAttribute('class', "fl abs");
  y.setAttribute('class', "inh");
  setTimeout(boom2, 5);
}

function boom2()
{
  y.setAttribute('class', "abs");
  document.body.offsetWidth;
  document.documentElement.className = "";
}

</script>

</head>

<body onload="setTimeout(boom, 5);">
<div id="x">
  <p id="y">foo</p>
</div>
</body>

</html>
