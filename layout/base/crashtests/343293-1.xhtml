<html xmlns="http://www.w3.org/1999/xhtml">
<title>Testcase bug 343293 - Crash [@ nsLayoutUtils::GetFloatFromPlaceholder] using ::first-line, floats, caption and generated content</title>
<style>
*::first-line { }
*::before { content:"--"; }
</style>
<script>
function doe() {
document.getElementsByTagName('caption')[0].removeAttribute('style');
document.documentElement.offsetHeight;
document.getElementsByTagName('span')[0].removeAttribute('style');
}
window.onload=doe;
</script>

<caption style="float: left;"></caption>
<span style="float: right;"></span>
This should not crash Mozilla
</html>