<!DOCTYPE HTML>
<html>
  <!-- Test: textarea with maxlength is -moz-ui-valid if the user edits and it's not too long -->
  <head>
    <style>
      :-moz-ui-valid { background-color:green; }
      :-moz-ui-invalid { background-color:red; }
      * { background-color:white; }
    </style>
    <script src="/tests/SimpleTest/EventUtils.js"></script>
    <script>
      function runTest() {
        var textarea = document.getElementById('textarea');
        textarea.setSelectionRange(textarea.value.length, textarea.value.length)
        textarea.focus();
        synthesizeKey("KEY_Backspace"); // so that it becomes invalid first
        textarea.blur();
        textarea.focus();
        synthesizeKey("KEY_Backspace");
        textarea.blur(); // to hide the caret
        document.documentElement.className='';
      }
    </script>
  </head>
  <body onload="runTest()">
    <textarea id="textarea" maxlength="3">foooo</textarea>
  </body>
</html>
