<html>
<head><title>Testcase for bug 386386</title>
<!--
https://bugzilla.mozilla.org/show_bug.cgi?id=386386
-->
  <script type="application/javascript" src="/tests/SimpleTest/SimpleTest.js"></script>
</head>
<body>

<iframe id="test386386" src="data:application/vnd.mozilla.xul+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%3F%3E%0A%3Cwindow%3E%3C/window%3E"></iframe>

<script class="testbody" type="application/javascript">

function boom()
{
  var XUL_NS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
  var doc = document.getElementById("test386386").contentDocument;
  var observes = doc.createElementNS(XUL_NS, 'observes');
  doc.removeChild(doc.documentElement);
  doc.appendChild(observes);
  is(0, 0, "Test is successful if we get here without crashing");
  SimpleTest.finish();
}

function do_test() {
  setTimeout(boom, 200);
}
SimpleTest.waitForExplicitFinish();
addLoadEvent(do_test);
</script>

</body>
</html>
