<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>fetchpriority</title>
</head>
<body>
<script>
  onload = function() {
    const kData = [
      // as="fetch"
      { as: "fetch", href: "dummy.txt?1", fetchPriority: "low" },
      { as: "fetch", href: "dummy.txt?2", fetchPriority: "high" },
      { as: "fetch", href: "dummy.txt?3", fetchPriority: "auto" },
      { as: "fetch", href: "dummy.txt?4" },
      // as="font"
      { as: "font", href: "dummy.font?1", fetchPriority: "low" },
      { as: "font", href: "dummy.font?2", fetchPriority: "high" },
      { as: "font", href: "dummy.font?3", fetchPriority: "auto" },
      { as: "font", href: "dummy.font?4" },
      // as="image"
      { as: "image", href: "dummy.image?1", fetchPriority: "low" },
      { as: "image", href: "dummy.image?2", fetchPriority: "high" },
      { as: "image", href: "dummy.image?3", fetchPriority: "auto" },
      { as: "image", href: "dummy.image?4" },
      // as="script"
      { as: "script", href: "dummy.script?1", fetchPriority: "low" },
      { as: "script", href: "dummy.script?2", fetchPriority: "high" },
      { as: "script", href: "dummy.script?3", fetchPriority: "auto" },
      { as: "script", href: "dummy.script?4" },
      // as="style"
      { as: "style", href: "dummy.css?1", fetchPriority: "low" },
      { as: "style", href: "dummy.css?2", fetchPriority: "high" },
      { as: "style", href: "dummy.css?3", fetchPriority: "auto" },
      { as: "style", href: "dummy.css?4" }
    ];

    let allLinkElements = [];
    for (data of kData) {
      let linkElement = document.createElement("link");
      linkElement.rel = "preload";
      linkElement.as = data.as;
      linkElement.href = data.href;

      if ("fetchPriority" in data) {
        linkElement.fetchPriority = data.fetchPriority;
      }

      allLinkElements.push(linkElement);
    }

    document.head.append(...allLinkElements)

    opener.postMessage("ChildLoaded", "*");
  }
</script>
</body>
</html>
