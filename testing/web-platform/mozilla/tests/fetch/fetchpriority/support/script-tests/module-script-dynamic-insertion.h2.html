<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>fetchpriority</title>
</head>
<body>
<script>
  onload = function() {
    const kData = [
        { src: "../resources/dummy.js?1", fetchPriority: "low"},
        { src: "../resources/dummy.js?2", fetchPriority: "high"},
        { src: "../resources/dummy.js?3", fetchPriority: "auto"},
        { src: "../resources/dummy.js?4"}
    ];

    let allScriptElements = [];
    for (data of kData) {
      let scriptElement = document.createElement("script");
      scriptElement.src = data.src;

      scriptElement.type = "module";

      if ("fetchPriority" in data) {
        scriptElement.fetchPriority = data.fetchPriority;
      }

      allScriptElements.push(scriptElement);
    }

    document.head.append(...allScriptElements)

    opener.postMessage("ChildLoaded", "*");
  }
</script>
</body>
</html>
