[getdisplaymedia.https.html]
  disabled:
    if (os == "android") and e10s: bug 1550895 (frequently fails on geckoview)
  expected:
    if webrender and not debug and (os == "linux") and not fission: ["OK", "TIMEOUT"]
    if webrender and not debug and (os == "linux") and fission: ["OK", "TIMEOUT"]
    if webrender and not debug and (os == "win"): ["OK", "TIMEOUT"]
  [getDisplayMedia() with getSettings]
    expected:
      if webrender and not debug and (os == "win") and not fission: ["FAIL", "TIMEOUT"]
      if webrender and not debug and (os == "win") and fission: ["FAIL", "TIMEOUT", "NOTRUN"]
      if webrender and not debug and (os == "linux") and fission: ["FAIL", "NOTRUN", "TIMEOUT"]
      if webrender and not debug and (os == "linux") and not fission: ["FAIL", "TIMEOUT", "NOTRUN"]
      FAIL

  [getDisplayMedia({"video":{"height":{"max":0}}}) must fail with OverconstrainedError]
    expected:
      if (os == "linux") and not debug and webrender and fission: ["PASS", "NOTRUN", "TIMEOUT"]
      if (os == "linux") and not debug and webrender and not fission: ["PASS", "TIMEOUT", "NOTRUN"]

  [getDisplayMedia({"video":{"width":{"max":-1}}}) must fail with OverconstrainedError]
    expected:
      if not fission and webrender and (os == "linux") and not debug: ["PASS", "TIMEOUT", "NOTRUN"]
      if fission and not debug and (os == "linux"): ["PASS", "NOTRUN"]
      if fission and not debug and (os == "win"): ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"frameRate":{"max":-1}}}) must fail with OverconstrainedError]
    expected:
      if not fission and webrender and (os == "linux") and not debug: ["PASS", "TIMEOUT", "NOTRUN"]
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN", "TIMEOUT"]
      if fission and (os == "win"): ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"frameRate":{"max":0}}}) must fail with OverconstrainedError]
    expected:
      if not fission and webrender and (os == "linux") and not debug: ["PASS", "TIMEOUT", "NOTRUN"]
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN", "TIMEOUT"]
      if fission and (os == "win"): ["PASS", "TIMEOUT"]

  [getDisplayMedia() resolves with stream with video track]
    expected:
      if not fission and webrender and (os == "linux") and not debug: ["PASS", "TIMEOUT", "NOTRUN"]
      if fission and not debug and (os == "win"): ["PASS", "NOTRUN"]
      if fission and not debug and (os == "linux"): ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"height":{"max":-1}}}) must fail with OverconstrainedError]
    expected:
      if not fission and webrender and (os == "linux") and not debug: ["PASS", "TIMEOUT", "NOTRUN"]
      if fission and not debug and (os == "win"): ["PASS", "NOTRUN"]
      if fission and not debug and (os == "linux"): ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"frameRate":{"max":4},"height":{"max":240}}}) must be constrained]
    expected:
      if not fission and webrender and (os == "linux") and not debug: ["PASS", "TIMEOUT"]
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"width":{"max":0}}}) must fail with OverconstrainedError]
    expected:
      if not fission and webrender and (os == "linux") and not debug: ["PASS", "TIMEOUT", "NOTRUN"]
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"frameRate":{"max":4},"width":{"max":360},"height":{"max":240}}}) must be constrained]
    expected:
      if not fission and webrender and (os == "linux") and not debug: ["PASS", "TIMEOUT", "NOTRUN"]
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN", "TIMEOUT"]

  [getDisplayMedia({"video":{"height":{"max":240}}}) must be constrained]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"width":{"max":360}}}) must be constrained]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":false,"audio":true}) must fail with TypeError]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":true,"audio":true}) must succeed with video maybe audio]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"height":{"min":240}}}) must fail with TypeError]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"frameRate":{"max":4},"width":{"max":360}}}) must be constrained]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"width":{"min":320}}}) must fail with TypeError]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "TIMEOUT"]

  [getDisplayMedia({"video":{"width":{"exact":320}}}) must fail with TypeError]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"frameRate":{"exact":4}}}) must fail with TypeError]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"frameRate":{"min":4}}}) must fail with TypeError]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"height":{"exact":240}}}) must fail with TypeError]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"frameRate":{"max":4}}}) must be constrained]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

  [getDisplayMedia({"video":{"width":{"max":360},"height":{"max":240}}}) must be constrained]
    expected:
      if fission and (os == "linux") and not debug: ["PASS", "NOTRUN"]

