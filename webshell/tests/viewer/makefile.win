#!nmake
#
# The contents of this file are subject to the Netscape Public License
# Version 1.0 (the "NPL"); you may not use this file except in
# compliance with the NPL.  You may obtain a copy of the NPL at
# http://www.mozilla.org/NPL/
#
# Software distributed under the NPL is distributed on an "AS IS" basis,
# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the NPL
# for the specific language governing rights and limitations under the
# NPL.
#
# The Initial Developer of this code under the NPL is Netscape
# Communications Corporation.  Portions created by Netscape are
# Copyright (C) 1998 Netscape Communications Corporation.  All Rights
# Reserved.

DEPTH=..\..\..
IGNORE_MANIFEST=1

DIRS=public

MAKE_OBJ_TYPE   = EXE
PROGRAM = .\$(OBJDIR)\viewer.exe
RESFILE = viewer.res
!ifdef MOZ_DEBUG
RCFLAGS=/d_DEBUG
!endif

MISCDEP=                        \
 $(DIST)\lib\DebugRobot.lib     \
 $(DIST)\lib\raptorweb.lib      \
 $(DIST)\lib\xpcom32.lib        \
 $(LIBNSPR)                     \
 $(DIST)\lib\plc3.lib


OBJS =                                      \
	.\$(OBJDIR)\nsBaseDialog.obj     \
	.\$(OBJDIR)\nsFindDialog.obj     \
	.\$(OBJDIR)\nsImageInspectorDialog.obj     \
	.\$(OBJDIR)\nsTableInspectorDialog.obj     \
	.\$(OBJDIR)\nsPrintSetupDialog.obj     \
	.\$(OBJDIR)\nsXPBaseWindow.obj     \
	.\$(OBJDIR)\nsBrowserWindow.obj     \
	.\$(OBJDIR)\nsEditorMode.obj        \
	.\$(OBJDIR)\nsSetupRegistry.obj     \
	.\$(OBJDIR)\nsViewerApp.obj         \
	.\$(OBJDIR)\nsWebCrawler.obj        \
	.\$(OBJDIR)\nsWinMain.obj           \
	.\$(OBJDIR)\JSConsole.obj           \
	$(NULL)

LINCS=  \
  -I$(PUBLIC)\raptor \
  -I$(PUBLIC)\xpcom \
  -I$(PUBLIC)\dom \
  -I$(PUBLIC)\js \
  -I$(PUBLIC)\netlib \
  -I$(PUBLIC)\java \
  -I$(PUBLIC)\plugin \
  -I$(PUBLIC)\pref \
  -I$(PUBLIC)\editor \
  -I$(PUBLIC)\uconv \
  -I$(PUBLIC)\strres \
  -I$(PUBLIC)\locale \
  -I$(PUBLIC)\lwbrk \
  -I$(PUBLIC)\unicharutil \
  -I$(PUBLIC)\intl \
  -I$(PUBLIC)\rdf \
  -I$(PUBLIC)\silentdl \
  -I$(PUBLIC)\walletlib \
!if defined(NGPREFS)
  -I$(PUBLIC)\ngprefs \
!endif
!ifdef MOZ_FULLCIRCLE
  -I$(PUBLIC)\fulls32 \
!endif
  -I$(PUBLIC)\oji \
  -I$(PUBLIC)\caps \
  $(NULL)

MYLIBS=                         \
 $(DIST)\lib\raptorbase.lib     \
 $(DIST)\lib\raptorgfxwin.lib   \
 $(DIST)\lib\raptorhtml.lib     \
 $(DIST)\lib\raptorweb.lib      \
 $(DIST)\lib\raptorwidget.lib     \
 $(DIST)\lib\raptorhtmlpars.lib         \
 $(DIST)\lib\DebugRobot.lib     \
 $(DIST)\lib\xpcom32.lib        \
 $(DIST)\lib\js32$(VERSION_NUMBER).lib \
 $(LIBNSPR)                     \
 $(DIST)\lib\plc3.lib       \
 $(DIST)\lib\netlib.lib \
 $(DIST)\lib\jsdom.lib          \
 comdlg32.lib                   \
!if defined(NGPREFS)
 ole32.lib                      \
!endif
!ifdef MOZ_FULLCIRCLE
 $(DIST)\lib\fulls32.lib \
!endif
 $(NULL)

LLIBS= $(MYLIBS)                \
 shell32.lib                     \
 -SUBSYSTEM:CONSOLE

include <$(DEPTH)\config\rules.mak>

!ifdef MOZ_NO_DEBUG_RTL
OS_CFLAGS = $(OS_CFLAGS) -DMOZ_NO_DEBUG_RTL
!endif

!if defined(NGPREFS)
OS_CFLAGS = $(OS_CFLAGS) -DNGPREFS
!endif

install:: $(PROGRAM)
	$(MAKE_INSTALL) $(PROGRAM) $(DIST)\bin
	$(MAKE_INSTALL) resources\find.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) resources\printsetup.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) resources\image_props.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) resources\viewer.properties $(DIST)\bin\res
	$(MAKE_INSTALL) samples\test0.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test1.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test2.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test3.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test4.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test5.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test6.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test7.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test8.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test8siz.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test8sca.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test8tab.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test8dom.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test_ed.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test9.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test9a.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test9b.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\raptor.jpg $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\Anieyes.gif $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\gear1.gif $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\rock_gra.gif $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\bg.jpg $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test10.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test11.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test12.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test13.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test_pr.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test_gfx.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\test_lbox.html $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\toolbarTest1.xul $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\treeTest1.xul $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\xulTest.css $(DIST)\bin\res\samples
	$(MAKE_INSTALL) samples\treeTest1.css $(DIST)\bin\res\samples
	$(MAKE_INSTALL) throbber\anim.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims00.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims01.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims02.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims03.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims04.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims05.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims06.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims07.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims08.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims09.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims10.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims11.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims12.gif $(DIST)\bin\res\throbber
	$(MAKE_INSTALL) throbber\anims13.gif $(DIST)\bin\res\throbber

clobber::
	rm -f $(DIST)\bin\viewer.exe
	rm -f $(DIST)\bin\res\samples\find.html
	rm -f $(DIST)\bin\res\samples\printsetup.html
	rm -f $(DIST)\bin\res\samples\test0.html
	rm -f $(DIST)\bin\res\samples\test1.html
	rm -f $(DIST)\bin\res\samples\test2.html
	rm -f $(DIST)\bin\res\samples\test3.html
	rm -f $(DIST)\bin\res\samples\test4.html
	rm -f $(DIST)\bin\res\samples\test5.html
	rm -f $(DIST)\bin\res\samples\test6.html
	rm -f $(DIST)\bin\res\samples\test7.html
	rm -f $(DIST)\bin\res\samples\test8.html
	rm -f $(DIST)\bin\res\samples\test8siz.html
	rm -f $(DIST)\bin\res\samples\test8sca.html
	rm -f $(DIST)\bin\res\samples\test8tab.html
	rm -f $(DIST)\bin\res\samples\test8dom.html
	rm -f $(DIST)\bin\res\samples\test_ed.html
	rm -f $(DIST)\bin\res\samples\test9.html
	rm -f $(DIST)\bin\res\samples\test9a.html
	rm -f $(DIST)\bin\res\samples\test9b.html
	rm -f $(DIST)\bin\res\samples\raptor.jpg
	rm -f $(DIST)\bin\res\samples\Anieyes.gif
	rm -f $(DIST)\bin\res\samples\gear1.gif
	rm -f $(DIST)\bin\res\samples\rock_gra.gif
	rm -f $(DIST)\bin\res\samples\bg.jpg
	rm -f $(DIST)\bin\res\samples\test10.html
	rm -f $(DIST)\bin\res\samples\test11.html
	rm -f $(DIST)\bin\res\samples\test12.html
	rm -f $(DIST)\bin\res\samples\test_pr.html
	rm -f $(DIST)\bin\res\samples\test_gfx.html
	rm -f $(DIST)\bin\res\samples\test_lbox.html
	rm -f $(DIST)\bin\res\throbber\anim.gif
	rm -f $(DIST)\bin\res\throbber\anims00.gif
	rm -f $(DIST)\bin\res\throbber\anims01.gif
	rm -f $(DIST)\bin\res\throbber\anims02.gif
	rm -f $(DIST)\bin\res\throbber\anims03.gif
	rm -f $(DIST)\bin\res\throbber\anims04.gif
	rm -f $(DIST)\bin\res\throbber\anims05.gif
	rm -f $(DIST)\bin\res\throbber\anims06.gif
	rm -f $(DIST)\bin\res\throbber\anims07.gif
	rm -f $(DIST)\bin\res\throbber\anims08.gif
	rm -f $(DIST)\bin\res\throbber\anims09.gif
	rm -f $(DIST)\bin\res\throbber\anims10.gif
	rm -f $(DIST)\bin\res\throbber\anims11.gif
	rm -f $(DIST)\bin\res\throbber\anims12.gif
	rm -f $(DIST)\bin\res\throbber\anims13.gif
