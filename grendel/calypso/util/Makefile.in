#!gmake
#
# The contents of this file are subject to the Mozilla Public License
# Version 1.0 (the "License"); you may not use this file except in
# compliance with the License.  You may obtain a copy of the License at
# http://www.mozilla.org/MPL/
# 
# Software distributed under the License is distributed on an "AS IS"
# basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See
# the License for the specific language governing rights and limitations
# under the License.
# 
# The Original Code is the Grendel mail/news client.
# 
# The Initial Developer of the Original Code is Netscape Communications
# Corporation.  Portions created by Netscape are Copyright (C) 1997
# Netscape Communications Corporation.  All Rights Reserved.

SRCS=						\
	Abacus.java				\
	ArrayEnumeration.java			\
	Assert.java				\
	AssertionError.java			\
	AssertionException.java			\
	Atom.java				\
	AtomHashtable.java			\
	AttributeValuePair.java			\
	ByteBuf.java				\
	ByteLineBuffer.java			\
	ByteToCharConverterEnumeration.java	\
	CacheOutputStream.java			\
	CharArray.java				\
	CharArrayIterator.java			\
	CharToByteConverterEnumeration.java	\
	ClasspathEntryEnumeration.java		\
	Comparer.java				\
	ConfigUtils.java			\
	Counter.java				\
	DataExtension.java			\
	DefaultPreferences.java			\
	EnumerationEnumerator.java		\
	HashtableBase.java			\
	HashtableLite.java			\
	HashtableRecycler.java			\
	IDMap.java				\
	LineBufferingInputStream.java		\
	ListenerList.java			\
	ListenerListState.java			\
	MemoryManager.java			\
	MemoryMonitor.java			\
	MemoryPressure.java			\
	NetworkDate.java			\
	NullEnumeration.java			\
	NullJavaEnumeration.java		\
	Preferences.java			\
	PreferencesBase.java			\
	PreferencesFactory.java			\
	PrefetchEnumeration.java		\
	QSort.java				\
	RWLock.java				\
	RandomAccessFileWithByteLines.java	\
	Recycler.java				\
	SelfTest.java				\
	SelfTestAtom.java			\
	SelfTestException.java			\
	SelfTestIDMap.java			\
	SelfTestRWLock.java			\
	SignedInteger.java			\
	SingleEnumeration.java			\
	StringBuf.java				\
	StringBufRecycler.java			\
	StringUtils.java			\
	TempFile.java				\
	TimeBomb.java				\
	URLClassLoader.java			\
	Vec.java				\
	VectorRecycler.java			\
	WeakLink.java				\
	WeakLinkArray.java			\
	WeakLinkArrayEnumeration.java		\
	$(NULL)

TOPDIR          = @top_srcdir@

CLASSPATH_NEW   = ${CLASSPATH}:$(TOPDIR)/..:$(TOPDIR)

JAVAC           = @java_compiler@

JAVA            = @java_run@

RM              = rm -f

OBJS            = $(subst .java,.class,$(SRCS))

.SUFFIXES: .java .class

.java.class:
	$(JAVAC) -classpath $(CLASSPATH_NEW) -J-mx64m -g $*.java

all:: $(OBJS)

clean::
	$(RM) *.class

distclean::
	$(RM) *.class *~ core Makefile

all clean distclean::
	@sd="$(SUBDIRS)" ;              \
	for dir in $$sd; do             \
	  ( cd $$dir ; $(MAKE) $@ );    \
	done


