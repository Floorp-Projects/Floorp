# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# This file contains a definition of the scalar probes that are recorded in Telemetry.
# They are submitted with the "main" pings and can be inspected in about:telemetry.

# The following section contains the accessibility scalars.
a11y:
  always_underline_links:
    bug_numbers:
      - 1835194
    description: >
      Bool tracking if the user has always underline links enabled in firefox.
    expires: never
    kind: boolean
    notification_emails:
      - accessibility@mozilla.com
      - mreschenberg@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
    keyed: false

  use_system_colors:
    bug_numbers:
      - 1835194
    description: >
      Bool tracking if the user has system colors enabled in firefox.
    expires: never
    kind: boolean
    notification_emails:
      - accessibility@mozilla.com
      - mreschenberg@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
    keyed: false

  HCM_background:
    bug_numbers:
      - 1694717
    description: >
      Unsigned int tracking the user's prefered background color \
      (logged when HCM is enabled).
    expires: never
    kind: uint
    notification_emails:
      - accessibility@mozilla.com
      - mreschenberg@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
    keyed: false

  HCM_foreground:
    bug_numbers:
      - 1694717
    description: >
      Unsigned int tracking the user's prefered foreground color \
      (logged when HCM is enabled).
    expires: never
    kind: uint
    notification_emails:
      - accessibility@mozilla.com
      - mreschenberg@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
    keyed: false

  backplate:
    bug_numbers:
      - 1539212
    description: >
      Boolean tracking if the user has the backplate preference enabled or disabled.
    expires: never
    kind: boolean
    notification_emails:
      - accessibility@mozilla.com
      - mreschenberg@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
    keyed: false

  instantiators:
    bug_numbers:
      - 1323069
      - 1462238
    description: >
      The leaf name and version number of the binary for the process responsible
      for remotely instantiating a11y.
    expires: never
    kind: string
    notification_emails:
      - accessibility@mozilla.com
      - jteh@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
    keyed: false

  invert_colors:
    bug_numbers:
      - 1794626
    description: >
      Boolean tracking if the user has an invert colors OS
      setting enabled.
    expires: never
    kind: boolean
    notification_emails:
      - accessibility@mozilla.com
      - mreschenberg@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
    keyed: false

  theme:
    bug_numbers:
      - 1022528
    description: >
      OS high contrast or other accessibility theme is enabled.
      The result is split into keys which represent the values of
      browser.display.document_color_use: "default", "always", or "never".
    keyed: true
    expires: never
    kind: boolean
    notification_emails:
      - accessibility@mozilla.com
      - eisaacson@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

# The following section contains the browser engagement scalars.
browser.engagement:
  max_concurrent_tab_count:
    bug_numbers:
      - 1271304
    description: >
      The count of maximum number of tabs open during a subsession,
      across all windows, including tabs in private windows and restored
      at startup.
    expires: never
    kind: uint
    notification_emails:
      - rweiss@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  tab_open_event_count:
    bug_numbers:
      - 1271304
    description: >
      The count of tab open events per subsession, across all windows, after the
      session has been restored. This includes tab open events from private windows
      and from manual session restorations (i.e. after crashes and from about:home).
    expires: never
    kind: uint
    notification_emails:
      - rweiss@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  max_concurrent_window_count:
    bug_numbers:
      - 1271304
    description: >
      The count of maximum number of browser windows open during a subsession. This
      includes private windows and the ones opened when starting the browser.
    expires: never
    kind: uint
    notification_emails:
      - rweiss@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  window_open_event_count:
    bug_numbers:
      - 1271304
    description: >
      The count of browser window open events per subsession, after the session
      has been restored. The count includes private windows and the ones from manual
      session restorations (i.e. after crashes and from about:home).
    expires: never
    kind: uint
    notification_emails:
      - rweiss@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  max_concurrent_tab_pinned_count:
    bug_numbers:
      - 1505535
    description: >
      The count of maximum number of pinned tabs open during a subsession. This
      includes private windows and the ones opened when starting the browser.
      Starting Firefox 85 this includes number of restored pinned tabs at
      startup.
    expires: never
    kind: uint
    notification_emails:
      - bmiroglio@mozilla.com
      - aoprea@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  tab_pinned_event_count:
    bug_numbers:
      - 1505535
    description: >
      The count of tab pinned events per subsession, across all windows, after the
      session has been restored. This includes tab pinned events from private windows.
    expires: never
    kind: uint
    notification_emails:
      - bmiroglio@mozilla.com
      - aoprea@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  tab_unload_count:
    bug_numbers:
      - 1715858
    description: >
      The count of tab unload events by TabUnloader due to a low-memory situation.
    expires: never
    kind: uint
    notification_emails:
      - tkikuchi@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  tab_reload_count:
    bug_numbers:
      - 1715858
    description: >
      The count of tab reload events by the user after unloaded.
    expires: never
    kind: uint
    notification_emails:
      - tkikuchi@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  total_uri_count:
    bug_numbers:
      - 1271313
      - 1529232
    description: >
      The count of the total non-unique http(s) URIs visited in a subsession, including
      page reloads, after the session has been restored. URIs on minimized or background
      tabs may also be counted towards this. Private browsing is not included in this
      count.
    expires: never
    kind: uint
    notification_emails:
      - rweiss@mozilla.com
      - loines@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'main'
      - 'account-ecosystem'

  total_uri_count_normal_and_private_mode:
    bug_numbers:
      - 1535169
    description: >
      The count of the total non-unique http(s) URIs visited in a subsession, including
      page reloads, after the session has been restored. URIs on minimized or background
      tabs may also be counted towards this. Private browsing is included in this count.
    expires: never
    kind: uint
    notification_emails:
      - rweiss@mozilla.com
      - loines@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'main'
      - 'account-ecosystem'

  unfiltered_uri_count:
    bug_numbers:
      - 1304647
    description: >
      The count of the total non-unique URIs visited in a subsession, not restricted to
      a specific protocol, including page reloads and about:* pages (other than initial
      pages such as about:blank, ...), after the session has been restored. This does
      not include background page requests and URIs from embedded pages or private browsing.
    expires: never
    kind: uint
    notification_emails:
      - bcolloran@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  unique_domains_count:
    bug_numbers:
      - 1271310
    description: >
      The count of the unique domains visited in a subsession, after the session
      has been restored. Subdomains under eTLD are aggregated after the first level
      (i.e. test.example.com and other.example.com are only counted once).
      This does not include background page requests and domains from embedded pages
      or private browsing. The count is limited to 100 unique domains.
    expires: never
    kind: uint
    notification_emails:
      - rweiss@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  active_ticks:
    bug_numbers:
      - 1376942
      - 1545172
    description: >
      The count of the number of five-second intervals ('ticks') the user
      was considered 'active' in a subsession. Session activity involves keyboard or mouse
      interaction with the application. It does not take into account whether or not the window
      has focus or is in the foreground, only if it is receiving these interaction events.
    expires: never
    kind: uint
    notification_emails:
      - bcolloran@mozilla.com
      - loines@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'main'
      - 'account-ecosystem'

  profile_count:
    bug_numbers:
      - 1647422
      - 1356265
    description: >
      The count of the browser profiles on the current system. This counts profiles that have been
      used across all OS user accounts on machine since this probe was added. The value persists
      across installs. A value of 0 is reported if there is an error determining the correct count.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    operating_systems:
      - windows

  bookmarks_toolbar_bookmark_added:
    bug_numbers:
      - 1665391
    description: >
      The count of bookmarks added to the bookmarks toolbar. This counts bookmarks created on the
      bookmarks toolbar and bookmarks moved to the bookmarks toolbar.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
      - jaws@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  bookmarks_toolbar_bookmark_opened:
    bug_numbers:
      - 1665391
    description: >
      The count of bookmarks opened from the Bookmarks Toolbar. This counts bookmarks opened on the
      toolbar and bookmarks opened from the 'symlinked' Other Bookmarks folder on the
      Bookmarks Toolbar. It does not count Bookmarks Toolbar bookmarks opened via the Library,
      Bookmarks Menu, or other UI since the goal is to measure interactions that pass through the toolbar.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
      - jaws@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  sessionrestore_interstitial:
    bug_numbers:
      - 1671271
    description: >
      Whether we show about:sessionrestore or not. Split by key, which indicates
      why we showed the item or not. Specifically, 'deferred_restore' means we
      didn't autorestore and thus didn't show the interstitial; 'autorestore'
      indicates we autorestored without showing the interstitial.
      'shown_old_session', 'shown_only_about_welcomeback',
      'shown_many_crashes', 'shown_many_crashes_old_session' all indicate we did
      show the interstitial because of a crash, and the text after 'shown'
      indicates what secondary reason there was to show this page (as we don't
      show it for 'just' one crash).
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - gijs@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  session_time_including_suspend:
    bug_numbers:
      - 1205985
    description: >
      The duration of the session in milliseconds, including the time the device
      was suspended.
    expires: never
    kind: uint
    notification_emails:
      - padenot@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  session_time_excluding_suspend:
    bug_numbers:
      - 1205985
    description: >
      The duration of the session in milliseconds, excluding the time the device
      was suspended.
    expires: never
    kind: uint
    notification_emails:
      - padenot@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'


# The following section contains the browser engagement scalars.
browser.engagement.navigation:
  urlbar:
    bug_numbers:
      - 1271313
    description: >
      The count URI loads triggered in a subsession from the urlbar (awesomebar),
      broken down by the originating action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  urlbar_handoff:
    bug_numbers:
      - 1732429
    description: >
      The count URI loads triggered in a subsession from the urlbar via handoff,
      broken down by the originating action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  urlbar_persisted:
    bug_numbers:
      - 1779471
    description: >
      The count of URI loads triggered in a subsession from the urlbar after the
      search term was shown in the urlbar, broken down by the originating action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  urlbar_searchmode:
    bug_numbers:
      - 1654680
    description: >
      The count URI loads triggered in a subsession from the urlbar's search
      mode, broken down by the originating action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  searchbar:
    bug_numbers:
      - 1271313
    description: >
      The count URI loads triggered in a subsession from the searchbar,
      broken down by the originating action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  about_home:
    bug_numbers:
      - 1271313
    description: >
      The count URI loads triggered in a subsession from about:home,
      broken down by the originating action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  about_newtab:
    bug_numbers:
      - 1271313
    description: >
      The count URI loads triggered in a subsession from about:newtab,
      broken down by the originating action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  contextmenu:
    bug_numbers:
      - 1271313
    description: >
      The count URI loads triggered in a subsession from the contextmenu,
      broken down by the originating action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  webextension:
    bug_numbers:
      - 1492233
    description: >
      The count URI loads triggered in a subsession from a webextension.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

browser.startup:
  abouthome_cache_result:
    bug_numbers:
      - 1622263
      - 1614351
      - 1683101
      - 1714258
      - 1730042
      - 1754641
      - 1781978
      - 1811151
      - 1841926
    description: >
      How the about:home startup cache functioned on startup.

      0: Result value was never set (error case)
      1: Cache did not exist
      2: Cache page stream was corrupt / inaccessible
      3: Cache script stream was corrupt / inaccessible
      4: Cache was invalidated by a version bump
      5: Cache was valid, but read too late to be useful.
      6: Cache was valid and used.
      7: Cache is disabled.
      8: User did not load about:home on its own by default.
      9: Cache is disabled because about:newtab preloading is disabled.

    expires: never
    kind: uint
    notification_emails:
      - mconley@mozilla.com
      - perf-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  abouthome_cache_shutdownwrite:
    bug_numbers:
      - 1622263
      - 1614351
      - 1683101
      - 1714258
      - 1730042
      - 1754641
      - 1781978
      - 1811151
      - 1841926
    description: >
      True if the about:home startup cache was written via the AsyncShutdown
      blocker.

    expires: never
    kind: boolean
    notification_emails:
      - mconley@mozilla.com
      - perf-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

# The following section contains the browser usage scalars.
browser.usage:
  graphite:
    bug_numbers:
      - 1331915
    description: >
      The number of times a graphite2 font has been loaded.
    expires: "65"
    kind: uint
    notification_emails:
      - tom@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'all'

  plugin_instantiated:
    bug_numbers:
      - 1381591
    description: >-
      The number of plugin instances that were created.
    expires: never  # Jan-2021 but we don't have a version number for that
    kind: uint
    notification_emails:
      - bsmedberg@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
      - 'content'

browser.ui:
  toolbar_widgets:
    bug_numbers:
      - 1620358
    description: >
      The widgets in the toolbars.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: boolean
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  customized_widgets:
    bug_numbers:
      - 1620358
    description: >
      Records when widgets are added, removed or moved in the UI.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

browser.ui.interaction:
  all_tabs_panel_dragstart_tab_event_count:
    bug_numbers:
      - 1804722
    description: >
      Records a count of how many times a drag event started for a tab within the All
      Tabs panel.
    expires: never
    kind: uint
    notification_emails:
      - shong@mozilla.com
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  all_tabs_panel_entrypoint:
    bug_numbers:
      - 1804722
    description: >
      Records a count of how many times the All Tabs Panel was opened, keyed on a string
      describing the entrypoint.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  keyboard:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with keyboard shortcuts.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  menu_bar:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with items in the menu bar.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  tabs_bar:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with items in the tab bar.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  nav_bar:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with items in the nav bar.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  bookmarks_bar:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with items in the bookmarks bar.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  app_menu:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with items in the app menu.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  tabs_context:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with items in the tab context menu.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  tabs_context_entrypoint:
    bug_numbers:
      - 1804722
    description: >
      Records a count for each entrypoint (the container of the trigger node) when an
      item from the tabs context menu is selected.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  content_context:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with items in the content context menu.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  overflow_menu:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with items in the overflow menu.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  unified_extensions_area:
    bug_numbers:
      - 1800114
    description: >
      Records a count of interactions with items in the Unified Extensions area.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - dtownsend@mozilla.com
      - mconley@mozilla.com
      - wdurand@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  pinned_overflow_menu:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with items in the pinned area of the
      overflow menu.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  pageaction_urlbar:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with page action items in the url bar.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  pageaction_panel:
    bug_numbers:
      - 1620358
    description: >
      Records a count of interactions with page action items in the panel.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preferences_paneHome:
    bug_numbers:
      - 1620358
    description: >
      Records the items interacted with in the Home section of preferences.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preferences_paneGeneral:
    bug_numbers:
      - 1620358
    description: >
      Records the items interacted with in the General section of preferences.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preferences_panePrivacy:
    bug_numbers:
      - 1620358
    description: >
      Records the items interacted with in the Privacy section of preferences.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preferences_paneSearch:
    bug_numbers:
      - 1620358
    description: >
      Records the items interacted with in the Search section of preferences.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preferences_paneSearchResults:
    bug_numbers:
      - 1620358
    description: >
      Records the items interacted with in the Search results section of
      preferences.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preferences_paneSync:
    bug_numbers:
      - 1620358
    description: >
      Records the items interacted with in the Sync section of preferences.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preferences_paneContainers:
    bug_numbers:
      - 1620358
    description: >
      Records the items interacted with in the Containers section of
      preferences.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preferences_paneExperimental:
    bug_numbers:
      - 1620358
      - 1651986
    description: >
      Records the items interacted with in the Experimental section of
      preferences.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preferences_paneMoreFromMozilla:
    bug_numbers:
      - 1738187
    description: >
      Records the items interacted with in the More From Mozilla section of
      preferences.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - pdahiya@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preferences_paneUnknown:
    bug_numbers:
      - 1620358
      - 1651986
    description: >
      Records the items interacted with in any other section of preferences.
      See https://firefox-source-docs.mozilla.org/browser/BrowserUsageTelemetry.html
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - shong@mozilla.com
      - dtownsend@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  textrecognition_error:
    bug_numbers:
      - 1783261
    description: >
      Recorded when text recognition in images fails for some unknown reason.
    notification_emails:
      - gtatum@mozilla.com
      - nordzilla@mozilla.com
    expires: never
    kind: uint
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

cookie.banners:
  normal_window_service_mode:
    bug_numbers:
      - 1790781
      - 1804259
    description: >
      The pref value of the cookie banner service mode for normal windows.
    expires: never
    kind: boolean
    keyed: true
    notification_emails:
      - tihuang@mozilla.com
      - pbz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  private_window_service_mode:
    bug_numbers:
      - 1790781
      - 1804259
    description: >
      The pref value of the cookie banner service mode for private windows.
    expires: never
    kind: boolean
    keyed: true
    notification_emails:
      - tihuang@mozilla.com
      - pbz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  service_detect_only:
    bug_numbers:
      - 1809700
    description: >
      Tracks the value of the cookiebanners.service.detectOnly pref.
    expires: never
    kind: boolean
    notification_emails:
      - tihuang@mozilla.com
      - pbz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  rule_lookup_by_load:
    bug_numbers:
      - 1797073
      - 1804259
      - 1827765
      - 1850874
      - 1861317
    description: >
      Counts the number of hit/miss of cookie banner rule lookups for every
      load. We collect three types of counters, including counters for overall
      rule lookup, counters for cookie rule lookup and counters for click rule
      lookup. We also divide the counter by top-level loads and iframe loads.
    expires: '128'
    kind: uint
    keyed: true
    notification_emails:
      - tihuang@mozilla.com
      - pbz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  rule_lookup_by_domain:
    bug_numbers:
      - 1797073
      - 1804259
      - 1827765
      - 1850874
      - 1861317
    description: >
      Counts the number of hit/miss of cookie banner rule lookups for domain.
      We collect three types of counters, including counters for overall
      rule lookup, counters for cookie rule lookup and counters for click rule
      lookup. We also divide the counter by top-level loads and iframe loads.
      For each domain, we will only collect once.
    expires: '128'
    kind: uint
    keyed: true
    notification_emails:
      - tihuang@mozilla.com
      - pbz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

cookie.banners.click:
  result:
    bug_numbers:
      - 1797078
      - 1804259
      - 1827765
      - 1850874
      - 1861317
    description: >
      Given a matching cookie banner click rule, how often do we handle or fail
      to handle cookie banners, labelled by reason. The 'success' and 'fail'
      counters count the total numbers independently of the reason counters.
      Counters are incremented after the content window has been destroyed.
    expires: '128'
    keyed: true
    kind: uint
    notification_emails:
      - pbz@mozilla.com
      - tihuang@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'content'
    release_channel_collection: opt-out

gecko:
  version:
    bug_numbers:
      - 1611240
    description: >
      The version of the Gecko engine, example: '74.0a1'.
      It consists of the major and minor version, followed by the release life cycle phase.
      'a' stands for alpha or nightly, 'b' stands for beta.
      The number behind the release life cycle phase indicates minor releases within the phase.
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  build_id:
    bug_numbers:
      - 1611240
    description: >
      The build id of the Gecko engine, example: '20200205124310'.
      It contains the time the build was created and is used as a unique id for the build.
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

extensions.apis.dnr:
  startup_cache_entries:
    bug_numbers:
      - 1803363
      - 1850890
    description: >
      Counters for startup cache data hits or misses on initializating
      DNR rules for extensions loaded on application startup.
      The expected keys are 'hit' and 'miss'.
      This probe is mirrored from a Glean metric with the same name.
    keyed: true
    expires: '126'
    kind: uint
    notification_emails:
      - addons-dev-internal@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main
  evaluate_rules_count_max:
    bug_numbers:
      - 1803363
      - 1850890
    description: >
      Max amount of DNR rules being evaluated.
    expires: '126'
    kind: uint
    notification_emails:
      - addons-dev-internal@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

extensions.quarantinedDomains:

  listsize:
    bug_numbers:
      - 1840615
      - 1866196
    description: >
      Number of domains listed in the quarantined domains list pref for the client during
      this session.
    kind: uint
    expires: "130"
    notification_emails:
      - addons-dev-internal@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

  listhash:
    bug_numbers:
      - 1841683
      - 1866196
    description: >
      SHA1 cryptographic hash of the quarantined domains string pref.
    kind: string
    expires: "130"
    notification_emails:
      - addons-dev-internal@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

  remotehash:
    bug_numbers:
      - 1840615
      - 1866196
    description: >
      SHA1 cryptographic hash of the quarantined domains string pref as it was
      set based on the value got synced from the RemoteSettings collection.
    kind: string
    expires: "130"
    notification_emails:
      - addons-dev-internal@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

extensions.startupCache:
  write_byteLength:
    bug_numbers:
      - 1767336
    description: >
      The amount of bytes writted into the Extensions StartupCache file.
    expires: "128"
    kind: uint
    notification_emails:
      - addons-dev-internal@mozilla.com
      - lgreco@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main
  read_errors:
    bug_numbers:
      - 1767336
    description: >
      The amount of times an unexpected error has been raised while
      reading the Extensions StartupCache file
    expires: "128"
    kind: uint
    keyed: true
    notification_emails:
      - addons-dev-internal@mozilla.com
      - lgreco@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main
  load_time:
    bug_numbers:
      - 1767336
    description: >
      Time to load and deserialize the extensions startupCache data.
      This scalar is mirroring the never expiring Glean metric named
      extensions.startup_cache_load_time, which is defined in
      toolkit/components/extensions/metrics.yaml.
      Unlike the related glean metric, this scalar has an expiring date,
      set as a deadline to consider removing the mirrored scalar in
      favor to just use the Glean metric).
    expires: "125"
    kind: uint
    notification_emails:
      - addons-dev-internal@mozilla.com
      - lgreco@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

security:
  https_only_mode_enabled:
    bug_numbers:
      - 1620244
    description: >
      Measures user retention of the HTTPS-Only Mode.
      0 = never enabled, 1 = enabled, 2 = disabled (but was enabled)
    expires: never
    kind: uint
    notification_emails:
      - julianwels@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  https_only_mode_enabled_pbm:
    bug_numbers:
      - 1647719
    description: >
      Measures user retention of the HTTPS-Only Mode in Private Browsing.
      0 = https-only never enabled in PBM,
      1 = https-only enabled in PBM,
      2 = https-only disabled in PBM (but was enabled)
    expires: never
    kind: uint
    notification_emails:
      - julianwels@mozilla.com
      - ckerschb@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  global_privacy_control_enabled:
    bug_numbers:
      - 1734185
    description: >
      Measures user retention of the Global Privacy Control.
      0 = never enabled, 1 = enabled, 2 = disabled (but was enabled)
    expires: never
    kind: uint
    notification_emails:
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  client_auth_cert_usage:
    bug_numbers:
      - 1749884
    description: >
      Measures how many servers have requested a client authentication
      certificate (key: "requested") and how many times the user has opted to
      send one in response (key: "sent").
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - dkeeler@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main

pwmgr:
  potentially_breached_passwords:
    bug_numbers:
      - 1577808
    description: >
      The number of potentially breached passwords, as determined by
      LoginBreaches.getPotentialBreachesByLoginGUID.
    expires: never
    kind: uint
    notification_emails:
      - seceng-telemetry@mozilla.com
      - passwords-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

bloburl:
  resolve_stopped:
    bug_numbers:
      - 1843158
    description: >
      Counts how many times we do not resolve a blob URL
      because of different partition keys
    expires: "127"
    kind: uint
    notification_emails:
      - amadan@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - content

contentblocking:
  cryptomining_blocking_enabled:
    bug_numbers:
      - 1522919
    description: >
      True if cryptominer blocking is enabled globally at startup.
    expires: never
    kind: boolean
    notification_emails:
      - aedelstein@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main
  fingerprinting_blocking_enabled:
    bug_numbers:
      - 1522919
    description: >
      True if fingerprinter blocking is enabled globally at startup.
    expires: never
    kind: boolean
    notification_emails:
      - aedelstein@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main
  category:
    bug_numbers:
      - 1529425
    description: >
      This scalar reports the value of the content blocking category pref (0 = "standard", 1 = "strict", 2 = "custom", 3 = some other value, this is not supported).
    expires: never
    kind: uint
    notification_emails:
      - aedelstein@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main
  trackers_blocked_count:
    bug_numbers:
      - 1577030
      - 1610894
      - 1645088
      - 1678209
    description: >
      A count of the number of tracking events blocked.
    expires: never
    kind: uint
    notification_emails:
      - ewright@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

datasanitization:
  privacy_sanitize_sanitizeOnShutdown:
    bug_numbers:
      - 1589753
      - 1617241
      - 1645089
      - 1678210
    description: >
      A boolean reporting the value of the privacy.sanitize.sanitizeOnShutdown pref.
    expires: never
    kind: boolean
    notification_emails:
      - ewright@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main
  privacy_clearOnShutdown_cookies:
    bug_numbers:
      - 1589753
      - 1617241
      - 1645089
      - 1678210
    description: >
      A boolean reporting the value of the privacy.clearOnShutdown.cookies pref.
    expires: never
    kind: boolean
    notification_emails:
      - ewright@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main
  privacy_clearOnShutdown_history:
    bug_numbers:
      - 1589753
      - 1617241
      - 1645089
      - 1678210
    description: >
      A boolean reporting the value of the privacy.clearOnShutdown.history pref.
    expires: never
    kind: boolean
    notification_emails:
      - ewright@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main
  privacy_clearOnShutdown_formdata:
    bug_numbers:
      - 1589753
      - 1617241
      - 1645089
      - 1678210
    description: >
      A boolean reporting the value of the privacy.clearOnShutdown.formdata pref.
    expires: never
    kind: boolean
    notification_emails:
      - ewright@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main
  privacy_clearOnShutdown_downloads:
    bug_numbers:
      - 1589753
      - 1617241
      - 1645089
      - 1678210
    description: >
      A boolean reporting the value of the privacy.clearOnShutdown.downloads pref.
    expires: never
    kind: boolean
    notification_emails:
      - ewright@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main
  privacy_clearOnShutdown_cache:
    bug_numbers:
      - 1589753
      - 1617241
      - 1645089
      - 1678210
    description: >
      A boolean reporting the value of the privacy.clearOnShutdown.cache pref.
    expires: never
    kind: boolean
    notification_emails:
      - ewright@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main
  privacy_clearOnShutdown_sessions:
    bug_numbers:
      - 1589753
      - 1617241
      - 1645089
      - 1678210
    description: >
      A boolean reporting the value of the privacy.clearOnShutdown.sessions pref.
    expires: never
    kind: boolean
    notification_emails:
      - ewright@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main
  privacy_clearOnShutdown_offlineApps:
    bug_numbers:
      - 1589753
      - 1617241
      - 1645089
      - 1678210
    description: >
      A boolean reporting the value of the privacy.clearOnShutdown.offlineApps pref.
    expires: never
    kind: boolean
    notification_emails:
      - ewright@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main
  privacy_clearOnShutdown_siteSettings:
    bug_numbers:
      - 1589753
      - 1617241
      - 1645089
      - 1678210
    description: >
      A boolean reporting the value of the privacy.clearOnShutdown.siteSettings pref.
    expires: never
    kind: boolean
    notification_emails:
      - ewright@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main
  privacy_clearOnShutdown_openWindows:
    bug_numbers:
      - 1589753
      - 1617241
      - 1645089
      - 1678210
    description: >
      A boolean reporting the value of the privacy.clearOnShutdown.openWindows pref.
    expires: never
    kind: boolean
    notification_emails:
      - ewright@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main
  session_permission_exceptions:
    bug_numbers:
      - 1589753
      - 1617241
      - 1645089
      - 1678210
      - 1744559
    description: >
      A count of how many "session" cookie exceptions a user has set.
    expires: never
    kind: uint
    notification_emails:
      - pbz@mozilla.com
      - seceng-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

downloads:
  panel_shown:
    bug_numbers:
      - 1627676
    description: >
      The count of how many times the downloads panel was shown per session.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
      - emalysz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  file_opened:
    bug_numbers:
      - 1627676
    description: >
      The count of how many times files were opened from the download panel.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
      - emalysz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

findbar:
  shown:
    bug_numbers:
      - 1627688
    description: >
      The count of how many times the "Find toolbar" was shown per session.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
  find_prev:
    bug_numbers:
      - 1627688
    description: >
      The count of how many times the find previous button was used per session.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
  find_next:
    bug_numbers:
      - 1627688
    description: >
      The count of how many times the find next button was used per session.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
  highlight_all:
    bug_numbers:
      - 1627688
    description: >
      The count of how many times the "Highlight All" button was used in find toolbar.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
  match_case:
    bug_numbers:
      - 1627688
    description: >
      The count of how many times the "Match Case" button was used in find toolbar.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
  match_diacritics:
    bug_numbers:
      - 1627688
    description: >
      The count of how many times the "Match Diacritics" button was used in find toolbar.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
  whole_words:
    bug_numbers:
      - 1627688
    description: >
      The count of how many times the "Whole Words" button was used in find toolbar.
    expires: never
    kind: uint
    notification_emails:
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

sidebar:
  opened:
    bug_numbers:
      - 1648530
    description: >
      The number of times the sidebar was opened, per view (e.g.: bookmarks, history,
      synced tabs).
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - emalysz@mozilla.com
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  search:
    bug_numbers:
      - 1648524
    description: >
      The number of searches from the sidebar, per view (e.g.: bookmarks, history).
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - emalysz@mozilla.com
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  link:
    bug_numbers:
      - 1815706
    description: >
      The number of history items opened from the History sidebar.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

library:
  link:
    bug_numbers:
      - 1815906
    description: >
      The number of history or bookmark items opened from the Library window
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - firefox-view-engineers@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  opened:
    bug_numbers:
      - 1815906
    description: >
      The number of times the Library window was opened, keyed by 'history' or 'bookmarks'
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - firefox-view-engineers@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  search:
    bug_numbers:
      - 1815906
    description: >
      The number of history-specific or bookmark-specific searches made from the Library window
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - firefox-view-engineers@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

os.environment:
  is_admin_without_uac:
    bug_numbers:
      - 1567219
    description: >
      Indicates that the process is lauched with Admin privileges but without
      UAC.
    expires: never
    kind: boolean
    notification_emails:
      - tkikuchi@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
    operating_systems:
      - "windows"

  allowed_app_sources:
    bug_numbers:
      - 1659157
    description: >
      Indicates what sources the OS is currently configured to allow apps to be
      installed from. Possible values are "Anywhere", "Recommendations",
      "PreferStore", "StoreOnly", "NoSuchFeature", or "Error". "Recommendations"
      allows installs from anywhere, but recommends a comparable app from the
      store, if available. "NoSuchFeature" will be reported on versions of
      Windows that do not have an app source setting.
    expires: never
    kind: string
    notification_emails:
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'thunderbird'
    record_in_processes:
      - main
    operating_systems:
      - "windows"

  launch_method:
    bug_numbers:
      - 1685213
      - 1725298
      - 1754656
    description: >
      Records how Firefox was started on Windows.
      Currently will be one of "Desktop", "DesktopPrivate",
      "StartMenu" (including pins), "StartMenuPrivate",
      "Taskbar", "TaskbarPrivate", "OtherShortcut", or "Other"
    expires: never
    kind: string
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
      - rtestard@mozilla.com
      - shong@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
    operating_systems:
      - windows

  launched_to_handle:
    bug_numbers:
      - 1243603
      - 1781984
    description: >
      Records counts for when Firefox was launched afresh (i.e., was not already
      running) to handle a file type or protocol with `-osint -url ...`.  The
      result is split into keys which represent the file extension: currently,
      the set of file types Firefox registers to handle, namely ".avif", ".htm",
      ".html", ".pdf", ".shtml", ".xht", ".xhtml", ".svg", ".webp", and the set
      of protocol schemes that Firefox registers to handle, namely "about",
      "http", "https", "mailto".  If Firefox was launched to handle a file type
      or protocol it does not register to handle by default, the count is
      recorded as ".<other extension>" or "<other protocol>", respectively
      (neither of which are valid extension or protocol identifiers).
    keyed: true
    expires: never
    kind: uint
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
    operating_systems:
      - windows

  invoked_to_handle:
    bug_numbers:
      - 1243603
      - 1781984
    description: >
      Records counts for when Firefox was invoked (i.e., was already running and
      was not launched) to handle a file type or protocol with `-osint -url
      ...`.  The result is split into keys which represent the file extension:
      currently, the set of file types Firefox registers to handle, namely
      ".avif", ".htm", ".html", ".pdf", ".shtml", ".xht", ".xhtml", ".svg",
      ".webp", and the set of protocol schemes that Firefox registers to handle,
      namely "about", "http", "https", "mailto".  If Firefox was invoked to
      handle a file type or protocol it does not register to handle by default,
      the count is recorded as ".<other extension>" or "<other protocol>",
      respectively (neither of which are valid extension or protocol
      identifiers).
    keyed: true
    expires: never
    kind: uint
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
    operating_systems:
      - windows

  is_default_handler:
    bug_numbers:
      - 1743914
      - 1781984
    description: >
      Records whether Firefox was the default handler for particular file types
      or protocols.  The result is split into keys which represent the file
      extension: currently, a subset of the file types Firefox registers to
      handle, namely ".pdf".  In the future, more file types may be recorded,
      and/or a subset of the protocol schemes that Firefox registers to may be
      recorded.
    keyed: true
    expires: never
    kind: boolean
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
    operating_systems:
      - windows

  is_kept_in_dock:
    bug_numbers:
      - 1715348
    description: Whether this app was kept in macOS Dock on startup
    expires: never
    kind: boolean
    notification_emails:
      - elee@mozilla.com
      - shong@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
    operating_systems:
      - mac

  is_taskbar_pinned:
    bug_numbers:
      - 1685213
      - 1725298
    description: Whether the non-Private Browsing version of this app was pinned to taskbar on startup
    expires: never
    kind: boolean
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
      - shong@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
    operating_systems:
      - windows

  is_taskbar_pinned_private:
    bug_numbers:
      - 1751038
    description: Whether the Private Browsing version of this app was pinned to taskbar on startup
    expires: never
    kind: boolean
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
      - shong@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
    operating_systems:
      - windows

pictureinpicture:
  opened_method:
    bug_numbers:
      - 1560590
      - 1616045
    description: >
      The number of times a Picture-in-Picture window was opened, per trigger
      mechanism (e.g.: the video toggle, the context menu).
    expires: "92"
    kind: uint
    keyed: true
    notification_emails:
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - content
  saw_toggle:
    bug_numbers:
      - 1657155
    description: >
      The number of times a Picture-in-Picture toggle was presented to the user when
      they hovered the video with the mouse pointer.
    expires: "92"
    kind: uint
    notification_emails:
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - content
  most_concurrent_players:
    bug_numbers:
      - 1677107
      - 1706843
      - 1736690
    description:
      The most concurrent Picture-in-Picture players the user had open at any one time.
    expires: "never"
    kind: uint
    notification_emails:
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  toggle_enabled:
    bug_numbers:
      - 1639774
    description: Whether the user has Picture-in-Picture enabled.
    expires: "never"
    kind: boolean
    notification_emails:
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

preferences:
  prefs_file_was_invalid:
    bug_numbers:
      - 1367813
      - 1682571
    description: >-
      Set to true if a failure occurred reading profile/prefs.js.
    expires: never
    kind: boolean
    notification_emails:
      - kwright@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  search_query:
    bug_numbers:
      - 1359306
    description: >-
      Each key is a search query string when user performs a search action within
      about:preferences, and each value is the number of times that key is recorded.
      The telemetry data will be recorded if there is a successful search result highlighted.
    expires: "62"
    kind: uint
    keyed: true
    notification_emails:
      - chsiang@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main

webrtc.video:
  recv_codec_used:
    bug_numbers:
      - 1556766
    description: >
      The video codec used for receiving video on a WebRTC call.
    expires: "never"
    kind: uint
    keyed: true
    notification_emails:
      - dminor@mozilla.com
      - nohlmeier@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'content'

  send_codec_used:
    bug_numbers:
      - 1556766
    description: >
      The video codec used for sending video on a WebRTC call.
    expires: "never"
    kind: uint
    keyed: true
    notification_emails:
      - dminor@mozilla.com
      - nohlmeier@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'content'

webrtc.sdp:
  parser_diff:
    bug_numbers:
      - 1432955
      - 1529787
      - 1588571
    description: >
      The number of differences between the C based sipcc SDP parser and
      the new rust based rsdparsa SDP parser keyed by predefined
      names of attributes and values that do not match between
      the sipcc parsing result and the rsdparsa parsing result or
      between the rsdparsa parsing result and the original sdp.
      This should help to improve the new rsdparsa to replace
      the sipcc parser.
    expires: "77"
    kind: uint
    keyed: true
    notification_emails:
      - nohlmeier@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'content'

mathml:
  doc_count:
    bug_numbers:
      - 1362187
      - 1538985
      - 1590350
    description: >
      The number of documents that contained enabled MathML elements.
    expires: never
    kind: uint
    notification_emails:
      - emilio@mozilla.com
      - fred.wang@free.fr
      - dev-tech-layout@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'content'

mediarecorder:
  recording_count:
    bug_numbers:
      - 1400757
      - 1429765
      - 1480589
      - 1532391
    description: >
      The number of times a MediaRecorder has been started. Recorded when a MediaRecorder starts
    expires: "72"
    kind: uint
    notification_emails:
      - media-alerts@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main
      - content

media:
  element_in_page_count:
    bug_numbers:
      - 1476456
      - 1499803
      - 1570634
      - 1652108
    description: >
      The number of times a document hierarchy contained at least one HTMLMediaElement. In addition, the telemetry probe 'MIXED_CONTENT_UNBLOCK_COUNTER' records the total number of loaded top level content documents, which can help us calculate the result of the percentage of documents using media.
    expires: never
    kind: uint
    notification_emails:
      - media-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  control_platform_usage:
    bug_numbers:
      - 1680856
    description: >
      Counts the number of times users enable and use media control on different platforms. 0=EnabledOn, 1=UsedOn.
    expires: "91"
    kind: uint
    keyed: true
    notification_emails:
      - media-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  decode_error_per_mime_type:
    bug_numbers:
      - 1688775
      - 1804291
    description: >
      Count the number of times the media with a specific mime type (Eg. audio/vorbis, that would be used as the key) encounters a decode error during playback.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - media-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'
      - 'gpu'
      - 'rdd'
      - 'utility'

  audio_process_per_codec_name:
    bug_numbers:
      - 1804249
      - 1861305
    description: >
      Process where audio decoding happens and codec name
    expires: "132"
    kind: uint
    keyed: true
    notification_emails:
      - media-alerts@mozilla.com
      - alissy@mozilla.com
    release_channel_collection: opt-out
    products:
      - "firefox"
    record_in_processes:
      - 'main'
      - 'content'
      - 'rdd'
      - 'utility'
    release_channel_collection: opt-out

  video_hardware_decoding_support:
    bug_numbers:
      - 1733722
      - 1754657
      - 1811157
    description: >
      Record whether hardware decoding is supported for the specific video codec. The key is the type of video codec, eg. video/vp9.
    expires: never
    kind: boolean
    keyed: true
    notification_emails:
      - media-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
      - 'content'

  video_hd_hardware_decoding_support:
    bug_numbers:
      - 1741286
      - 1754657
      - 1811157
    description: >
      Record whether hardware decoding is supported for the specific video codec, this only records video in HD (1280*720) or higher resultion. The key is the type of video codec, eg. video/vp9.
    expires: never
    kind: boolean
    keyed: true
    notification_emails:
      - media-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
      - 'content'

  device_hardware_decoding_support:
    bug_numbers:
      - 1850594
    description: >
      Record the hardware decoding availability on devices, the key is the name of video codec, eg. h264, av1.
    expires: never
    kind: boolean
    keyed: true
    notification_emails:
      - media-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'gpu'

# The following section contains content process base counters.
dom.contentprocess:
  buildID_mismatch:
    bug_numbers:
      - 1366808
    description: >
      The number of times the about:restartrequired page appeared due to a
      buildID mismatch between the parent and the content processes.
    expires: never
    kind: uint
    notification_emails:
      - spohl@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
  buildID_mismatch_false_positive:
    bug_numbers:
      - 1651133
      - 1730045
      - 1754658
      - 1777404
      - 1817104
      - 1866197
    description: >
      The number of times a process crashed early but we could verify it was not
      because of buildID mismatch between the parent and the content processes.
    expires: "135"
    kind: uint
    notification_emails:
      - alissy@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  os_priority_lowered:
    bug_numbers:
      - 1538987
    description: >
      The number of times a content process has had its OS priority lowered
      due to only containing background tabs without audible media playing.
    expires: never
    kind: uint
    notification_emails:
      - mconley@mozilla.com
      - gsvelto@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
  os_priority_raised:
    bug_numbers:
      - 1538987
    description: >
      The number of times a content process has had its OS priority raised
      due to containing at least one foregrounded tab, or a tab with audible
      media has started playing in it.
    expires: never
    kind: uint
    notification_emails:
      - mconley@mozilla.com
      - gsvelto@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
  os_priority_change_considered:
    bug_numbers:
      - 1538987
    description: >
      The number of times we've had the opportunity to change content process
      priority due to a tab switch or a tab being opened.
    expires: never
    kind: uint
    notification_emails:
      - mconley@mozilla.com
      - gsvelto@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

# The following section contains parent process base counters.
dom.parentprocess:
  private_window_used:
    bug_numbers:
      - 1491047
    description: >
      Whether a private browsing window has been used in the session.
    expires: never
    kind: boolean
    notification_emails:
      - seceng-telemetry@mozilla.com
      - ehsan+telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  process_launch_errors:
    bug_numbers:
      - 1819311
    description: >
      Collect precise set of error code and calling site upon process creation failure path.
    expires: "never"
    kind: uint
    keyed: true
    notification_emails:
      - alissy@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

devtools.toolbar.eyedropper:
  opened:
    bug_numbers:
      - 1247985
      - 1352115
    description: Number of times the DevTools Eyedropper has been opened via the inspector toolbar.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.copy.unique.css.selector:
  opened:
    bug_numbers:
      - 1323700
      - 1352115
      - 1566395
    description: Number of times the DevTools copy unique CSS selector has been used.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - mbalfanz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.copy.full.css.selector:
  opened:
    bug_numbers:
      - 1323700
      - 1352115
      - 1566395
    description: Number of times the DevTools copy full CSS selector has been used.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - mbalfanz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.copy.xpath:
  opened:
    bug_numbers:
      - 987877
      - 1566395
    description: Number of times the DevTools copy XPath has been used.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - mbalfanz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.layout.flexboxhighlighter:
  opened:
    bug_numbers:
      - 1509907
    description: >
      Number of times the DevTools flexbox highlighter was activated from the layout view.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.markup.flexboxhighlighter:
  opened:
    bug_numbers:
      - 1509907
    description: >
      Number of times the DevTools flexbox highlighter was activated from the markup view.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.rules.flexboxhighlighter:
  opened:
    bug_numbers:
      - 1509907
    description: >
      Number of times the DevTools flexbox highlighter was activated from the rules view.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.markup.gridinspector:
  opened:
    bug_numbers:
      - 1509907
    description: >
      Number of times the DevTools grid inspector was opened from the markup view.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.rules.gridinspector:
  opened:
    bug_numbers:
      - 1373483
    description: >
      Number of times the DevTools grid inspector was opened from the rules view.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.grid.gridinspector:
  opened:
    bug_numbers:
      - 1373483
    description: >
      Number of times the DevTools grid inspector was opened from the grid view.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.grid.showGridAreasOverlay:
  checked:
    bug_numbers:
      - 1373483
    description: >
      Number of times the DevTools grid inspector's "Display grid areas" was checked.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.grid.showGridLineNumbers:
  checked:
    bug_numbers:
      - 1373483
    description: >
      Number of times the DevTools grid inspector's "Display grid numbers" was checked.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.grid.showInfiniteLines:
  checked:
    bug_numbers:
      - 1373483
    description: >
      Number of times the DevTools grid inspector's "Extend grid lines infinitely" was checked.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.inspector:
  three_pane_enabled:
    bug_numbers:
      - 1437881
      - 1566395
    description: >
      Number of times the DevTools inspector was opened with the 3 pane inspector enabled,
      keyed by true/false.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - gl@mozilla.com
      - mbalfanz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  node_selection_count:
    bug_numbers:
      - 1550794
    description: >
      Number of times a different node is marked as selected in the Inspector regardless
      of the cause: context menu, manual selection in markup view, etc.
    expires: "never"
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - mbalfanz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.shadowdom:
  shadow_root_displayed:
    bug_numbers:
      - 1470128
      - 1566393
    description: >
      Whether the markup view displayed any #shadow-root element in the UI.
    expires: "never"
    kind: boolean
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - jdescottes@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  shadow_root_expanded:
    bug_numbers:
      - 1470128
      - 1566393
    description: >
      Whether the user expanded any #shadow-root element.
    expires: "never"
    kind: boolean
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - jdescottes@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  reveal_link_clicked:
    bug_numbers:
      - 1470128
      - 1566393
    description: >
      Whether the user clicked on any "reveal" link. "reveal" links are displayed in
      shadow dom trees in the markup view.
    expires: "never"
    kind: boolean
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - jdescottes@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools:
  current_theme:
    bug_numbers:
      - 1396811
    description: >
      Number of times DevTools was opened, keyed by theme.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.tooltip:
  shown:
    bug_numbers:
      - 1553471
    description: >
      Number of times a tooltip was shown, keyed by tooltip type. Currently supported types are "image", "font-family", "inactive-css", "css-compatibility", "css-query-container" and "variable."
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.responsive:
  toolbox_opened_first:
    bug_numbers:
      - 1444497
    description: >
      Number of Responsive Design Mode opens with a toolbox already open.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - jryans@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main
    release_channel_collection: opt-out
  open_trigger:
    bug_numbers:
      - 1444497
    description: >
      Number of Responsive Design Mode opens keyed by the UI entry point used.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - jryans@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main
    release_channel_collection: opt-out

devtools.tool:
  registered:
    bug_numbers:
      - 1447302
      - 1503568
      - 1587985
    description: >
      Recorded on enable tool checkbox check/uncheck in Developer Tools options
      panel. Boolean stating if the tool was enabled or disabled by the user.
      Keyed by tool id. Current default tools with their id's are defined in
      https://searchfox.org/mozilla-central/source/devtools/client/definitions.js
    expires: never
    kind: boolean
    keyed: true
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - accessibility@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.accessibility:
  node_inspected_count:
    bug_numbers:
      - 1447302
      - 1503568
      - 1587985
    description: >
      Number of times a DOM node was inspected from within the Accessibility
      tool.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - accessibility@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  opened_count:
    bug_numbers:
      - 1447302
      - 1503568
      - 1587985
    description: >
      Number of times the DevTools Accessibility tool has been opened.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - accessibility@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  picker_used_count:
    bug_numbers:
      - 1447302
      - 1503568
      - 1587985
    description: >
      Number of times the picker tool has been used in DevTools Accessibility
      panel.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - accessibility@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  select_accessible_for_node:
    bug_numbers:
      - 1447302
      - 1503568
      - 1587985
    description: >
      Number of times an accessible object was inspected from outside the
      Accessibility tool (navigation to Accessibility panel). Keyed by the
      source of user action (inspector context menu, browser context menu, etc).
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - accessibility@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  service_enabled_count:
    bug_numbers:
      - 1447302
      - 1503568
      - 1587985
    description: >
      Number of times platform accessibility has been enabled in DevTools
      Accessibility panel.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - accessibility@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  accessible_context_menu_opened:
    bug_numbers:
      - 1507870
      - 1587985
    description: >
      Number of times a context menu was opened for an accessible object in the
      accessibility tree.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - accessibility@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  accessible_context_menu_item_activated:
    bug_numbers:
      - 1507870
      - 1587985
    description: >
      Number of times a context menu item for an accessible object was activated (with
      mouse or keyboard) from the context menu opened in the accessibility tree. Keyed by
      the id of the context menu item.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - accessibility@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  audit_activated:
    bug_numbers:
      - 1548241
      - 1587985
    description: >
      Number of times accessibility audit was activated (with mouse or keyboard)
      from the accessibility panel's toolbar. Keyed by the audit filter type
      (e.g. "CONTRAST").
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - accessibility@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  simulation_activated:
    bug_numbers:
      - 1567200
      - 1587985
    description: >
      Number of times accessibility simulation was activated (with mouse or keyboard)
      from the accessibility panel's toolbar. Keyed by the simulation type
      (e.g. "DEUTERANOPIA").
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - accessibility@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.application:
  opened_count:
    bug_numbers:
      - 1451734
    description: >
      Number of times the DevTools Application panel has been opened.
    expires: "66"
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - jdescottes@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.toolbox:
  tabs_reordered:
    bug_numbers:
      - 1456551
      - 1566362
    description: >
      Number of times the DevTools tab was reordered.
      Keyed by tab's id.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - daisuke@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.changesview:
  opened_count:
    bug_numbers:
      - 1509890
    description: >
      Number of times the Changes panel has been opened.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
      - mbalfanz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

devtools.markup.scrollable.badge:
  clicked:
    bug_numbers:
      - 1660818
    description: >
      Number of times the scrollable inspector badge has been clicked.
    expires: never
    kind: uint
    notification_emails:
      - dev-developer-tools@lists.mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

dom.event:
  confluence_load_count:
    bug_numbers:
      - 1514940
    description: >
      Number of times Confluence instances are loaded, and whether they are
      compatible with conflated keypress event model or not, using "new"/"old".
      I.e., collecting percentage of too old Confluence instance use count in
      all Confluence instance use count.
    expires: "71"
    keyed: true
    kind: uint
    notification_emails:
      - mnakano.birchill@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'content'

  office_online_load_count:
    bug_numbers:
      - 1545410
    description: >
      Number of times Office Online Server instances are loaded, and whether
      they are compatible with conflated keypress event model or not, using
      "new"/"old".  I.e., collecting percentage of too old Confluence instance
      use count in all Office Online Server instance use count.
    expires: "71"
    keyed: true
    kind: uint
    notification_emails:
      - mnakano.birchill@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'content'

navigator.storage:
  estimate_count:
    bug_numbers:
      - 1359708
    description: >
      Number of times navigator.storage.estimate has been used.
    expires: "60"
    kind: uint
    notification_emails:
      - shuang@mozilla.com
      - ttung@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
      - 'content'

  persist_count:
    bug_numbers:
      - 1359708
    description: >
      Number of times navigator.storage.persist has been used.
    expires: "60"
    kind: uint
    notification_emails:
      - shuang@mozilla.com
      - ttung@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
      - 'content'

mozstorage:
  sqlitejsm_transaction_timeout:
    bug_numbers:
      - 1727261
    description: >
      Collection of javascript modules that created a Sqlite.sys.mjs transaction
      taking too long and timing out. This can be used to identify and optimize
      those modules transactions.
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - mak@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

telemetry:
  accumulate_unknown_histogram_keys:
    bug_numbers:
      - 1343855
    description: >
      The count of attempted accumulations to unknown histogram keys for
      histograms that restrict the set of allowed keys ('keys' property).
      The names of the offending histograms are used as keys in this probe.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - all

  accumulate_clamped_values:
    bug_numbers:
      - 1438335
    description: >
      The count of accumulations that had to be clamped down to not overflow,
      keyed to the histogram name of the overflowing accumulation.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
      - chutten@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  event_counts:
    bug_numbers:
      - 1440673
    description: >
      The counts of events recorded in the process, category, method, and
      object of the key, even if event recording for the category was not
      enabled.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
      - chutten@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'all'

  data_upload_optin:
    bug_numbers:
      - 1445921
    description: >
      User opted into sending Telemetry data again.
    expires: "never"
    kind: boolean
    notification_emails:
      - jrediger@mozilla.com
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'

  keyed_scalars_exceed_limit:
    bug_numbers:
      - 1451813
    description: >
      The number of times keyed scalars exceeded the number of keys limit, keyed by scalar name.
    expires: "never"
    kind: uint
    keyed: true
    notification_emails:
      - chutten@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  keyed_scalars_unknown_keys:
    bug_numbers:
      - 1365529
    description: >
      The count of attempted accumulations to unknown scalar keys for
      scalars that restrict the set of allowed keys ('keys' property).
      The names of the offending scalars are used as keys in this probe.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
      - brizental@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - all


telemetry.discarded:
  accumulations:
    bug_numbers:
      - 1369041
    description: >
      Number of discarded accumulations to histograms in child processes
    expires: "never"
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'all_childs'
  keyed_accumulations:
    bug_numbers:
      - 1369041
    description: >
      Number of discarded accumulations to keyed histograms in child processes
    expires: "never"
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'all_childs'
  scalar_actions:
    bug_numbers:
      - 1369041
    description: >
      Number of discarded actions on scalars in child processes
    expires: "never"
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'all_childs'
  keyed_scalar_actions:
    bug_numbers:
      - 1369041
    description: >
      Number of discarded actions on keyed scalars in child processes
    expires: "never"
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'all_childs'
  child_events:
    bug_numbers:
      - 1369041
    description: >
      Number of discarded events in child processes
    expires: "never"
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'all_childs'

normandy:
  recipe_freshness:
    bug_numbers:
      - 1530508
    description: >
      For each recipe ID seen by the Normandy client, its last_modified.
    expires: "never"
    keyed: true
    kind: uint
    notification_emails:
      - product-delivery@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main

# The following section contains graphics-related scalars.
gfx.advanced.layers:
  failure_id:
    bug_numbers:
      - 1365879
    description: >
      Each key is a failure for initializing Advanced Layers, and each value
      is the number of times that failure was recorded. The failure codes
      are unique strings present in MLGDeviceD3D11::Initialize, such that
      a failure can be traced back to a specific Direct3D API call.
    keyed: true
    kind: uint
    expires: "70"
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - rhunt@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

gfx.omtp:
  paint_wait_ratio:
    bug_numbers:
      - 1386968
      - 1518669
      - 1673949
      - 1674950
    description: >
      Ratio (in units of 1/100th of a percent) of how many times OMTP waited
      for a paint for more than 200us, versus the total number of paints.
    keyed: false
    kind: uint
    expires: "never" # 2021-10-01 this will move back to non-release collection.
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - rhunt@mozilla.com
      - perf-telemetry-alerts@mozilla.com
      - barret@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'content'

gfx.canvas.remote:
  activated:
    bug_numbers:
      - 1641722
      - 1672582
      - 1706844
      - 1739290
    description: >
      Number of times remote canvas 2D has been activated.
    kind: uint
    expires: "103"
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - bowen@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'gpu'

  deactivated_no_device:
    bug_numbers:
      - 1641722
      - 1672582
      - 1706844
      - 1739290
      - 1852144
    description: >
      Number of times remote canvas 2D has been deactivated due to device creation failure.
    kind: uint
    expires: "130"
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - bowen@mozilla.com
      - aosmond@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'gpu'

  deactivated_bad_stream:
    bug_numbers:
      - 1641722
      - 1672582
      - 1706844
      - 1739290
      - 1852144
    description: >
      Number of times remote canvas 2D has been deactivated due to a stream read failure.
    kind: uint
    expires: "130"
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - bowen@mozilla.com
      - aosmond@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'gpu'

gfx.hdr:
  windows_display_colorspace_bitfield:
    bug_numbers:
      - 1514840
      - 1690597
    description: >
      A bitfield representation of the available DXGI color spaces of the connected displays on Windows.
      See (https://docs.microsoft.com/en-us/windows/desktop/api/dxgicommon/ne-dxgicommon-dxgi_color_space_type)
      for definitions of color spaces. Each N'th bit of this scalar indicates whether the DXGI color space with
      index 'N' is available on at least one connected monitor.
    keyed: false
    kind: uint
    expires: never
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - jmuizelaaar@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'


gfx.display:
  count:
    bug_numbers:
      - 1594145
    description: >
      Number of displays connected to the device
    expires: never
    kind: uint
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  primary_width:
    bug_numbers:
      - 1594145
    description: >
      Width of the primary display, takes device rotation into account.
    expires: never
    kind: uint
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  primary_height:
    bug_numbers:
      - 1594145
    description: >
      Height of the primary display, takes device rotation into account.
    expires: never
    kind: uint
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
gfx.adapter:
  description:
    bug_numbers:
      - 1594145
    description: >
      Long form description of the Graphics adapter
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  vendor_id:
    bug_numbers:
      - 1594145
    description: >
      Graphics adapter vendor identification
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  device_id:
    bug_numbers:
      - 1594145
    description: >
      Graphics adapter device identification
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  subsystem_id:
    bug_numbers:
      - 1594145
    description: >
      Graphics adapter subsystem identification
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  ram:
    bug_numbers:
      - 1594145
    description: >
      Graphics adapter dedicated memory
    expires: never
    kind: uint
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  driver_files:
    bug_numbers:
      - 1594145
    description: >
      List of graphics adapter driver files
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  driver_vendor:
    bug_numbers:
      - 1594145
    description: >
      Graphics adapter driver vendor identification
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  driver_version:
    bug_numbers:
      - 1594145
    description: >
      Graphics adapter driver version
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  driver_date:
    bug_numbers:
      - 1594145
    description: >
      Graphics adapter driver date
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
gfx.feature:
  webrender:
    bug_numbers:
      - 1687312
    description:
      Whether webrender is enabled or disabled, and why.
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - jnicol@mozilla.com
    products:
      - geckoview_streaming
    record_in_processes:
      - main
    release_channel_collection: opt-out

gfx:
  skipped_composites:
    bug_numbers:
      - 1797975
    description: >
      Number of skipped composites, happening when rendering is too slow to keep up with content.
    keyed: false
    kind: uint
    expires: "never"
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - perf-telemetry-alerts@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
      - 'gpu'
  compositor:
    bug_numbers:
      - 1594145
    description: >
      Name of the graphics compositor in use. possible values are "opengl, d3d11, client, webrender or basic"
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  last_compositor_gecko_version:
    bug_numbers:
      - 1704842
    description: >
      The gecko version at the last time a compositor was initialized.
    expires: never
    kind: string
    notification_emails:
      - jnicol@mozilla.com
      - gfx-telemetry-alerts@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  headless:
    bug_numbers:
      - 1594145
    description: >
      Boolean indicated whether graphics is running in headless (no display) mode
    expires: never
    kind: boolean
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - ktaeleman@mozilla.com
    products:
      - 'geckoview_streaming'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  os_compositor:
    bug_numbers:
      - 1623492
    description: >
      Boolean indicating whether the os compositor is being used by WebRender.
      Only collected in the first subsession.
    expires: never
    kind: boolean
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - jmuizelaar@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  linux_window_protocol:
    bug_numbers:
      - 1645732
    description: >
      Windowing protocol on Linux. Can be Wayland, WaylandDRM, XWayland, or X11
    expires: never
    kind: string
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - aosmond@mozilla.com
      - mkaply@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out
  supports_hdr:
    bug_numbers:
      - 1798067
    description: >
      Does the hardware support accurate display of HDR content
    expires: never
    kind: boolean
    notification_emails:
      - gfx-telemetry-alerts@mozilla.com
      - bwerth@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

apz:
  scrollwheel_overshoot:
    bug_numbers:
      - 1836870
    description: >
      Count of overshoot events, where the user reverses scrollwheel direction soon after the last scrollwheel input.
    expires: "126"
    kind: uint
    notification_emails:
      - botond@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
      - 'gpu'
    release_channel_collection: opt-out

# The following section contains the form autofill related scalars.
formautofill:
  availability:
    bug_numbers:
      - 1386959
    description: A boolean sent once per session to represent whether the formautofill is available in the build
    expires: never
    kind: boolean
    notification_emails:
      - autofill@lists.mozilla.org
      - passwords-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

formautofill.addresses:
  detected_sections_count:
    bug_numbers:
      - 1801039
    description: >
      Count at detection time number of address form sections.
      A single form can contain more than one address form section.
    expires: never
    kind: uint
    notification_emails:
      - autofill@lists.mozilla.org
      - passwords-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'
  submitted_sections_count:
    bug_numbers:
      - 1656344
    description: >
      Count at submission time number of credit card form sections submitted.
    expires: never
    kind: uint
    notification_emails:
      - autofill@lists.mozilla.org
      - passwords-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'
  autofill_profiles_count:
    bug_numbers:
      - 1801039
    description: >
      Count at store time how many address autofill profiles user has.
    expires: never
    kind: uint
    notification_emails:
      - autofill@lists.mozilla.org
      - passwords-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

formautofill.creditCards:
  autofill_profiles_count:
    bug_numbers:
      - 990203
    description: >
      Count at store time how many credit card autofill profiles user has.
    expires: never
    kind: uint
    notification_emails:
      - autofill@lists.mozilla.org
      - passwords-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
  detected_sections_count:
    bug_numbers:
      - 1656344
    description: >
      Count at detection time number of credit card form sections.
      A single form can contain more than one credit card form section.
    expires: never
    kind: uint
    notification_emails:
      - autofill@lists.mozilla.org
      - passwords-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'
  submitted_sections_count:
    bug_numbers:
      - 1656344
    description: >
      Count at submission time number of credit card form sections submitted.
    expires: never
    kind: uint
    notification_emails:
      - autofill@lists.mozilla.org
      - jmathies@mozilla.com
      - chsiang@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'

# This section is for notification bars testing
notificationbar:
  # Used only for testing
  testone:
    bug_numbers:
      - 1676943
    description: >
      Used to test notificationbar telemetry
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  # Used only for testing
  testtwo:
    bug_numbers:
      - 1676943
    description: >
      Used to test notificationbar telemetry
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

# The following section contains scalars for the Screenshots extension.
screenshots:
  download:
    bug_numbers:
      - 1412411
    description: >
      The count of new screenshots created, then downloaded per session
      via the Firefox Screenshots feature. Excludes failed attempts due
      to any error.
    expires: never
    kind: uint
    notification_emails:
      - screenshots-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  upload:
    bug_numbers:
      - 1412411
    description: >
      The count of new screenshots created, then uploaded per session
      via the Firefox Screenshots feature. Excludes attempts to create
      and upload the screenshot that may have failed.
    expires: never
    kind: uint
    notification_emails:
      - screenshots-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  copy:
    bug_numbers:
      - 1412411
    description: >
      The count of new screenshots created, then copied directly to the
      clipboard per session via the Firefox Screenshots feature.
    expires: never
    kind: uint
    notification_emails:
      - screenshots-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  visible:
    bug_numbers:
      - 1722774
    description: >
      The count of new screenshots created using just the viewport,
      no scrolling.
    expires: never
    kind: uint
    notification_emails:
      - screenshots-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  full_page:
    bug_numbers:
      - 1722774
    description: >
      The count of new screenshots created by capturing the full,
      scrolled page.
    expires: never
    kind: uint
    notification_emails:
      - screenshots-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  custom:
    bug_numbers:
      - 1722774
    description: >
      The count of new screenshots created using the drag handles
      to draw the box size and position.
    expires: never
    kind: uint
    notification_emails:
      - screenshots-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  element:
    bug_numbers:
      - 1722774
    description: >
      The count of new screenshots created using the highlighter
      to select element bounds.
    expires: never
    kind: uint
    notification_emails:
      - screenshots-dev@mozilla.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

# The following section is for tracking the number of failure for indexedDB.
idb.failure:
  unknown_objectstore_empty_database:
    bug_numbers:
      - 1669730
    description: >
      Tracking the number of attempts to open an unknown objectstore on an
      empty IndexedDB database.
    expires: "89"
    kind: uint
    notification_emails:
      - storage-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'
  unknown_objectstore_non_empty_database:
    bug_numbers:
      - 1669730
    description: >
      Tracking the number of attempts to open an unknown objectstore on a
      non-empty IndexedDB database.
    expires: "89"
    kind: uint
    notification_emails:
      - storage-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'

# The following section contains scalars for printing.
printing:
  paper_size:
    bug_numbers:
      - 1660686
    description: >
      A counter of the number of times a given paper size (recorded as
      "width x height" in points) is used for printing.
    keyed: true
    expires: "89"
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
      - jkew@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'

  dialog_opened_without_preview:
    bug_numbers:
      - 1600623
    description: >
      A counter incremented every time the print dialog is opened without
      opening print preview.
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'

  dialog_without_preview_cancelled:
    bug_numbers:
      - 1600623
    description: >
      A counter incremented every time a print dialog that was opened without
      print preview is cancelled.
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'

  dialog_opened_via_preview:
    bug_numbers:
      - 1600623
    description: >
      A counter incremented every time the print dialog is opened from the old
      print preview.
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
      - emalysz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'

  dialog_opened_via_preview_tm:
    bug_numbers:
      - 1657220
    description: >
      A counter incremented every time a user opens the system print dialog
      from the print preview interface.
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
      - emalysz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  dialog_via_preview_cancelled:
    bug_numbers:
      - 1600623
    description: >
      A counter incremented every time a print dialog opened from the old print
      preview is cancelled.
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'

  dialog_via_preview_cancelled_tm:
    bug_numbers:
      - 1657220
    description: >
      A counter incremented every time a user cancels a system print dialog
      that they opened from the print preview interface.
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  error:
    bug_numbers:
      - 1630105
    description: >
      A counter incremented every time the user encounters an error printing.
      The result is split into keys which represent the values of
      error codes related to printing. Possible values are listed in 'keys'.
      "FAILURE" is a catch-all code for an error we don't recognize.
    keyed: true
    keys:
      - 'GFX_PRINTER_NO_PRINTER_AVAILABLE'
      - 'GFX_PRINTER_NAME_NOT_FOUND'
      - 'GFX_PRINTER_COULD_NOT_OPEN_FILE'
      - 'GFX_PRINTER_STARTDOC'
      - 'GFX_PRINTER_ENDDOC'
      - 'GFX_PRINTER_STARTPAGE'
      - 'GFX_PRINTER_DOC_IS_BUSY'
      - 'ABORT'
      - 'NOT_AVAILABLE'
      - 'NOT_IMPLEMENTED'
      - 'OUT_OF_MEMORY'
      - 'UNEXPECTED'
      - 'FAILURE'
      - 'FALLBACK_PAPER_LIST'
      - 'LAST_USED_PRINTER'
      - 'PAPER_MARGINS'
      - 'PRINT_DESTINATIONS'
      - 'PRINT_PREVIEW'
      - 'PRINTER_LIST'
      - 'PRINTER_PROPERTIES'
      - 'PRINTER_SETTINGS'
      - 'UNWRITEABLE_MARGIN'
    expires: never
    kind: uint
    notification_emails:
      - jaws@mozilla.com
      - jwatt@jwatt.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preview_opened:
    bug_numbers:
      - 1600623
    description: >
      A counter incremented every time the user initiates the old print preview.
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
      - emalysz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'

  preview_opened_tm:
    bug_numbers:
      - 1657220
    description: >
      A counter incremented every time a user opens print preview.
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
      - emalysz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  preview_cancelled:
    bug_numbers:
      - 1600623
    description: >
      A counter incremented every time an old print preview session exits
      without printing.
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
      - emalysz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'

  preview_cancelled_tm:
    bug_numbers:
      - 1657220
    description: >
      A counter incremented every time a user exits print preview without
      printing.
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
      - emalysz@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  settings_changed:
    bug_numbers:
      - 1653386
    description: >
      A count of how many times the user changed a setting in print preview,
      broken down per setting.
    keyed: true
    expires: never
    kind: uint
    notification_emails:
      - emalysz@mozilla.com
      - rtestard@mozilla.com
    release_channel_collection: opt-out
    products:
      - "firefox"
    record_in_processes:
      - 'main'

  silent_print:
    bug_numbers:
      - 1600623
    description: >
      A counter incremented every time a silent print (a print without a
      print settings dialog being opened) is initiated.  This happens when
      extensions invoke ExtensionAPI.tabs.saveAsPDF, for example, or when the
      print.always_print_silent pref is set.
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'content'

  target_type:
    bug_numbers:
      - 1600623
    description: >
      A counter incremented every time the user prints to a certain target
      type.  The 'pdf_unknown' count is for printers with names that we don't
      know about/check for, but that have 'pdf' in their name, and is mainly a
      sanity check that we're not missing significant counts in 'pdf_file'.
      For the most part, the 'unknown' count will be prints to a physical
      printer, but we can't know for sure since third party drivers could also
      be print to file drivers that we don't otherwise catch in the other
      counts.
    keyed: true
    keys:
      - 'pdf_file'
      - 'pdf_unknown'
      - 'xps_file'
      - 'unknown'
    expires: never
    kind: uint
    notification_emails:
      - jwatt@jwatt.org
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

# The following section contains probes that record timestamps.
timestamps:
  first_paint:
    bug_numbers:
      - 1386186
    description: >
     Record the timestamp of the first content window paint, in milliseconds since process start.
    expires: never
    kind: uint
    notification_emails:
      - perf-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main

  first_paint_two:
    bug_numbers:
      - 1556568
    description: >
     Record the timestamp of the first main window paint, in milliseconds since process start.
     Intended to replace first_paint since first_paint is broken.
    expires: never
    kind: uint
    notification_emails:
      - perf-telemetry-alerts@mozilla.com
      - gfx-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
      - fennec
    record_in_processes:
      - main

  about_home_topsites_first_paint:
    bug_numbers:
      - 1518521
    description: >
      Record the timestamp of when the first about:home's Topsites are painted. Only records if
      about:home is set as the default homepage, and if sessions are not being restored by default.
    expires: never
    kind: uint
    notification_emails:
      - perf-telemetry-alerts@mozilla.com
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main

browser.timings:
  last_shutdown:
    bug_numbers:
      - 1429510
    description: >
      The time, in milliseconds, it took to complete the last shutdown.
      On successful shutdown, Telemetry saves this to disk into Telemetry.ShutdownTime.txt.
      On the next startup this is loaded and recorded.
    expires: never
    kind: uint
    notification_emails:
      - perf-telemetry-alerts@mozilla.com
      - florian@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

# The following section contains the service worker scalars.
sw:
  cors_res_for_so_req_count:
    bug_numbers:
      - 1416629
    description: >
      The count of number of synthesize response made by service workers and
      it's a cors type resposne for a same-origin mode request.
    expires: "61"
    kind: uint
    notification_emails:
      - sw-telemetry@mozilla.com
      - ttung@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
      - 'content'

  alternative_body_used_count:
    bug_numbers:
      - 1423623
      - 1433916
    description: >
      The count of number of synthesize response using alternative body.
    expires: "68"
    kind: uint
    notification_emails:
      - sw-telemetry@mozilla.com
      - echuang@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
      - 'content'

serviceworker:
  registrations:
    description: >
      Count how many registrations occur. File bugs in Core::DOM in case of a Telemetry regression.

    record_in_processes:
      - 'main'
    products:
      - 'firefox'
      - 'fennec'
    expires: "102"
    kind: uint
    bug_numbers:
      - 1740335
    notification_emails:
      - sw-telemetry@mozilla.com
      - rjesup@mozilla.com
      - echuang@mozilla.com
    keyed: true
    keys:
      - All
      - Fetch

  running_max:
    description: >
      The maximum number of simultaneous running ServiceWorkers in a session.

    record_in_processes:
      - 'main'
    products:
      - 'firefox'
      - 'fennec'
    expires: "102"
    kind: uint
    bug_numbers:
      - 1740335
    notification_emails:
      - sw-telemetry@mozilla.com
      - rjesup@mozilla.com
      - echuang@mozilla.com
    keyed: true
    keys:
      - All
      - Fetch

widget:
  ime_name_on_windows:
    bug_numbers:
      - 1215818
    description: >
      Locale ID and name of IME which was selected by users on Windows.  This
      does NOT collect legacy IMM-IME names since we cannot get readable names
      and we do not support IMM-IME so aggressively because IME vendors
      should've already released TIP for TSF for supporting Windows 8 or later
      completely.
    keyed: true
    expires: never
    kind: boolean
    notification_emails:
      - mnakano.birchill@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  ime_name_on_windows_inserted_crlf:
    bug_numbers:
      - 1865256
    description:
      Same data as ime_name_on_windows, but only collecting IME names which
      inserted CRLF to check whether the feature works.
    keyed: true
    expires: never
    kind: boolean
    notification_emails:
      - mnakano.birchill@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  dark_mode:
    bug_numbers:
      - 1601846
    description: >
      Whether the OS theme is dark.
    expires: never
    kind: boolean
    notification_emails:
      - layout-telemetry-alerts@mozilla.com
      - cmccormack@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  ime_name_on_mac:
    bug_numbers:
      - 1215818
    description: >
      Name of IME which was selected by users on macOS.  The value is Input
      Source ID if non-Japanese IME was open.  Otherwise, if Japanese IME was
      open, the value is Bundle ID.  Input Source ID includes input mode, but
      Bundle ID does not include input mode.
    keyed: true
    expires: never
    kind: boolean
    notification_emails:
      - mnakano.birchill@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  ime_name_on_linux:
    bug_numbers:
      - 1215818
    description: >
      Name of active IM (e.g., xim, fcitx, ibus, etc) which was actually set by
      env on Linux.  Different from Windows and macOS, this value includes
      non-IME users even though this is recoded when first compositionstart
      event because dead key is also implemented by IME on Linux.
    keyed: true
    expires: never
    kind: boolean
    notification_emails:
      - mnakano.birchill@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  gtk_theme_has_scrollbar_buttons:
    bug_numbers:
      - 1669135
    description: >
      Whether the active Gtk theme has scrollbar buttons.
    kind: boolean
    expires: "87"
    notification_emails:
      - layout-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  gtk_theme_scrollbar_uses_images:
    bug_numbers:
      - 1670145
    description: >
      Whether the active Gtk theme uses background images for its scrollbar
      parts.
    kind: boolean
    expires: "87"
    notification_emails:
      - layout-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  gtk_version:
    bug_numbers:
      - 1670145
    description: >
      The version of Gtk 3 in use.
    kind: string
    expires: never
    notification_emails:
      - layout-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

# The following section contains memory reporter counters.
memoryreporter:
  max_ghost_windows:
    bug_numbers:
      - 1454724
    description: >
      The maximum number of leaked ghost windows seen.
    expires: "66"
    kind: uint
    notification_emails:
      - memshrink-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'content'

update:
  binarytransparencyresult:
    bug_numbers:
      - 1501889
    description: >
      If the binary transparency information for an update does not verify
      successfully, this probe will contain an error code from
      toolkit/mozapps/update/common/updatererrors.h indicating why.
    expires: "73"
    kind: uint
    keyed: true
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
      - seceng-telemetry@mozilla.com
      - dkeeler@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main

  bitshresult:
    bug_numbers:
      - 1343669
      - 1540193
      - 1520321
    description: >
      If a BITS download fails on the Windows side (that is to say, BITS
      ecounters an error rather than Firefox failing to interact with BITS),
      it will likely give an hresult error indicating what happened. This probe
      reports those error codes to allow us to see if BITS is commonly failing
      on some systems. This probe is keyed on the type of update download,
      either "PARTIAL" or "COMPLETE".
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
      - bytesized@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - main
    operating_systems:
      - windows

  move_result:
    bug_numbers:
      - 353804
    description: >
      Firefox keeps downloading updates in a different place from updates that
      are ready to install. Once the download completes, the resulting file has
      to be moved from the downloading update directory to the ready update
      directory. This probe counts the results that we get when attempting to
      perform this file move. Valid values for the keys for this probe are
      stored in the MOVE_RESULT_* values in UpdateTelemetry.jsm.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
      - bytesized@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  no_window_auto_restarts:
    bug_numbers:
      - 1720742
    description: >
      On macOS, all browser windows can be closed without exiting Firefox. If
      there is an update pending in that case, and we can install it silently,
      we restart automatically in order to do so. This probe counts the number
      of times the browser restarts to silently install a pending update.
    expires: never
    kind: uint
    keyed: false
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
      - bytesized@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  suppress_prompts:
    bug_numbers:
      - 1749155
    description: >
      When an update is available and app.update.auto is disabled, a popup is
      opened prompting the user to download and install the update. The pref
      app.update.suppressPrompts causes Firefox Nightly to wait up to 7 days
      before showing the prompt, instead showing a badge and banner in the
      meantime. It also prevents Nightly from showing update restart prompts,
      instead showing a badge and banner immediately. This value is set for
      the users who set this pref to true.
    expires: never
    kind: boolean
    keyed: false
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
      - bytesized@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main

  version_pin:
    bug_numbers:
      - 1762957
    description: >
      The AppUpdatePin Enterprise Policy controls the maximum version that the
      browser can update to. If the policy is set, this probe will report the
      policy's value. The possible policy values are "X." and "X.Y.", where
      X is the pinned major version and Y is the pinned minor version.
    expires: never
    kind: string
    keyed: false
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
      - bytesized@mozilla.com
      - telemetry-client-dev@thunderbird.net
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'thunderbird'
    record_in_processes:
      - main

# The following section contains search counters.
browser.search:
  data_transferred:
    bug_numbers:
      - 1614777
      - 1619954
      - 1656135
      - 1694852
      - 1736658
    description: >
      Records bytes that have been transferred for search requests, including
      top-level documents, sub-resources, iframes and search suggestions.
      The key format could be one of:
        <search-provider-name>
        <search-provider-name>-pb
        sggt-<search-engine-id>
        sggt-<search-engine-id>-pb
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - tihuang@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

browser.search.content:
  urlbar:
    bug_numbers:
      - 1089670
      - 1475571
      - 1482158
      - 1545172
      - 1634564
    description: >
      Records counts for in-content searches where the search was most likely started from the urlbar. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  urlbar_handoff:
    bug_numbers:
      - 1732429
    description: >
      The count URI loads triggered in a subsession from the urlbar via handoff,
      broken down by the originating action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  urlbar_persisted:
    bug_numbers:
      - 1779471
    description: >
      Records counts for in-content searches where the search was most likely started from the urlbar after the search term was shown in the urlbar. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  urlbar_searchmode:
    bug_numbers:
      - 1089670
      - 1475571
      - 1482158
      - 1545172
      - 1634564
    description: >
      Records counts for in-content searches where the search was most likely started from the urlbar in search mode. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  searchbar:
    bug_numbers:
      - 1089670
      - 1475571
      - 1482158
      - 1545172
      - 1634564
    description: >
      Records counts for in-content searches where the search was most likely started from the search bar. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  about_home:
    bug_numbers:
      - 1089670
      - 1475571
      - 1482158
      - 1545172
      - 1634564
    description: >
      Records counts for in-content searches where the search was most likely started from the about:home. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  about_newtab:
    bug_numbers:
      - 1089670
      - 1475571
      - 1482158
      - 1545172
      - 1634564
    description: >
      Records counts for in-content searches where the search was most likely started from the about:newtab. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  contextmenu:
    bug_numbers:
      - 1089670
      - 1475571
      - 1482158
      - 1545172
      - 1634564
    description: >
      Records counts for in-content searches where the search was most likely started from the context menu. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  webextension:
    bug_numbers:
      - 1089670
      - 1475571
      - 1482158
      - 1545172
      - 1634564
    description: >
      Records counts for in-content searches where the search was most likely started from a webextension. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  system:
    bug_numbers:
      - 1089670
      - 1475571
      - 1482158
      - 1545172
      - 1634564
    description: >
      Records counts for in-content searches where the search was most likely started from the system, e.g. command line. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  tabhistory:
    bug_numbers:
      - 1634564
    description: >
      Records counts for in-content searches where the search was loaded from the tab history. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  reload:
    bug_numbers:
      - 1634564
    description: >
      Records counts for in-content searches where the search was loaded by reloading the page. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  unknown:
    bug_numbers:
      - 1089670
      - 1475571
      - 1482158
      - 1545172
      - 1634564
    description: >
      Records counts for in-content searches where the search was started from a place that could not be determined or not categorized by the other scalars. The key format is <provider>:[tagged|tagged-follow-on|organic]:[code|other|none]
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

browser.search.withads:
  urlbar:
    bug_numbers:
      - 1664847
    description: >
      Records counts of SERP pages with adverts displayed where the search was started from the urlbar. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  urlbar_handoff:
    bug_numbers:
      - 1732429
    description: >
      The count URI loads triggered in a subsession from the urlbar via handoff,
      broken down by the originating action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  urlbar_persisted:
    bug_numbers:
      - 1779471
    description: >
      Records counts of SERP pages with adverts displayed where the search was started from the urlbar after the search term was shown in the urlbar. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  urlbar_searchmode:
    bug_numbers:
      - 1664847
    description: >
      Records counts of SERP pages with adverts displayed where the search was started from the urlbar in search mode. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  searchbar:
    bug_numbers:
      - 1664847
    description: >
      Records counts of SERP pages with adverts displayed where the search was started from the search bar. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  about_home:
    bug_numbers:
      - 1664847
    description: >
      Records counts of SERP pages with adverts displayed where the search was started from about:home. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  about_newtab:
    bug_numbers:
      - 1664847
    description: >
      Records counts of SERP pages with adverts displayed where the search was started from about:newtab. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  contextmenu:
    bug_numbers:
      - 1664847
    description: >
      Records counts of SERP pages with adverts displayed where the search was started from the context menu. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  webextension:
    bug_numbers:
      - 1664847
    description: >
      Records counts of SERP pages with adverts displayed where the search was started from a webextension. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  system:
    bug_numbers:
      - 1664847
    description: >
      Records counts of SERP pages with adverts displayed where the search was started from the system, e.g. command line. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  tabhistory:
    bug_numbers:
      - 1664847
    description: >
      Records counts of SERP pages with adverts displayed where the search was loaded from the tab history. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  reload:
    bug_numbers:
      - 1664847
    description: >
      Records counts of SERP pages with adverts displayed where the search was loaded by reloading the page. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  unknown:
    bug_numbers:
      - 1664847
    description: >
      Records counts of SERP pages with adverts displayed where the search was started from a place not categorized by the other scalars. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

browser.search.adclicks:
  urlbar:
    bug_numbers:
      - 1664847
    description: >
      Records clicks of adverts on SERP pages where the search was started from the urlbar. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  urlbar_handoff:
    bug_numbers:
      - 1732429
    description: >
      The count URI loads triggered in a subsession from the urlbar via handoff,
      broken down by the originating action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  urlbar_persisted:
    bug_numbers:
      - 1779471
    description: >
      Records clicks of adverts on SERP pages where the search was started from the urlbar after the search term was shown in the urlbar. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  urlbar_searchmode:
    bug_numbers:
      - 1664847
    description: >
      Records clicks of adverts on SERP pages where the search was started from the urlbar in search mode. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  searchbar:
    bug_numbers:
      - 1664847
    description: >
      Records clicks of adverts on SERP pages where the search was started from the search bar. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  about_home:
    bug_numbers:
      - 1664847
    description: >
      Records clicks of adverts on SERP pages where the search was started from about:home. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  about_newtab:
    bug_numbers:
      - 1664847
    description: >
      Records clicks of adverts on SERP pages where the search was started from about:newtab. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  contextmenu:
    bug_numbers:
      - 1664847
    description: >
      Records clicks of adverts on SERP pages where the search was started from the context menu. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  webextension:
    bug_numbers:
      - 1664847
    description: >
      Records clicks of adverts on SERP pages where the search was started from a webextension. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  system:
    bug_numbers:
      - 1664847
    description: >
      Records clicks of adverts on SERP pages where the search was started from the system, e.g. command line. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  tabhistory:
    bug_numbers:
      - 1664847
    description: >
      Records clicks of adverts on SERP pages where the search was loaded from the tab history. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  reload:
    bug_numbers:
      - 1664847
    description: >
      Records clicks of adverts on SERP pages where the search was loaded by reloading the page. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  unknown:
    bug_numbers:
      - 1664847
    description: >
      Records clicks of adverts on SERP pages where the search was started from a place not categorized by the other scalars. The key format is <provider>:<tagged|organic>
      See https://firefox-source-docs.mozilla.org/browser/search/telemetry.html#browser-search-content
    expires: never
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - rev-data@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

browser.searchinit:
  engine_invalid_webextension:
    bug_numbers:
      - 1665938
      - 1691050
      - 1725501
      - 1763528
      - 1801017
      - 1832463
      - 1871199
    description: >
      Records the WebExtension ID of a search engine where the WebExtension
      is not installed (= 1), disabled (= 2), search engine no longer specified (= 4),
      a different name (= 5), where the submission URL is different between the
      search engine and the WebExtension (= 6). The value '3' has been replaced
      by '6' to distinguish newer entries.
    expires: "129"
    keyed: true
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - mbanner@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

  secure_opensearch_engine_count:
    bug_numbers:
      - 1789438
      - 1811158
      - 1846899
    description: >
      Records the number of secure (i.e., using https) OpenSearch search
      engines a given user has installed
    expires: "126"
    keyed: false
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

  insecure_opensearch_engine_count:
    bug_numbers:
      - 1789438
      - 1811158
      - 1846899
    description: >
      Records the number of insecure (i.e., using http) OpenSearch search
      engines a given user has installed
    expires: "126"
    keyed: false
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

  secure_opensearch_update_count:
    bug_numbers:
      - 1789438
      - 1811158
      - 1846899
    description: >
      Records the number of OpenSearch search engines with secure updates
      enabled (i.e., using https) a given user has installed
    expires: "126"
    keyed: false
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

  insecure_opensearch_update_count:
    bug_numbers:
      - 1789438
      - 1811158
      - 1846899
    description: >
      Records the number of OpenSearch search engines with insecure updates
      enabled (i.e., using http) a given user has installed
    expires: "126"
    keyed: false
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

startup:
  profile_selection_reason:
    bug_numbers:
      - 1522934
      - 1570652
      - 1623406
      - 1749887
    description: >
      How the profile was selected during startup. One of the following reasons:
        unknown:
          Generally should not happen, set as a default in case no other reason
          occured.
        profile-manager:
          The profile was selected by the profile manager.
        profile-reset:
          The profile was selected for reset, normally this would mean a restart.
        restart:
          The user restarted the application, the same profile as previous will
          be used.
        argument-profile:
          The profile was selected by the --profile command line argument.
        argument-p:
          The profile was selected by the -p command line argument.
        firstrun-claimed-default:
          A first run of a dedicated profiles build chose the old default
          profile to be the default for this install.
        firstrun-skipped-default:
          A first run of a dedicated profiles build skipped over the old default
          profile and created a new profile.
        restart-claimed-default:
          A first run of a dedicated profiles build after a restart chose the
          old default profile to be the default for this install.
        restart-skipped-default:
          A first run of a dedicated profiles build after a restart skipped over
          the old default profile and created a new profile.
        firstrun-created-default:
          A first run of the application created a new profile to use.
        default:
          The default profile was selected as normal.
    expires: "never"
    keyed: false
    kind: string
    notification_emails:
      - dtownsend@mozilla.com
      - rtestard@mozilla.com
      - gkaberere@mozilla.com
      - jhollek@mozilla.com
      - echo@mozilla.com
      - shong@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - main
    record_into_store:
      - main
      - new-profile

  is_cold:
    bug_numbers:
      - 1542833
    description: >
      Whether or not this startup is the first startup since OS reboot (according to our
      best guess.)
    expires: never
    kind: boolean
    notification_emails:
      - dothayer@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  seconds_since_last_os_restart:
    bug_numbers:
      - 1654063
    description: >
      The time in seconds between the first browser window loading, and the
      time the OS started. This can give us an indication of whether starting
      the browser may have been the first thing the user did after starting
      their computer.
    expires: never
    kind: uint
    notification_emails:
      - dothayer@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  skeleton_ui_disabled_reason:
    bug_numbers:
      - 1686301
    description: >
      The reason why the skeleton UI was not shown to the user. This should be
      one of the following values:
        None:
          There was no reason for not showing the skeleton UI. This should not
          be recorded.
        Ineligible:
          The user was ineligible for the skeleton UI due to information which
          should already be trivially available via telemetry (i.e., the user
          is running an OS version that doesn't support the skeleton UI.)
        Disabled:
          The registry specified "Enabled" as 0 for the skeleton UI.
        EnabledKeyDoesNotExist:
          The "Enabled" key in the registry does not exist.
        OOM:
          We encountered an allocation failure while trying to show the
          skeleton UI.
        Cmdline:
          The skeleton UI was disabled due to the presence of an unsupported
          command line argument.
        EnvVars:
          The skeleton UI was disabled due to an explicitly unsupported
          environment variable.
        FailedToOpenRegistryKey:
          We were unable to open the skeleton UI Windows registry key.
        RegistryError:
          We encountered an error trying to read/write a skeleton UI registry
          value.
        FailedLoadingDynamicProcs:
          We were unable to dynamically load one of the functions we require in
          order to show the skeleton UI.
        FailedGettingLock:
          We were unable to acquire the skeleton UI lock - this should mean
          that an existing instance of the application is already running.
        FilesystemFailure:
          Encountered some error getting the path to a file or reading from a
          particular file while trying to show the skeleton UI.
        NoStartWithLastProfile:
          The user has set up their profiles so Firefox always shows the
          profile manager during startup.
        FailedRegisteringWindowClass:
          We failed to register the window class needed to show the skeleton UI
          window.
        CorruptData:
          Clearly invalid data was found when trying to load the necessary
          information to show the skeleton UI in the right place.
        BadWindowDimensions:
          Window dimensions outside of the supported size for the skeleton UI.
        FailedGettingMonitorInfo:
          Couldn't get the monitor information when trying to display the
          skeleton UI.
        CreateWindowFailed:
          The call to CreateWindow failed.
        FailedGettingDC:
          We failed to get the HDC to draw into.
        FailedBlitting:
          We failed blitting the actual skeleton UI to the HDC.
        FailedFillingBottomRect:
          We failed filling the solid color of the main browser below the
          browser chrome.
        CrashedOnce:
          At some point the skeleton UI crashed, so we've disabled it for the
          user.
        Unknown:
          An unknown error occurred - this generally should not happen.
    expires: "98"
    keyed: false
    kind: string
    notification_emails:
      - dothayer@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  is_restored_by_macos:
    bug_numbers:
      - 639707
    description: >
      Recorded on every launch of a Firefox install on macOS, with a boolean
      value indicating whether Firefox was restored by macOS or if it was
      manually launched by a user.
    expires: "116"
    keyed: false
    kind: boolean
    notification_emails:
      - spohl@mozilla.com
    operating_systems:
      - mac
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

script.preloader:
  mainthread_recompile:
    bug_numbers:
      - 1364235
      - 1590385
      - 1623098
      - 1649954
      - 1689257
      - 1754639
    description:
      How many times we ended up recompiling a script from the script preloader
      on the main thread.
    expires: "never"
    keyed: false
    kind: uint
    notification_emails:
      - dothayer@mozilla.com
      - plawless@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
      - 'content'

networking:
  nss_initialization:
    bug_numbers:
      - 1628734
    description:
      The time in milliseconds to initialize the NSS component in the
      parent process.
    expires: "never"
    keyed: false
    kind: uint
    notification_emails:
      - mconley@mozilla.com
      - dkeeler@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  loading_certs_task:
    bug_numbers:
      - 1628734
    description:
      The time in milliseconds to load any external certificates. This occurs
      off of the main-thread, but can block main-thread operations.
    expires: "never"
    keyed: false
    kind: uint
    notification_emails:
      - mconley@mozilla.com
      - dkeeler@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  data_transferred_v3_kb:
    bug_numbers:
      - 1533363
      - 1546903
      - 1546796
      - 1546906
      - 1550756
      - 1572666
      - 1590124
      - 1621800
      - 1668604
      - 1706842
    description: >
      How many KB of HTTP data transferred by type, there are some categories
      separated by keys based on 5 parameters:
        1. normal browsing or private browsing
        2. system principal or not
        3. first party or third party
        4. class of service (Leader/Background/Others)
        5. tracking classification (Basic/Content/FingerprintingContent)

      Available keys are:
        "Y0_N1Sys",
        "Y1_N1",
        "Y2_N3Oth",
        "Y3_N3BasicLead",
        "Y4_N3BasicBg",
        "Y5_N3BasicOth",
        "Y6_N3ContentLead",
        "Y7_N3ContentBg",
        "Y8_N3ContentOth",
        "Y9_N3FpLead",
        "Y10_N3FpBg",
        "Y11_N3FpOth",
        "Y12_P1Sys",
        "Y13_P1",
        "Y14_P3Oth",
        "Y15_P3BasicLead",
        "Y16_P3BasicBg",
        "Y17_P3BasicOth",
        "Y18_P3ContentLead",
        "Y19_P3ContentBg",
        "Y20_P3ContentOth",
        "Y21_P3FpLead",
        "Y22_P3FpBg",
        "Y23_P3FpOth"
    expires: "never"
    keyed: true
    kind: uint
    notification_emails:
      - arthur@mozilla.com
      - tanvi@mozilla.com
      - tihuang@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

  data_transferred_captive_portal:
    bug_numbers:
      - 1543005
    description: >
      Hom many KB has been transfer over a captive portal during a subsession.
    expires: "73"
    keyed: false
    kind: uint
    notification_emails:
      - ddamjanovic@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
      - 'socket'

  http_transactions_captive_portal:
    bug_numbers:
      - 1543005
    description: >
      Number of http transactions transfer over a captive portal during a subsession.
    expires: "73"
    keyed: false
    kind: uint
    notification_emails:
      - ddamjanovic@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
      - 'socket'

  http_connections_captive_portal:
    bug_numbers:
      - 1543005
    description: >
      Number of http connections transfer over a captive portal during a subsession.
    expires: "73"
    keyed: false
    kind: uint
    notification_emails:
      - ddamjanovic@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'
      - 'socket'

  captive_portal_banner_displayed:
    bug_numbers:
      - 1868145
    description: >
      Number of times the captive portal banner was displayed in this session.
    expires: never
    release_channel_collection: opt-out
    keyed: false
    kind: uint
    notification_emails:
      - necko@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'all'

  captive_portal_banner_display_time:
    bug_numbers:
      - 1868145
    description: >
      Number of seconds the captive portal banner was displayed for, keyed by close reason:
        "success" - the portal login was completed
        "abort"   - the portal login was aborted (e.g. loss of network)
        "dismiss" - the user dismissed the banner
    expires: never
    release_channel_collection: opt-out
    keyed: true
    keys:
      - 'success'
      - 'abort'
      - 'dismiss'
    kind: uint
    notification_emails:
      - necko@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'all'

  http3_enabled:
    bug_numbers:
      - 1652104
    description: >
      True if HTTP3 is enabled at the start of a session.
    expires: never
    kind: boolean
    keyed: false
    notification_emails:
      - necko@mozilla.com
      - ddamjanovic@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
      - 'content'

  https_rr_prefs_usage:
    bug_numbers:
      - 1686421
    description: >
      A bitfield representation for the usage of HTTPS RR prefs.
      bit 0: network.dns.upgrade_with_https_rr is enabled or not.
      bit 1: network.dns.use_https_rr_as_altsvc is enabled or not.
      bit 2: network.dns.echconfig.enabled is enabled or not.
    expires: never
    kind: uint
    keyed: false
    notification_emails:
      - necko@mozilla.com
      - kershaw@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  trr_connection_cycle_count:
    bug_numbers:
      - 1737198
    description: >
      Number of times we cycled the TRR connection during a subsession.
      Keyed by TRR provider URL.
    expires: never
    keyed: true
    kind: uint
    release_channel_collection: opt-out
    notification_emails:
      - necko@mozilla.com
      - nhnt11@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
      - 'socket'

  data_transferred_per_content_type:
    bug_numbers:
      - 1808695
    description: >
      Number of bytes we transferred keyed by "contentType"
    expires: "130"
    keyed: true
    kind: uint
    release_channel_collection: opt-out
    notification_emails:
      - necko@mozilla.com
      - rtestard@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  data_transferred_pb_per_content_type:
    bug_numbers:
      - 1808695
    description: >
      Number of bytes we transferred in private browsing keyed by "contentType"
    expires: "130"
    keyed: true
    kind: uint
    release_channel_collection: opt-out
    notification_emails:
      - necko@mozilla.com
      - rtestard@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
    record_in_processes:
      - 'main'

  speculative_connect_outcome:
    bug_numbers:
      - 909865
    description: >
      Counts the occurrence of each outcome of a speculative connection
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - necko@mozilla.com
      - acreskey@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  doh_heuristics_attempts:
    bug_numbers:
      - 1784258
    description: >
      The number of times we ran DoH heuristics.
    kind: uint
    expires: never # capturing continuously for monitoring purposes
    release_channel_collection: opt-out
    notification_emails:
      - necko@mozilla.com
      - vgosu@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

  doh_heuristics_pass_count:
    bug_numbers:
      - 1784258
    description: >
      The number of times we passed DoH heuristics.
    kind: uint
    expires: never # capturing continuously for monitoring purposes
    release_channel_collection: opt-out
    notification_emails:
      - necko@mozilla.com
      - vgosu@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

  doh_heuristics_result:
    bug_numbers:
      - 1784258
    description: >
      The value of this scalar indicates the result of the last heuristic run.
      0: "incomplete"
      1: "pass"
      2: "opt-out"
      3: "manually-disabled"
      4: "manually-enabled"
      5: "enterprise-disabled"
      6: "enterprise-present"
      7: "enterprise-enabled"
      8: "vpn"
      9: "proxy"
      10: "nrpt"
      11: "parental"
      12: "modifiedRoots"
      13: "thirdPartyRoots"
      14: "google"
      15: "youtube"
      16: "zscaler"
      17: "canary"
      18: "ignored"
    kind: uint
    expires: never # capturing continuously for monitoring purposes
    release_channel_collection: opt-out
    notification_emails:
      - necko@mozilla.com
      - vgosu@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

  doh_heuristic_ever_tripped:
    bug_numbers:
      - 1784258
    description: >
      True if this heuristic (key) was ever tripped during the session.
    kind: boolean
    keyed: true
    expires: never # capturing continuously for monitoring purposes
    release_channel_collection: opt-out
    notification_emails:
      - necko@mozilla.com
      - vgosu@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

blocklist:
  lastModified_rs_addons:
    bug_numbers:
      - 1572711
      - 1607744
      - 1649960
      - 1689274
      - 1730037
      - 1763529
      - 1811159
      - 1861296
    description: >
      Keep track of the last time the "addons" remotesetting blocklist has been successfully
      updated (as a datetime string in UTC format), set to "Missing Date" when the timestamp
      couldn't be retrieved.
    expires: "132"
    kind: string
    release_channel_collection: opt-out
    notification_emails:
      - addons-dev-internal@mozilla.com
      - rwu@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - main

  lastModified_rs_addons_mlbf:
    bug_numbers:
      - 1633466
      - 1649960
      - 1689274
      - 1730037
      - 1763529
      - 1811159
      - 1861296
    description: >
      Keep track of the last time the "addons-bloomfilters" remotesetting blocklist has been successfully
      updated (as a datetime string in UTC format), set to "Missing Date" when the timestamp
      couldn't be retrieved.
    expires: "132"
    kind: string
    release_channel_collection: opt-out
    notification_emails:
      - addons-dev-internal@mozilla.com
      - rwu@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

  mlbf_source:
    bug_numbers:
      - 1662857
      - 1730037
      - 1763529
      - 1811159
      - 1861296
    description: >
      The source of the RemoteSettings attachment that holds the bloom filter.
      Possible values are "dump_match", "cache_match", "remote_match", "dump_fallback", "cache_fallback", "unknown".
      "dump_match", "cache_match" and "remote_match" are expected known-good values, and means that the loaded
      bloomfilter matches the blocklist record in the RemoteSettings collection. The prefix denotes the immediate
      source of the loaded data: "dump" means packaged with the application, "remote" means a freshly downloaded
      bloomfilter, "cache" means a previously downloaded bloomfilter.
      "dump_fallback" and "cache_fallback" means that the last known bloomfilter was used, despite it not matching
      the latest record in the RemoteSettings collection. In this case the outdated bloomfilter is used as a fallback
      (e.g. because the latest version cannot be downloaded).
      "unknown" means that the bloomfilter cannot be loaded at all. This can happen if the blocklist is disabled
      via preferences or enterprise policies.
    expires: "132"
    kind: string
    release_channel_collection: opt-out
    notification_emails:
      - addons-dev-internal@mozilla.com
      - rwu@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

  mlbf_generation_time:
    bug_numbers:
      - 1633466
      - 1649960
      - 1689274
      - 1730037
      - 1763529
      - 1811159
      - 1861296
    description: >
      Keep track of the generation time of the addon blocklist's bloom filter. This marks the
      point in time until which signed add-ons are recognized by the selected bloom filter from the
      addons-bloomfilters collection.
      The value is a datetime string in UTC format, or  "Missing Date" when unavailable.
    expires: "132"
    kind: string
    release_channel_collection: opt-out
    notification_emails:
      - addons-dev-internal@mozilla.com
      - rwu@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

  mlbf_stash_time_oldest:
    bug_numbers:
      - 1633466
      - 1649960
      - 1689274
      - 1730037
      - 1763529
      - 1811159
      - 1861296
    description: >
      Keep track of the timestamp of the oldest stash of the addons blocklist.
      The value is a datetime string in UTC format, or "Missing Date" when unavailable.
    expires: "132"
    kind: string
    release_channel_collection: opt-out
    notification_emails:
      - addons-dev-internal@mozilla.com
      - rwu@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

  mlbf_stash_time_newest:
    bug_numbers:
      - 1633466
      - 1649960
      - 1689274
      - 1730037
      - 1763529
      - 1811159
      - 1861296
    description: >
      Keep track of the timestamp of the most recent stash of the addons blocklist.
      The value is a datetime string in UTC format, or "Missing Date" when unavailable.
    expires: "132"
    kind: string
    release_channel_collection: opt-out
    notification_emails:
      - addons-dev-internal@mozilla.com
      - rwu@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

# The following section is for the "deletion-request" ping (bug 1585410). All the
# extra identifiers other than `client_id` could be added here.
deletion.request:
  impression_id:
    bug_numbers:
      - 1602064
    description: >
      An identifier used by user interaction pings in Pocket/newtab and Messaging System.
    expires: never
    kind: string
    notification_emails:
      - najiang@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'deletion-request'

  sync_device_id:
    bug_numbers:
      - 1604844
    description: >
      An identifier used by sync ping, to identify the current Firefox profile for a specific Account.
    expires: never
    kind: string
    notification_emails:
      - rfkelly@mozilla.com
      - sync-team@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'deletion-request'

  ecosystem_client_id:
    bug_numbers:
      - 1635662
    description: >
      An identifier used by the ecosystem ping, to delete all ecosystem
      metrics collected from this profile if the user opts out of telemetry.
    expires: never
    kind: string
    notification_emails:
      - lina@mozilla.com
      - sync-team@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'deletion-request'

  context_id:
    bug_numbers:
      - 1729474
    description: >
      An identifier to identify users for Contextual Services user interaction pings.
    expires: never
    kind: string
    notification_emails:
      - najiang@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'deletion-request'

policies:
  count:
    bug_numbers:
      - 1432897
    description: >-
      A uint with the number of active enterprise policies, collected once at
      startup.
    expires: never
    kind: uint
    notification_emails:
      - mkaply@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  is_enterprise:
    bug_numbers:
      - 1803804
    description: >-
      Attempt to determine if the user is an enterprise user based on various signals.
    expires: never
    kind: boolean
    notification_emails:
      - mkaply@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

urlbar.trending:
  block:
    bug_numbers:
      - 1848048
    description: >-
      User has blocked seeing trending results.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

urlbar:
  abandonment:
    bug_numbers:
      - 1752953
    description: >
      A uint recording the number of abandoned engagements in the urlbar. An
      abandonment occurs when the user begins using the urlbar but stops before
      completing the engagement. This can happen when the user clicks outside
      the urlbar to focus a different part of the window. It can also happen
      when the user switches to another window while the urlbar is focused.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - adw@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  autofill_deletion:
    bug_numbers:
      - 1815342
    description: >
      A uint recording the deletion count for autofilled string in the urlbar.
      This occurs when the user deletes whole autofilled string by BACKSPACE or
      DELETE key while the autofilled string is selected.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  engagement:
    bug_numbers:
      - 1752953
    description: >
      A uint recording the number of engagements the user completes in the
      urlbar.  An engagement occurs when the user navigates to a page using the
      urlbar, for example by picking a result in the urlbar panel or typing a
      search term or URL in the urlbar and pressing the enter key.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - adw@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  tips:
    bug_numbers:
      - 1608461
    description: >
      A keyed uint recording how many times particular tips are shown in the
      Urlbar and how often their confirm and help buttons are pressed.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - adw@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

urlbar.impression:
  autofill_about:
    bug_numbers:
      - 1774305
      - 1780188
    description: >
      Counts how many times about-page type was autofilled per engagement.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  autofill_adaptive:
    bug_numbers:
      - 1774305
      - 1780188
    description: >
      Counts how many times adaptive history type was autofilled per engagement.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  autofill_origin:
    bug_numbers:
      - 1774305
      - 1780188
    description: >
      Counts how many times origin type was autofilled per engagement.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  autofill_other:
    bug_numbers:
      - 1774305
      - 1780188
    description: >
      Counts how many times other type was autofilled per engagement.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  autofill_url:
    bug_numbers:
      - 1774305
      - 1780188
    description: >
      Counts how many times url type was autofilled per engagement.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

urlbar.tabtosearch:
  impressions:
    bug_numbers:
      - 1686330
    description: >
      A keyed uint recording how many times non-onboarding tab-to-search results
      are shown in the Urlbar for a particular search engine.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main
  impressions_onboarding:
    bug_numbers:
      - 1686330
    description: >
      A keyed uint recording how many times onboarding tab-to-search results
      are shown in the Urlbar for a particular search engine.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
    record_in_processes:
      - main

urlbar.picked:
    autofill_about:
      bug_numbers:
        - 1770483
      description: >
        Counts how many times an about-page autofill result (e.g.,
        "about:config") was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    autofill_adaptive:
      bug_numbers:
        - 1597791
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    autofill_origin:
      bug_numbers:
        - 1597791
      description: >
        Counts how many times an origin (domain) autofill result (e.g.,
        "mozilla.org") was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    autofill_other:
      bug_numbers:
        - 1770483
      description: >
        Counts how many times some other type of autofill result that does not
        have a specific keyed scalar was picked at a given index. This is a
        fallback that is used when the code is not properly setting a specific
        autofill type, and it should not normally be used. If it appears in the
        data, it means we need to investigate and fix the code that is not
        properly setting a specific autofill type.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    autofill_url:
      bug_numbers:
        - 1597791
      description: >
        Counts how many times a URL autofill result (e.g.,
        "mozilla.org/firefox") was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    bookmark:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    bookmark_adaptive:
      bug_numbers:
        - 1466103
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    clipboard:
      bug_numbers:
        - 1842247
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    dynamic:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    dynamic_wikipedia:
      bug_numbers:
        - 1819797
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    extension:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    formhistory:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    history:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    history_adaptive:
      bug_numbers:
        - 1466103
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    keyword:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    navigational:
      bug_numbers:
        - 1819797
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    quickaction:
      bug_numbers:
        - 1783154
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    quicksuggest:
      bug_numbers:
        - 1761059
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    recent_search:
      bug_numbers:
        - 1852848
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    remotetab:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    searchengine:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    searchsuggestion:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    searchsuggestion_rich:
      bug_numbers:
        - 1834359
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    switchtab:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    tabtosearch:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    tip:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    topsite:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    trending:
      bug_numbers:
        - 1823543
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    trending_rich:
      bug_numbers:
        - 1834359
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    unknown:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times an unknown result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    visiturl:
      bug_numbers:
        - 1671508
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

    weather:
      bug_numbers:
        - 1815699
      description: >
        Counts how many times this result type was picked at a given index.
      expires: never
      kind: uint
      keyed: true
      notification_emails:
        - fx-search-telemetry@mozilla.com
      release_channel_collection: opt-out
      products:
        - 'firefox'
      record_in_processes:
        - main

urlbar.persistedsearchterms:
  revert_by_popup_count:
    bug_numbers:
      - 1815971
    description:
      The count of the number of times search terms were removed from the
      urlbar due to a shown PopupNotification. This event can happen when
      a user loads a SERP and a PopupNotification is shown, as well as when
      a user switches away from a tab on a SERP showing a PopupNotification
      and switches back to it.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  view_count:
    bug_numbers:
      - 1815971
    description:
      The count of the number of times search terms persisted in the Urlbar.
      This gets recorded after a user loads a SERP that persists search terms,
      or switches back to an existing tab that should be showing the persisted
      search terms in the Urlbar, regardless of whether PopupNotification
      cleared the search terms from the Urlbar.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

urlbar.searchmode:
  bookmarkmenu:
    bug_numbers:
      - 1665076
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after selecing the Search Bookmarks menu item in the Library menu.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  handoff:
    bug_numbers:
      - 1654680
      - 1665076
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after being handed off from the search bar on the new tab page.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  keywordoffer:
    bug_numbers:
      - 1654680
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after selecting a keyword offer result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  oneoff:
    bug_numbers:
      - 1654680
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after selecting a one-off.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  shortcut:
    bug_numbers:
      - 1654680
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after pressing a keyboard shortcut.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  tabmenu:
    bug_numbers:
      - 1665076
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after selecting the Search Tabs menu item in the Tab Overflow menu.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  tabtosearch:
    bug_numbers:
      - 1647923
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after selecting a tab-to-search result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  tabtosearch_onboard:
    bug_numbers:
      - 1665934
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after selecting a tab-to-search onboarding result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  topsites_newtab:
    bug_numbers:
      - 1654680
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after selecting a search shortcut Top Site on the New Tab Page.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  topsites_urlbar:
    bug_numbers:
      - 1654680
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after selecting a search shortcut Top Site in the Urlbar.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  touchbar:
    bug_numbers:
      - 1657414
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after selecting a search shortcut on the macOS Touch Bar.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  typed:
    bug_numbers:
      - 1654680
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after typing an alias.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  historymenu:
    bug_numbers:
      - 1736939
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode after selecing the Search History menu item in a History menu.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  other:
    bug_numbers:
      - 1654680
    description: >
      A keyed uint recording how many times the user entered a particular search
      mode from an unknown entry point. If values appear for this probe in
      Telemetry, we should review the entry points to search mode.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

urlbar.picked.searchmode:
  bookmarkmenu:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode from the Search
      Bookmarks menu item in the Library menu.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  handoff:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode by being handed off
      from the search bar on the new tab page.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  keywordoffer:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode by selecting a
      keyword offer result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  oneoff:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode by selecting a
      one-off.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  shortcut:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode by pressing a
      keyboard shortcut.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  tabmenu:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode by selecting the
      Search Tabs menu item in the Tab Overflow menu.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  tabtosearch:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode by selecting a
      tab-to-search result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  tabtosearch_onboard:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode by selecting a
      tab-to-search onboarding result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  topsites_newtab:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode by selecting a
      search shortcut Top Site on the New Tab Page.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  topsites_urlbar:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode by selecting a
      search shortcut Top Site in the Urlbar.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  touchbar:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode by selecting a
      search shortcut on the macOS Touch Bar.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  typed:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode by typing an alias.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  historymenu:
    bug_numbers:
      - 1736939
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode from the Search
      History menu item in a History menu.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  other:
    bug_numbers:
      - 1674874
    description: >
      A keyed uint recording how many times the user picked a particular kind of
      result while in search mode after entering search mode from an unknown
      entry point. If values appear for this probe in Telemetry, we should
      review the entry points to search mode.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

urlbar.zeroprefix:
  abandonment:
    bug_numbers:
      - 1806765
    description: >
      Counts how many times the zero-prefix urlbar results panel was abandoned.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  engagement:
    bug_numbers:
      - 1806765
    description: >
      Counts how many times a result was picked in the zero-prefix urlbar
      results panel.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  exposure:
    bug_numbers:
      - 1806765
    description: >
      Counts how many times the zero-prefix urlbar results panel was shown to
      the user.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

quickaction:
  impression:
    bug_numbers:
      - 1806024
    description: >
      Counts how many times quickaction results were shown. The key
      is the in the form "actionkey-N" where N is the number of characters
      the user typed to be shown the action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  picked:
    bug_numbers:
      - 1783155
    description: >
      Counts how many times quickaction results were selected. The key
      is the in the form "actionkey-N" where N is the number of characters
      the user typed to be shown the action.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

migration:
  uninstaller_profile_refresh:
    bug_numbers:
      - 1634115
      - 1672585
    description: >
      Set when a profile refresh is initiated from the uninstaller.
    expires: never
    kind: boolean
    notification_emails:
      - application-update-telemetry-alerts@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
    operating_systems:
      - windows
  discovered_migrators:
    bug_numbers:
      - 1825655
    description: >
      A keyed uint recording how many times the migration wizard detected a browser / profile
      pair for a particular browser. This is incremented every time the discovery occurs,
      so multiple openings of the wizard will increase the counts each time.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  time_to_produce_migrator_list:
    bug_numbers:
      - 1840917
    description: >
      The amount of time it took in milliseconds to produce the list of migrators and profiles
      for the first time the migration wizard opened during the process lifetime.
    expires: never
    kind: uint
    notification_emails:
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

contextual.services.topsites:
  impression:
    bug_numbers:
      - 1688698
    description: >
      A keyed uint recording how many times the user has viewed the sponsored TopSites
      on the newtab page. The key is a combination of the source and the placement of
      the TopSites tile (1-based). such as 'urlbar_1', 'newtab_2'.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - najiang@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  click:
    bug_numbers:
      - 1688698
    description: >
      A keyed uint recording how many times the user has clicked on the sponsored TopSites
      on the newtab page. The key is a combination of the source and the placement of
      the TopSites tile (1-based). such as 'urlbar_1', 'newtab_2'.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - najiang@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main


contextual.services.quicksuggest:
  impression_dynamic_wikipedia:
    bug_numbers:
      - 1800993
    description: >
      A keyed uint recording how many times the user has viewed sponsored
      Firefox Suggest dynamic wikipedia results in the urlbar. The
      key is the 1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  impression_nav_notmatched:
    bug_numbers:
      - 1819797
    description: >
      A keyed uint recording how many times a urlbar engagement occurred while a
      navigational suggestion was absent. The Nimbus variable
      recordNavigationalSuggestionTelemetry must be true to record this scalar.
      Its key is the type of heuristic result that was present at the time of
      the engagement. Key names are the same as the heuristic result type names
      recorded in Glean telemetry.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
  impression_nav_shown:
    bug_numbers:
      - 1819797
    description: >
      A keyed uint recording how many times a urlbar engagement occurred while a
      navigational suggestion was present. The Nimbus variable
      recordNavigationalSuggestionTelemetry must be true to record this scalar.
      Its key is the type of heuristic result that was present at the time of
      the engagement. Key names are the same as the heuristic result type names
      recorded in Glean telemetry.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
  impression_nav_superceded:
    bug_numbers:
      - 1819797
    description: >
      A keyed uint recording how many times a urlbar engagement occurred when a
      navigational suggestion was matched but superceded by a heuristic result.
      The Nimbus variable recordNavigationalSuggestionTelemetry must be true to
      record this scalar. Its key is the type of heuristic result that was
      present at the time of the engagement. Key names are the same as the
      heuristic result type names recorded in Glean telemetry.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
  impression_nonsponsored:
    bug_numbers:
      - 1800993
    description: >
      A keyed uint recording how many times the user has viewed non-sponsored
      Firefox Suggest (a.k.a. Quick Suggest) results in the urlbar. The key is
      the 1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  impression_sponsored:
    bug_numbers:
      - 1800993
    description: >
      A keyed uint recording how many times the user has viewed sponsored Firefox
      Suggest (a.k.a. Quick Suggest) results in the urlbar. The key is the 1-based
      index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  impression_weather:
    bug_numbers:
      - 1804536
    description: >
      A keyed uint recording how many times the user has viewed Firefox Suggest
      (a.k.a. Quick Suggest) weather result in the urlbar. The key is the
      1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  click_dynamic_wikipedia:
    bug_numbers:
      - 1800993
    description: >
      A keyed uint recording how many times the user has clicked on Firefox
      Suggest dynamic wikipedia results in the urlbar (not including the
      help button). The key is the 1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  click_nav_notmatched:
    bug_numbers:
      - 1819797
    description: >
      A keyed uint recording how many times a heuristic result was clicked while
      a navigational suggestion was absent. The Nimbus variable
      recordNavigationalSuggestionTelemetry must be true to record this
      scalar. Its key is the type of heuristic result that was clicked. Key
      names are the same as the heuristic result type names recorded in Glean
      telemetry.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
  click_nav_shown_heuristic:
    bug_numbers:
      - 1819797
    description: >
      A keyed uint recording how many times a heuristic result was clicked while
      a navigational suggestion was present. The Nimbus variable
      recordNavigationalSuggestionTelemetry must be true to record this
      scalar. Its key is the type of heuristic result that was clicked. Key
      names are the same as the heuristic result type names recorded in Glean
      telemetry.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
  click_nav_shown_nav:
    bug_numbers:
      - 1819797
    description: >
      A keyed uint recording how many times a navigational suggestion was
      clicked. The Nimbus variable recordNavigationalSuggestionTelemetry must be
      true to record this scalar. Its key is the type of heuristic result that
      was present at the time of the engagement. Key names are the same as the
      heuristic result type names recorded in Glean telemetry.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
  click_nav_superceded:
    bug_numbers:
      - 1819797
    description: >
      A keyed uint recording how many times a heuristic result was clicked when
      a navigational suggestion was matched but superceded by the heuristic.
      The Nimbus variable recordNavigationalSuggestionTelemetry must be true to
      record this scalar. Its key is the type of heuristic result that was
      clicked. Key names are the same as the heuristic result type names
      recorded in Glean telemetry.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - firefox
    record_in_processes:
      - main
  click_nonsponsored:
    bug_numbers:
      - 1800993
    description: >
      A keyed uint recording how many times the user has clicked on non-sponsored
      Firefox Suggests (a.k.a. Quick Suggest) results in the urlbar (not
      including the help button). The key is the 1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  click_sponsored:
    bug_numbers:
      - 1800993
    description: >
      A keyed uint recording how many times the user has clicked on sponsored
      Firefox Suggests (a.k.a. Quick Suggest) results in the urlbar (not
      including the help button). The key is the 1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  click_weather:
    bug_numbers:
      - 1804536
    description: >
      A keyed uint recording how many times the user has clicked on Firefox
      Suggests (a.k.a. Quick Suggest) weather results in the urlbar (not
      including the help and dismiss buttons). The key is the 1-based index of
      each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  help_dynamic_wikipedia:
    bug_numbers:
      - 1800993
    description: >
      A keyed uint recording how many times the user has clicked on the help
      button in sponsored Firefox Suggest dynamic wikipedia results
      in the urlbar (not including the help button). The key is the 1-based
      index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  help_nonsponsored:
    bug_numbers:
      - 1800993
    description: >
      A keyed uint recording how many times the user has clicked on the help
      button in non-sponsored Firefox Suggests (a.k.a. Quick Suggest) results in
      the urlbar. The key is the 1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  help_sponsored:
    bug_numbers:
      - 1800993
    description: >
      A keyed uint recording how many times the user has clicked on the help
      button in sponsored Firefox Suggests (a.k.a. Quick Suggest) results in
      the urlbar. The key is the 1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  help_weather:
    bug_numbers:
      - 1804536
    description: >
      A keyed uint recording how many times the user has clicked on the help
      button in Firefox Suggests (a.k.a. Quick Suggest) weather results in the
      urlbar. The key is the 1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  block_dynamic_wikipedia:
    bug_numbers:
      - 1800993
    description: >
      A keyed uint recording how many times the user has blocked/dismissed
      sponsored Firefox Suggest dynamic wikipedia results in the
      urlbar. The key is the 1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  block_nonsponsored:
    bug_numbers:
      - 1761059
    description: >
      A keyed uint recording how many times the user has blocked/dismissed
      non-sponsored Firefox Suggest results in the urlbar, including best
      matches (a.k.a. top picks). The key is the 1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  block_sponsored:
    bug_numbers:
      - 1761059
    description: >
      A keyed uint recording how many times the user has blocked/dismissed
      sponsored Firefox Suggest results in the urlbar, including best matches
      (a.k.a. top picks). The key is the 1-based index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main
  block_weather:
    bug_numbers:
      - 1804536
    description: >
      A keyed uint recording how many times the user has blocked/dismissed
      Firefox Suggest weather results in the urlbar. The key is the 1-based
      index of each result.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

shopping:
  nimbus_disabled:
    bug_numbers:
      - 1847231
    description: >
      Indicates if Nimbus has disabled the use of the shopping component.
      This scalar is mirroring the Glean metric named
      shopping.settings.nimbus_disabled_shopping, which is defined in
      toolkit/components/shopping/metrics.yaml.
    expires: "134"
    kind: boolean
    notification_emails:
      - betling@mozilla.com
      - fx-desktop-shopping-eng@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main
  component_opted_out:
    bug_numbers:
      - 1847231
    description: >
      Indicates if the user has opted out of using the shopping component.
      Set during shopping component init and updated when changed in browser.
      This scalar is mirroring the Glean metric named
      shopping.settings.component_opted_out, which is defined in
      toolkit/components/shopping/metrics.yaml.
    expires: "134"
    kind: boolean
    notification_emails:
      - betling@mozilla.com
      - fx-desktop-shopping-eng@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main
  has_onboarded:
    bug_numbers:
      - 1847231
    description: >
      Indicates if the user has completed the Shopping product Onboarding
      experience. Set during shopping component init and updated when changed
      in browser. This scalar is mirroring the Glean metric named
      shopping.settings.has_onboarded, which is defined in
      toolkit/components/shopping/metrics.yaml.
    expires: "134"
    kind: boolean
    notification_emails:
      - betling@mozilla.com
      - fx-desktop-shopping-eng@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main
  product_page_visits:
    bug_numbers:
      - 1848160
    description: >
      Counts number of visits to a supported retailer product page while
      enrolled in either the control or treatment branches of the shopping
      experiment.
    expires: "134"
    kind: uint
    notification_emails:
      - betling@mozilla.com
      - fx-desktop-shopping-eng@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main
  disabled_ads:
    bug_numbers:
      - 1858540
    description: >
      Indicates if the user has manually disabled ads. Set during shopping
      component init and updated when changed in browser.
    expires: "134"
    kind: boolean
    notification_emails:
      - betling@mozilla.com
      - fx-desktop-shopping-eng@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - main

power:
  cpu_time_bogus_values:
    bug_numbers:
      - 1755733
    description: >
      Impossibly large CPU time values that were discarded.
    expires: never
    kind: uint
    notification_emails:
      - florian@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
      - 'content'
      - 'gpu'
      - 'socket'

  cpu_time_per_process_type_ms:
    bug_numbers:
      - 1747138
    description: >
      CPU time used by each process type in ms.
    expires: never
    kind: uint
    notification_emails:
      - florian@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'all'
    keyed: true
    keys: &per_process_type_keys
      - parent.active
      - parent.active.playing-audio
      - parent.active.playing-video
      - parent.inactive
      - parent.inactive.playing-audio
      - parent.inactive.playing-video
      - prealloc
      - privilegedabout
      - rdd
      - socket
      - web.background
      - web.background-perceivable
      - web.foreground
      - extension
      - gpu
      - gmplugin
      - utility

  gpu_time_bogus_values:
    bug_numbers:
      - 1755733
    description: >
      Impossibly large GPU time values that were discarded.
    expires: never
    kind: uint
    notification_emails:
      - florian@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
      - 'gpu'

  gpu_time_per_process_type_ms:
    bug_numbers:
      - 1747138
    description: >
      GPU time used by each process type in ms.
    expires: never
    kind: uint
    notification_emails:
      - florian@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
      - 'gpu'
    keyed: true
    keys: *per_process_type_keys

  wakeups_per_process_type:
    bug_numbers:
      - 1759535
    description: >
      How many times threads woke up and could have woken up a CPU core. Broken down by process type.
    expires: never
    kind: uint
    notification_emails:
      - florian@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'all'
    keyed: true
    keys: *per_process_type_keys

  total_cpu_time_ms:
    bug_numbers:
      - 1736040
      - 1748627
    description: >
      Total CPU time used by all processes in ms.
    expires: never
    kind: uint
    notification_emails:
      - florian@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'all'

  total_gpu_time_ms:
    bug_numbers:
      - 1743176
      - 1748627
    description: >
      Total GPU time used by all processes in ms.
    expires: never
    kind: uint
    notification_emails:
      - florian@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
      - 'gpu'

  total_thread_wakeups:
    bug_numbers:
      - 1759535
    description: >
      How many times threads woke up and could have woken up a CPU core.
    expires: never
    kind: uint
    notification_emails:
      - florian@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'all'

# The following section is for probes testing the Telemetry system. They will not be
# submitted in pings and are only used for testing.
telemetry.test:
  unsigned_int_kind:
    bug_numbers:
      - 1276190
      - 1685406
    description: >
      This is a test uint type with a really long description, maybe spanning even multiple
      lines, to just prove a point: everything works just fine.
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'geckoview_streaming'
      - 'thunderbird'
    record_in_processes:
      - 'main' # test_ChildScalars.js depends on this being main-only.

  string_kind:
    bug_numbers:
      - 1276190
      - 1685406
    description: A string test type with a one line comment that works just fine!
    expires: never
    kind: string
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'geckoview_streaming'
      - 'thunderbird'
    record_in_processes:
      - 'main'

  boolean_kind:
    bug_numbers:
      - 1281214
      - 1685406
    description: A boolean test type with a one line comment that works just fine!
    expires: never
    kind: boolean
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'geckoview_streaming'
      - 'thunderbird'
    record_in_processes:
      - 'main'

  expired:
    bug_numbers:
      - 1276190
    description: This is an expired testing scalar; not meant to be touched.
    expires: "4"
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'

  unexpired:
    bug_numbers:
      - 1276190
    description: This is an unexpired testing scalar; not meant to be touched.
    expires: "375"
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'

  release_optin:
    bug_numbers:
      - 1276190
    description: A testing scalar; not meant to be touched.
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'

  release_optout:
    bug_numbers:
      - 1276190
    description: A testing scalar; not meant to be touched.
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'

  keyed_release_optin:
    bug_numbers:
      - 1277806
    description: A testing scalar; not meant to be touched.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-in
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'

  keyed_release_optout:
    bug_numbers:
      - 1277806
    description: A testing scalar; not meant to be touched.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'

  keyed_expired:
    bug_numbers:
      - 1277806
    description: This is an expired testing scalar; not meant to be touched.
    expires: "4"
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'

  keyed_unsigned_int:
    bug_numbers:
      - 1277806
      - 1685406
    description: A testing keyed uint scalar; not meant to be touched.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main' # test_ChildScalars.js depends on this being main-only

  mirror_for_labeled_counter:
    bug_numbers:
      - 1277806
      - 1685406
      - 1758795
    description: A testing keyed uint scalar; not meant to be touched.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'
      - 'content'

  keyed_with_keys:
    bug_numbers:
      - 1277806
    description: A testing keyed scalar with defined keys; not meant to be touched.
    expires: never
    kind: uint
    keyed: true
    keys:
      - 'only'
      - 'meant'
      - 'for'
      - 'testing'
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'

  child_keyed_unsigned_int:
    bug_numbers:
      - 1466490
    description: A testing keyed uint scalar; not meant to be touched.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'content'

  keyed_boolean_kind:
    bug_numbers:
      - 1277806
      - 1685406
    description: A testing keyed boolean scalar; not meant to be touched.
    expires: never
    kind: boolean
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'
      - 'content'
    release_channel_collection: opt-out

  content_only_uint:
    bug_numbers:
      - 1278556
    description: A testing uint scalar; not meant to be touched.
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'content'

  rdd_only_uint:
    bug_numbers:
      - 1804291
    description: A testing uint scalar; not meant to be touched.
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'thunderbird'
    record_in_processes:
      - 'rdd'

  socket_only_uint:
    bug_numbers:
      - 1486033
    description: A testing uint scalar; not meant to be touched.
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'socket'

  utility_only_uint:
    bug_numbers:
      - 1794409
    description: A testing uint scalar; not meant to be touched.
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'utility'

  all_processes_uint:
    bug_numbers:
      - 1278556
    description: A testing uint scalar; not meant to be touched.
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'all'

  all_child_processes_string:
    bug_numbers:
      - 1278556
    description: A testing string scalar; not meant to be touched.
    expires: never
    kind: string
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'all_childs'

  default_products:
    bug_numbers:
      - 1452552
    description: A testing uint scalar; not meant to be touched
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'all'

  desktop_only:
    bug_numbers:
      - 1452552
    description: A testing uint scalar; not meant to be touched
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    record_in_processes:
      - 'all'
    products:
      - firefox
      - thunderbird

  keyed_desktop_only:
    bug_numbers:
      - 1452552
    description: A keyed testing uint scalar; not meant to be touched
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    record_in_processes:
      - 'all'
    products:
      - firefox
      - thunderbird

  multiproduct:
    bug_numbers:
      - 1452552
    description: A testing uint scalar; not meant to be touched
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    record_in_processes:
      - 'all'
    products:
      - firefox
      - fennec
      - thunderbird

  mobile_only:
    bug_numbers:
      - 1452552
    description: A testing uint scalar; not meant to be touched
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    record_in_processes:
      - 'all'
    products:
      - fennec

  keyed_mobile_only:
    bug_numbers:
      - 1452552
    description: A keyed testing uint scalar; not meant to be touched
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    record_in_processes:
      - 'all'
    products:
      - fennec

  main_only:
    bug_numbers:
      - 1498164
    description: >
      This is a test uint type with only the main store.
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'main'

  sync_only:
    bug_numbers:
      - 1498164
    description: >
      This is a test uint type with only the sync store.
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'sync'

  impression_id_only:
    bug_numbers:
      - 1602064
    description: >
      This is a test uint type with only the deletion-request store.
    expires: never
    kind: string
    notification_emails:
      - telemetry-client-dev@mozilla.com
      - najiang@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'deletion-request'

  multiple_stores:
    bug_numbers:
      - 1498164
    description: >
      This is a test uint type with multiple stores.
    expires: never
    kind: uint
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'main'
      - 'sync'

  multiple_stores_string:
    bug_numbers:
      - 1498164
      - 1685406
    description: >
      This is a test string type with multiple stores.
    expires: never
    kind: string
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'main'
      - 'sync'

  multiple_stores_bool:
    bug_numbers:
      - 1498164
    description: >
      This is a test bool type with multiple stores.
    expires: never
    kind: boolean
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'main'
      - 'sync'

  multiple_stores_keyed:
    bug_numbers:
      - 1498164
    description: >
      This is a test keyed uint type with multiple stores.
    expires: never
    kind: uint
    keyed: true
    notification_emails:
      - telemetry-client-dev@mozilla.com
    products:
      - 'firefox'
      - 'fennec'
      - 'thunderbird'
    record_in_processes:
      - 'main'
    record_into_store:
      - 'main'
      - 'sync'

  mirror_for_date:
    bug_numbers: [1685406]
    description: Test only. This is a mirror probe for a Glean datetime metric.
    expires: never
    kind: string
    notification_emails: [glean-team@mozilla.com]
    products: ["firefox", "thunderbird"]
    record_in_processes: ["all"]
    release_channel_collection: opt-out

  mirror_for_timespan:
    bug_numbers: [1685406]
    description: Test only. This is a mirror probe for a Glean timespan metric.
    expires: never
    kind: uint
    notification_emails: [glean-team@mozilla.com]
    products: ["firefox", "thunderbird"]
    record_in_processes: ["all"]
    release_channel_collection: opt-out

  mirror_for_timespan_nanos:
    bug_numbers: [1704106]
    description: Test only. This is a mirror probe for a Glean timespan metric.
    expires: never
    kind: uint
    notification_emails: [glean-team@mozilla.com]
    products: ["firefox", "thunderbird"]
    record_in_processes: ["all"]
    release_channel_collection: opt-out

  mirror_for_labeled_bool:
    bug_numbers: [1685406]
    description: Test only. This is a mirror probe for a Glean labeled_boolean metric.
    expires: never
    kind: boolean
    keyed: true
    notification_emails: [glean-team@mozilla.com]
    products: ["firefox", "thunderbird"]
    record_in_processes: ["all"]
    release_channel_collection: opt-out

  mirror_for_quantity:
    bug_numbers: [1704846]
    description: Test only. This is a mirror probe for a Glean quantity metric.
    expires: never
    kind: uint
    notification_emails: [glean-team@mozilla.com]
    products: ["firefox", "thunderbird"]
    record_in_processes: ["all"]
    release_channel_collection: opt-out

  mirror_for_rate:
    bug_numbers: [1694496]
    description: >
      Test only. This is a mirror probe for a Glean rate metric.
      Keys are 'numerator' and 'denominator'.
    expires: never
    kind: uint
    keyed: true
    notification_emails: [glean-team@mozilla.com]
    products: ["firefox", "thunderbird"]
    record_in_processes: ["all"]
    release_channel_collection: opt-out

  mirror_for_counter:
    bug_numbers: [1758795]
    description: >
      Test only. This is a mirror probe for a Glean counter metric.
    expires: never
    kind: uint
    notification_emails: [glean-team@mozilla.com]
    products: ["firefox", "thunderbird"]
    record_in_processes: ["all"]
    release_channel_collection: opt-out

  another_mirror_for_labeled_counter:
    bug_numbers: [1758795]
    description: >
      Test only. This is a mirror probe for a Glean labeled_counter metric.
      Keys are labels in the mirrored metric.
    expires: never
    kind: uint
    keyed: true
    notification_emails: [glean-team@mozilla.com]
    products: ["firefox", "thunderbird"]
    record_in_processes: ["all"]
    release_channel_collection: opt-out

  mirror_for_url:
    bug_numbers: [1766980]
    description: >
      Test only. This is a mirror probe for a Glean Url metric.
    expires: never
    kind: string
    notification_emails: [glean-team@mozilla.com]
    products: ["firefox", "thunderbird"]
    record_in_processes: ["all"]
    release_channel_collection: opt-out

cache:
  integrity_check_count:
    bug_numbers:
      - 1687685
    description: >
      The number of errors detected by a Cache API pragma_integrity_check() run in response to a constraint error detected by a VACUUM after performing a schema upgrade.
    expires: "96"
    kind: uint
    notification_emails:
      - storage-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

opaque.response.blocking:
  parsing_size_kb:
    bug_numbers:
      - 1695987
    description: >
      How many KB of response bodies are parsed by ORB?
    expires: "93"
    kind: uint
    notification_emails:
      - echuang@mozilla.com
      - necko@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'
    release_channel_collection: opt-out

  cross_origin_opaque_response_count:
    bug_numbers:
      - 1804638
    description: >
      The number of loads of cross origin opaque resources.
    expires: never
    kind: uint
    notification_emails:
      - farre@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

  javascript_validation_count:
    bug_numbers:
      - 1804638
    description: >
      The number of times we run the JS validator.
    expires: never
    kind: uint
    notification_emails:
      - farre@mozilla.com
    products:
      - 'firefox'
    record_in_processes:
      - 'main'

places:
  sponsored_visit_no_triggering_url:
    bug_numbers:
      - 1787961
    description: >
      Number of sponsored visits that could not find their triggering URL in
      history. We expect this to be a small number just due to the navigation
      layer manipulating URLs. A large or growing value may be a concern.

    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  pages_need_frecency_recalculation:
    bug_numbers:
      - 1811209
    description: >
      Number of pages that need a frecency recalculation.
    expires: never
    kind: uint
    notification_emails:
      - fx-search-telemetry@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  previousday_visits:
    bug_numbers:
      - 1824380
    description: >
      Number of history entries for the previous day.
    expires: never
    kind: uint
    notification_emails:
      - firefox-view-engineers@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

firstStartup:
  statusCode:
    bug_numbers:
      - 1749345
    description: >
      Status of the FirstRun service, which runs post-install/early-startup in Firefox.
    expires: never
    kind: uint
    notification_emails:
      - rhelmer@mozilla.com
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  elapsed:
    bug_numbers:
      - 1749345
    description: >
      Number of milliseconds the FirstRun service took to run.
    expires: never
    kind: uint
    notification_emails:
      - rhelmer@mozilla.com
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  normandyInitTime:
    bug_numbers:
      - 1841138
    description: >
      Number of milliseconds until Normandy.init resolved in FirstStartup.
    expires: never
    kind: uint
    notification_emails:
      - rhelmer@mozilla.com
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

  deleteTasksTime:
    bug_numbers:
      - 1841138
    description: >
      Number of milliseconds until TaskScheduler.deleteAllTasks resolved in FirstStartup.
    expires: never
    kind: uint
    notification_emails:
      - rhelmer@mozilla.com
      - mconley@mozilla.com
    release_channel_collection: opt-out
    products:
      - 'firefox'
    record_in_processes:
      - main

# NOTE: Please don't add new definitions below this point. Consider adding
# them earlier in the file and leave the telemetry.test category as the last
# one for readability.
