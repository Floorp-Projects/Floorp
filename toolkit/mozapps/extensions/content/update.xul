<?xml version="1.0"?>

# -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
# ***** BEGIN LICENSE BLOCK *****
# Version: MPL 1.1/GPL 2.0/LGPL 2.1
#
# The contents of this file are subject to the Mozilla Public License Version
# 1.1 (the "License"); you may not use this file except in compliance with
# the License. You may obtain a copy of the License at
# http://www.mozilla.org/MPL/
#
# Software distributed under the License is distributed on an "AS IS" basis,
# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
# for the specific language governing rights and limitations under the
# License.
#
# The Original Code is The Extension Update Service.
#
# The Initial Developer of the Original Code is Ben Goodger.
# Portions created by the Initial Developer are Copyright (C) 2004
# the Initial Developer. All Rights Reserved.
#
# Contributor(s):
#   Ben Goodger <ben@mozilla.org>
#
# Alternatively, the contents of this file may be used under the terms of
# either the GNU General Public License Version 2 or later (the "GPL"), or
# the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
# in which case the provisions of the GPL or the LGPL are applicable instead
# of those above. If you wish to allow use of your version of this file only
# under the terms of either the GPL or the LGPL, and not to allow others to
# use your version of this file under the terms of the MPL, indicate your
# decision by deleting the provisions above and replace them with the notice
# and other provisions required by the GPL or the LGPL. If you do not delete
# the provisions above, a recipient may use your version of this file under
# the terms of any one of the MPL, the GPL or the LGPL.
#
# ***** END LICENSE BLOCK *****

<?xml-stylesheet href="chrome://global/skin/" type="text/css"?> 
<?xml-stylesheet href="chrome://mozapps/content/extensions/update.css" type="text/css"?> 
<?xml-stylesheet href="chrome://mozapps/skin/extensions/update.css" type="text/css"?> 

<!DOCTYPE wizard [
<!ENTITY % updateDTD SYSTEM "chrome://mozapps/locale/extensions/update.dtd">
<!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd">
%updateDTD;
%brandDTD;
]>

<wizard id="updateWizard"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        title="&updateWizard.title;"
        windowtype="Update:Wizard"
        onload="gUpdateWizard.init();"
        onwizardfinish="gUpdateWizard.onWizardFinish();"
        onclose="return gUpdateWizard.onWizardClose(event);"
        style="width: 47em; min-height: 35em;"
        buttons="accept,cancel">

  <script type="application/x-javascript" src="chrome://mozapps/content/extensions/update.js"/>
  
  <stringbundleset id="updateSet">
    <stringbundle id="brandStrings" src="chrome://branding/locale/brand.properties"/>
    <stringbundle id="updateStrings" src="chrome://mozapps/locale/extensions/update.properties"/>
  </stringbundleset>
  
  <wizardpage id="dummy" pageid="dummy"/>
  
  <wizardpage id="versioninfo" pageid="versioninfo" next="mismatch"
              label="&compatCheck.title;"
              onpageshow="gVersionInfoPage.onPageShow();">
    <progressmeter id="versioninfo.progress" mode="undetermined"/>
    <hbox align="center">
      <image id="versioninfo.throbber" class="throbber"/>
      <label flex="1" crop="right">&compatCheck.intro;</label>
    </hbox>
    <separator/>
  </wizardpage>

  <wizardpage id="mismatch" pageid="mismatch" next="checking"
              label="&mismatch.win.title;"
              onpageshow="gMismatchPage.onPageShow();">

    <label>&mismatch.intro-1.label;</label>
    
    <separator class="thin"/>
    
    <listbox id="mismatch.incompatible" flex="1"/>
    
    <separator class="thin"/>
    
    <label style="font-weight: bold;">&mismatch.intro2.label;</label>
    <separator class="thin"/>
    
    <label>&mismatch.intro-3.label;</label>

  </wizardpage>
  
  <wizardpage id="checking" pageid="checking" next="noupdates"
              label="&checking.title;"
              onpageshow="gUpdatePage.onPageShow();">

    <label>&checking.intro.label;</label>
    
    <separator class="thin"/>
    
    <progressmeter id="checking.progress"/>
    <hbox align="center">
      <image id="checking.throbber" class="throbber"/>
      <label id="checking.status" flex="1" crop="right">&checking.status;</label>
    </hbox>
    
  </wizardpage>
    
  <wizardpage id="noupdates" pageid="noupdates"
              label="&noupdates.title;"
              onpageshow="gNoUpdatesPage.onPageShow();">
    <label id="introUser">&noupdates.intro.user.label;</label>
    <label id="introMismatch" hidden="true">&noupdates.intro.mismatch.label;</label>
    <separator/>
    <vbox id="mismatchNoUpdates" hidden="true">
      <description id="mismatchIncompatibleRemaining" flex="1">
        &noupdates.intro2.mismatch.label;
      </description>
      <description id="mismatchIncompatibleRemaining2" flex="1" hidden="true">
        &noupdates.intro3.mismatch.label;
      </description>
      <separator class="thin"/>

      <vbox align="left">
        <checkbox label="&noupdates.enableChecking.label;" 
                  id="mismatchFinishedEnableChecking" hidden="true"
                  oncommand="gUpdateWizard.shouldAutoCheck = this.checked;"/>
      </vbox>
    </vbox>
    <hbox id="updateCheckErrorNotFound" hidden="true" align="center">
      <description flex="1">
        &updateCheckError.description;
      </description>
      <button label="&updateCheckError.label;" accesskey="&updateCheckError.accesskey;"
              oncommand="gUpdateWizard.showUpdateCheckErrors();"/>
    </hbox>

  </wizardpage>

  <wizardpage id="found" pageid="found" next="installing"
              label="&found.title;"
              onpageshow="gFoundPage.onPageShow();">

    <label>&found.intro.label;</label>
    <separator class="thin"/>
    <radiogroup type="update-types" id="found.updates" flex="1" _uninitialized="true"
                onselect="gFoundPage.onSelect(event);">
      <radio type="update-type" id="addons" accesskey="&updateFound.addons.accesskey;" collapsed="true">
        <description>&updateFound.addons.label;</description>
        <separator class="thin"/>        
        <vbox id="found.addons.list"/>
        <label>.</label>
      </radio>
    </radiogroup>
    <separator class="thin"/>
    <vbox align="left" id="xpinstallDisabledAlert">
      <description flex="1">&found.xpinstallDisabled.label;</description>
      <checkbox label="&found.enableXPInstall.label;"
                id="enableXPInstall"
                accesskey="&found.enableXPInstall.accesskey;"
                oncommand="gFoundPage.toggleXPInstallEnable(event);"/>
      <separator class="thin"/>
    </vbox>
    <label id="foundInstructions"/>
  </wizardpage>

  <wizardpage id="installing" pageid="installing" next="finished"
              label="&installing.title;"
              onpageshow="gInstallingPage.onPageShow();">
    <label>&installing.intro.label;</label>
    <progressmeter id="downloadProgress"/>
    <hbox align="center">
      <image id="installing.throbber" class="throbber"/>
      <label id="actionItem" flex="1" crop="right"/>
    </hbox>
    <separator/>
  </wizardpage>
  
  <wizardpage id="errors" pageid="errors"
              label="&errors.title;"
              align="right"
              onpageshow="gErrorsPage.onPageShow();">
    <label>&errors.introduction.label;</label>
    <separator/>
    <button label="&errors.details.label;" accesskey="&errors.details.accesskey;"
            oncommand="gErrorsPage.onShowErrors();"/>
    <separator/>
  </wizardpage>
  
  <wizardpage id="finished" pageid="finished"
              label="&finished.title;"
              onpageshow="gFinishedPage.onPageShow();">

    <label id="updated" hidden="true">&finished.updated.label;</label>
    <label id="adminDisabled" hidden="true">&finished.adminDisabled.label;</label>
    <separator/>
    <hbox id="incompatibleAlert" align="top" hidden="true">
      <image id="alert"/>
      <description id="incompatibleRemaining" hidden="true"
                   flex="1">&finished.remain.label;</description>
      <description id="incompatibleRemainingLocked" hidden="true"
                   flex="1">&finished.xpinstallLocked.label;</description>
    </hbox>
    <vbox align="left">
      <checkbox class="indent" label="&finished.enableChecking.label;" id="finishedEnableChecking"
                oncommand="gUpdateWizard.shouldAutoCheck = this.checked;" hidden="true"/>
    </vbox>
    <separator flex="1"/>
    <label id="finishedMismatch" hidden="true">&finished.mismatch.label;</label>

  </wizardpage>
  
</wizard>

