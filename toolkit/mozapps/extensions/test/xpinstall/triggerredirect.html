<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<!-- This page will attempt an install and then try to load a new page in the tab -->

<head>
<title>InstallTrigger tests</title>
<script type="text/javascript">
/* globals InstallTrigger */
/* exported startInstall */
function installCallback(url, status) {
  document.location = "#foo";

  dump("Sending InstallComplete\n");
  var event = new CustomEvent("InstallComplete");
  window.dispatchEvent(event);
}

function startInstall() {
  InstallTrigger.install({
    "Unsigned XPI": {
      URL: "amosigned.xpi",
      IconURL: "icon.png",
      toString() { return this.URL; },
    },
  }, installCallback);
}
</script>
</head>
<body onload="startInstall()">
<p>InstallTrigger tests</p>
<p id="return"></p>
<p id="status"></p>
</body>
</html>
