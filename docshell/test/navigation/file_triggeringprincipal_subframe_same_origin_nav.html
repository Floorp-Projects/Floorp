<!DOCTYPE HTML>
<html>
<head><meta charset="utf-8"></head>
<body onload="checkResults()">
<b>SubFrame Same-Origin Navigated</b><br/>

<script type='application/javascript'>
  function checkResults() {
    // query the uri of the loadingPrincipal and the TriggeringPrincipal and pass
    // that information on to the parent for verification.
    var channel = SpecialPowers.wrap(window).docShell.currentDocumentChannel;
    var triggeringPrincipalURI = channel.loadInfo.triggeringPrincipal.asciiSpec;
    var loadingPrincipalURI = channel.loadInfo.loadingPrincipal.asciiSpec;

    window.parent.postMessage({triggeringPrincipalURI,
                               loadingPrincipalURI}, "*");
  }
</script>
</body>
</html>
